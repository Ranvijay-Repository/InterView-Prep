<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âš¡ Asynchronous JavaScript - Interview Prep Documentation</title>
    <meta name="description" content="Comprehensive guides for JavaScript, TypeScript, and React Native interview preparation">
    
    <!-- GitHub Pages compatible styling -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
        }
        
        .container {
            max-width: 100%;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 2em;
            margin-bottom: 1em;
        }
        
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 5px;
        }
        
        code {
            background-color: #f8f9fa;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
        }
        
        blockquote {
            border-left: 4px solid #3498db;
            margin: 0;
            padding-left: 20px;
            color: #666;
            font-style: italic;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .navigation {
            background-color: #2c3e50;
            color: white;
            padding: 10px 0;
            margin-bottom: 20px;
        }
        
        .navigation a {
            color: white;
            text-decoration: none;
            margin-right: 20px;
        }
        
        .navigation a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb {
            margin-bottom: 20px;
            color: #666;
        }
        
        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="navigation">
            <a href="/">Home</a>
            <a href="/Javascript/">JavaScript</a>
            <a href="/TypeScript/">TypeScript</a>
            <a href="/React-Native/">React Native</a>
        </nav>
        
        
        
        <main>
            <h1 id="-asynchronous-javascript">âš¡ Asynchronous JavaScript</h1>

<blockquote>
  <p><strong>Mastering async programming, promises, promises, async/await, and the event loop</strong></p>
</blockquote>

<link rel="stylesheet" href="../common-styles.css" />

<hr />

<h2 id="-table-of-contents">ğŸ“‹ Table of Contents</h2>

<ul>
  <li><a href="#what-is-asynchronous-programming">What is Asynchronous Programming?</a></li>
  <li><a href="#callbacks--callback-hell">Callbacks &amp; Callback Hell</a></li>
  <li><a href="#promises">Promises</a></li>
  <li><a href="#asyncawait">Async/Await</a></li>
  <li><a href="#event-loop--concurrency">Event Loop &amp; Concurrency</a></li>
  <li><a href="#error-handling">Error Handling</a></li>
  <li><a href="#advanced-async-patterns">Advanced Async Patterns</a></li>
  <li><a href="#detailed-examples">Detailed Examples</a></li>
  <li><a href="#common-pitfalls">Common Pitfalls</a></li>
  <li><a href="#best-practices">Best Practices</a></li>
  <li><a href="#key-points">Key Points</a></li>
  <li><a href="#common-interview-questions">Common Interview Questions</a></li>
  <li><a href="#practice-exercises">Practice Exercises</a></li>
  <li><a href="#additional-resources">Additional Resources</a></li>
</ul>

<hr />

<h2 id="-what-is-asynchronous-programming">ğŸ¯ What is Asynchronous Programming?</h2>

<p><strong>Asynchronous Programming</strong> is a programming paradigm that allows code to run in the background without blocking the execution of other code. In JavaScript, this is essential for handling operations like API calls, file operations, and user interactions.</p>

<h3 id="why-asynchronous-programming-matters">Why Asynchronous Programming Matters:</h3>
<ul>
  <li><strong>Non-blocking</strong>: Code continues to run while waiting for operations to complete</li>
  <li><strong>Better User Experience</strong>: UI remains responsive during long operations</li>
  <li><strong>Efficient Resource Usage</strong>: Can handle multiple operations concurrently</li>
  <li><strong>Real-world Operations</strong>: Most real operations (API calls, file I/O) are asynchronous</li>
</ul>

<h3 id="synchronous-vs-asynchronous">Synchronous vs Asynchronous:</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// âŒ SYNCHRONOUS (Blocking)</span>
<span class="kd">function</span> <span class="nx">syncOperation</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">start</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    <span class="c1">// Simulate long operation</span>
    <span class="k">while</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start</span> <span class="o">&lt;</span> <span class="mi">3000</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Block for 3 seconds</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="dl">"</span><span class="s2">Operation completed</span><span class="dl">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Starting...</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">syncOperation</span><span class="p">();</span> <span class="c1">// Blocks here for 3 seconds</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Finished!</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// âœ… ASYNCHRONOUS (Non-blocking)</span>
<span class="kd">function</span> <span class="nx">asyncOperation</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">resolve</span><span class="p">(</span><span class="dl">"</span><span class="s2">Operation completed</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Starting...</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">asyncOperation</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Finished!</span><span class="dl">"</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">This runs immediately!</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="ascii-diagram-sync-vs-async-execution">ASCII Diagram: Sync vs Async Execution</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SYNCHRONOUS EXECUTION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Start                           â”‚
â”‚ â†“                               â”‚
â”‚ Operation 1 (3s)                â”‚
â”‚ â†“                               â”‚
â”‚ Operation 2 (2s)                â”‚
â”‚ â†“                               â”‚
â”‚ Operation 3 (1s)                â”‚
â”‚ â†“                               â”‚
â”‚ End                             â”‚
â”‚ Total Time: 6 seconds           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ASYNCHRONOUS EXECUTION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Start                           â”‚
â”‚ â†“                               â”‚
â”‚ Operation 1 (3s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ Operation 2 (2s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚ Operation 3 (1s) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚ â†“                               â”‚â”‚â”‚
â”‚ End                             â”‚â”‚â”‚
â”‚ Total Time: 3 seconds           â”‚â”‚â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
                                   â”‚â”‚
                                   â””â”˜
                                   â””â”˜
</code></pre></div></div>

<hr />

<h2 id="-callbacks--callback-hell">ğŸ”„ Callbacks &amp; Callback Hell</h2>

<p><strong>Callbacks</strong> are functions passed as arguments to other functions, which are executed once the asynchronous operation completes. While callbacks are fundamental to async JavaScript, they can lead to â€œcallback hellâ€ when nested deeply.</p>

<h3 id="basic-callback-pattern">Basic Callback Pattern:</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Simple callback example</span>
<span class="kd">function</span> <span class="nx">fetchUserData</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Simulate API call</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">id</span><span class="p">:</span> <span class="nx">userId</span><span class="p">,</span>
            <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John Doe</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">email</span><span class="p">:</span> <span class="dl">"</span><span class="s2">john@example.com</span><span class="dl">"</span>
        <span class="p">};</span>
        <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="nx">fetchUserData</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">User:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<hr />

<h2 id="-promises">ğŸ¤ Promises</h2>

<p><strong>Promises</strong> are objects that represent the eventual completion (or failure) of an asynchronous operation. They provide a cleaner way to handle asynchronous code compared to callbacks.</p>

<h3 id="promise-states">Promise States:</h3>
<ul>
  <li><strong>Pending</strong>: Initial state, neither fulfilled nor rejected</li>
  <li><strong>Fulfilled</strong>: Operation completed successfully</li>
  <li><strong>Rejected</strong>: Operation failed</li>
</ul>

<h3 id="basic-promise-usage">Basic Promise Usage:</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Creating a promise</span>
<span class="kd">const</span> <span class="nx">myPromise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Simulate async operation</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">random</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nx">random</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">resolve</span><span class="p">(</span><span class="s2">`Success! Random number: </span><span class="p">${</span><span class="nx">random</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">reject</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`Failed! Random number: </span><span class="p">${</span><span class="nx">random</span><span class="p">}</span><span class="s2">`</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Using the promise</span>
<span class="nx">myPromise</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Promise resolved:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Promise rejected:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">finally</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Promise completed (success or failure)</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div></div>

<hr />

<h2 id="-asyncawait">â³ Async/Await</h2>

<p><strong>Async/Await</strong> is syntactic sugar over promises that makes asynchronous code look and behave more like synchronous code. Itâ€™s built on top of promises and provides a cleaner, more readable way to handle asynchronous operations.</p>

<h3 id="basic-asyncawait-syntax">Basic Async/Await Syntax:</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Basic async function</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">fetchUserData</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// Simulate API call</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">userId</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">reject</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid user ID</span><span class="dl">'</span><span class="p">));</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
                
                <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="na">id</span><span class="p">:</span> <span class="nx">userId</span><span class="p">,</span>
                    <span class="na">name</span><span class="p">:</span> <span class="s2">`User </span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
                    <span class="na">email</span><span class="p">:</span> <span class="s2">`user</span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">@example.com`</span>
                <span class="p">};</span>
                
                <span class="nx">resolve</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
            <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
        <span class="p">});</span>
        
        <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUserData</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">User:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">main</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="ascii-diagram-asyncawait-vs-promises">ASCII Diagram: Async/Await vs Promises</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PROMISE CHAINING                    ASYNC/AWAIT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ fetchUserData(123)          â”‚    â”‚ async function main() {     â”‚
â”‚   .then(user =&gt; {           â”‚    â”‚   try {                     â”‚
â”‚     return fetchPosts(user) â”‚    â”‚     const user = await      â”‚
â”‚   })                        â”‚    â”‚       fetchUserData(123);   â”‚
â”‚   .then(posts =&gt; {          â”‚    â”‚     const posts = await     â”‚
â”‚     return fetchFriends(user)â”‚   â”‚       fetchPosts(user);    â”‚
â”‚   })                        â”‚    â”‚     const friends = await   â”‚
â”‚   .then(friends =&gt; {        â”‚    â”‚       fetchFriends(user);   â”‚
â”‚     console.log(friends);   â”‚    â”‚     console.log(friends);   â”‚
â”‚   })                        â”‚    â”‚   } catch (error) {         â”‚
â”‚   .catch(error =&gt; {         â”‚    â”‚     console.error(error);   â”‚
â”‚     console.error(error);   â”‚    â”‚   }                        â”‚
â”‚   });                       â”‚    â”‚ }                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ADVANTAGES:
â€¢ More readable and intuitive
â€¢ Better error handling with try/catch
â€¢ Easier to debug
â€¢ Sequential execution is clearer
</code></pre></div></div>

<h3 id="sequential-vs-parallel-execution">Sequential vs Parallel Execution:</h3>

<h4 id="1-sequential-execution-default">1. <strong>Sequential Execution (Default)</strong></h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">fetchUserProfile</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">time</span><span class="p">(</span><span class="dl">'</span><span class="s1">Sequential</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// These run one after another</span>
        <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUserData</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">User fetched</span><span class="dl">'</span><span class="p">);</span>
        
        <span class="kd">const</span> <span class="nx">posts</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUserPosts</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Posts fetched</span><span class="dl">'</span><span class="p">);</span>
        
        <span class="kd">const</span> <span class="nx">friends</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUserFriends</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Friends fetched</span><span class="dl">'</span><span class="p">);</span>
        
        <span class="kd">const</span> <span class="nx">settings</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUserSettings</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Settings fetched</span><span class="dl">'</span><span class="p">);</span>
        
        <span class="nx">console</span><span class="p">.</span><span class="nx">timeEnd</span><span class="p">(</span><span class="dl">'</span><span class="s1">Sequential</span><span class="dl">'</span><span class="p">);</span>
        
        <span class="k">return</span> <span class="p">{</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">posts</span><span class="p">,</span> <span class="nx">friends</span><span class="p">,</span> <span class="nx">settings</span> <span class="p">};</span>
        
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
        <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="2-parallel-execution">2. <strong>Parallel Execution</strong></h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">fetchUserProfileParallel</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">time</span><span class="p">(</span><span class="dl">'</span><span class="s1">Parallel</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// These run simultaneously</span>
        <span class="kd">const</span> <span class="p">[</span><span class="nx">user</span><span class="p">,</span> <span class="nx">posts</span><span class="p">,</span> <span class="nx">friends</span><span class="p">,</span> <span class="nx">settings</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
            <span class="nx">fetchUserData</span><span class="p">(</span><span class="nx">userId</span><span class="p">),</span>
            <span class="nx">fetchUserPosts</span><span class="p">(</span><span class="nx">userId</span><span class="p">),</span>
            <span class="nx">fetchUserFriends</span><span class="p">(</span><span class="nx">userId</span><span class="p">),</span>
            <span class="nx">fetchUserSettings</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span>
        <span class="p">]);</span>
        
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">All data fetched simultaneously</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">timeEnd</span><span class="p">(</span><span class="dl">'</span><span class="s1">Parallel</span><span class="dl">'</span><span class="p">);</span>
        
        <span class="k">return</span> <span class="p">{</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">posts</span><span class="p">,</span> <span class="nx">friends</span><span class="p">,</span> <span class="nx">settings</span> <span class="p">};</span>
        
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
        <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="3-mixed-approach">3. <strong>Mixed Approach</strong></h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">fetchUserProfileMixed</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">time</span><span class="p">(</span><span class="dl">'</span><span class="s1">Mixed</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// Fetch user first (required for other calls)</span>
        <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUserData</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">User fetched</span><span class="dl">'</span><span class="p">);</span>
        
        <span class="c1">// Fetch other data in parallel</span>
        <span class="kd">const</span> <span class="p">[</span><span class="nx">posts</span><span class="p">,</span> <span class="nx">friends</span><span class="p">,</span> <span class="nx">settings</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
            <span class="nx">fetchUserPosts</span><span class="p">(</span><span class="nx">userId</span><span class="p">),</span>
            <span class="nx">fetchUserFriends</span><span class="p">(</span><span class="nx">userId</span><span class="p">),</span>
            <span class="nx">fetchUserSettings</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span>
        <span class="p">]);</span>
        
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Remaining data fetched in parallel</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">timeEnd</span><span class="p">(</span><span class="dl">'</span><span class="s1">Mixed</span><span class="dl">'</span><span class="p">);</span>
        
        <span class="k">return</span> <span class="p">{</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">posts</span><span class="p">,</span> <span class="nx">friends</span><span class="p">,</span> <span class="nx">settings</span> <span class="p">};</span>
        
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
        <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="error-handling-with-asyncawait">Error Handling with Async/Await:</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Multiple ways to handle errors</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">robustErrorHandling</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// Method 1: Try-catch with await</span>
        <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUserData</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
        
        <span class="c1">// Method 2: Promise.catch() with await</span>
        <span class="kd">const</span> <span class="nx">posts</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUserPosts</span><span class="p">(</span><span class="mi">123</span><span class="p">).</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Posts fetch failed, using default:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
            <span class="k">return</span> <span class="p">[];</span> <span class="c1">// Return default value</span>
        <span class="p">});</span>
        
        <span class="c1">// Method 3: Conditional error handling</span>
        <span class="kd">let</span> <span class="nx">friends</span><span class="p">;</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="nx">friends</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUserFriends</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">rate limit</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span>
                <span class="c1">// Retry after delay</span>
                <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">1000</span><span class="p">));</span>
                <span class="nx">friends</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUserFriends</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">friends</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// Default value</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="k">return</span> <span class="p">{</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">posts</span><span class="p">,</span> <span class="nx">friends</span> <span class="p">};</span>
        
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle any uncaught errors</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Unexpected error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
        <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="advanced-asyncawait-patterns">Advanced Async/Await Patterns:</h3>

<h4 id="1-async-iterators">1. <strong>Async Iterators</strong></h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span><span class="o">*</span> <span class="nx">asyncGenerator</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">apple</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">banana</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">cherry</span><span class="dl">'</span><span class="p">];</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">item</span> <span class="k">of</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Simulate async operation</span>
        <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">1000</span><span class="p">));</span>
        <span class="k">yield</span> <span class="nx">item</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage with for-await-of</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">consumeAsyncGenerator</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="k">await</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">item</span> <span class="k">of</span> <span class="nx">asyncGenerator</span><span class="p">())</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Received:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">consumeAsyncGenerator</span><span class="p">();</span>
</code></pre></div></div>

<h4 id="2-async-functions-in-loops">2. <strong>Async Functions in Loops</strong></h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// âŒ WRONG: Sequential execution in loop</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">processItemsSequential</span><span class="p">(</span><span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">[];</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">item</span> <span class="k">of</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">processItem</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span> <span class="c1">// Waits for each</span>
        <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// âœ… CORRECT: Parallel execution in loop</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">processItemsParallel</span><span class="p">(</span><span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">promises</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">processItem</span><span class="p">(</span><span class="nx">item</span><span class="p">));</span>
    <span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">promises</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// âœ… CORRECT: Controlled concurrency</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">processItemsWithConcurrency</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">concurrency</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">[];</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="nx">concurrency</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">batch</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">concurrency</span><span class="p">);</span>
        <span class="kd">const</span> <span class="nx">batchPromises</span> <span class="o">=</span> <span class="nx">batch</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">processItem</span><span class="p">(</span><span class="nx">item</span><span class="p">));</span>
        <span class="kd">const</span> <span class="nx">batchResults</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">batchPromises</span><span class="p">);</span>
        <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">batchResults</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="3-async-class-methods">3. <strong>Async Class Methods</strong></h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">UserService</span> <span class="p">{</span>
    <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
    <span class="p">}</span>
    
    <span class="k">async</span> <span class="nx">getUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Check cache first</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">userId</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Returning cached user</span><span class="dl">'</span><span class="p">);</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
        <span class="p">}</span>
        
        <span class="c1">// Fetch from API</span>
        <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">fetchFromAPI</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
        
        <span class="c1">// Cache the result</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
        
        <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="k">async</span> <span class="nx">fetchFromAPI</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Simulate API call</span>
        <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">1000</span><span class="p">));</span>
        
        <span class="k">return</span> <span class="p">{</span>
            <span class="na">id</span><span class="p">:</span> <span class="nx">userId</span><span class="p">,</span>
            <span class="na">name</span><span class="p">:</span> <span class="s2">`User </span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
            <span class="na">email</span><span class="p">:</span> <span class="s2">`user</span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">@example.com`</span>
        <span class="p">};</span>
    <span class="p">}</span>
    
    <span class="k">async</span> <span class="nx">clearCache</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Cache cleared</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="c1">// Static async method</span>
    <span class="kd">static</span> <span class="k">async</span> <span class="nx">validateUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">userId</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid user ID</span><span class="dl">'</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">const</span> <span class="nx">userService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UserService</span><span class="p">();</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="c1">// Validate first</span>
        <span class="k">await</span> <span class="nx">UserService</span><span class="p">.</span><span class="nx">validateUser</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
        
        <span class="c1">// Get user (will be cached on subsequent calls)</span>
        <span class="kd">const</span> <span class="nx">user1</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">userService</span><span class="p">.</span><span class="nx">getUser</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">User 1:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">user1</span><span class="p">);</span>
        
        <span class="kd">const</span> <span class="nx">user2</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">userService</span><span class="p">.</span><span class="nx">getUser</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span> <span class="c1">// From cache</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">User 2:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">user2</span><span class="p">);</span>
        
        <span class="c1">// Clear cache</span>
        <span class="k">await</span> <span class="nx">userService</span><span class="p">.</span><span class="nx">clearCache</span><span class="p">();</span>
        
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">main</span><span class="p">();</span>
</code></pre></div></div>

<h4 id="4-async-function-composition">4. <strong>Async Function Composition</strong></h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Compose async functions</span>
<span class="kd">const</span> <span class="nx">composeAsync</span> <span class="o">=</span> <span class="p">(...</span><span class="nx">fns</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">async</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">fn</span> <span class="k">of</span> <span class="nx">fns</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Async utility functions</span>
<span class="kd">const</span> <span class="nx">fetchUser</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">500</span><span class="p">));</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">id</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">`User </span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span> <span class="p">};</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">fetchPosts</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">300</span><span class="p">));</span>
    <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="nx">user</span><span class="p">,</span> <span class="na">posts</span><span class="p">:</span> <span class="p">[</span><span class="s2">`Post 1 by </span><span class="p">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="s2">`Post 2 by </span><span class="p">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">]</span> <span class="p">};</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">fetchFriends</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">200</span><span class="p">));</span>
    <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="nx">user</span><span class="p">,</span> <span class="na">friends</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">Friend 1</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Friend 2</span><span class="dl">'</span><span class="p">]</span> <span class="p">};</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">formatProfile</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">id</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
        <span class="na">name</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
        <span class="na">postCount</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">posts</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
        <span class="na">friendCount</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">friends</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
        <span class="na">summary</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> has </span><span class="p">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">posts</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="s2"> posts and </span><span class="p">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">friends</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="s2"> friends`</span>
    <span class="p">};</span>
<span class="p">};</span>

<span class="c1">// Compose and execute</span>
<span class="kd">const</span> <span class="nx">getUserProfile</span> <span class="o">=</span> <span class="nx">composeAsync</span><span class="p">(</span>
    <span class="nx">fetchUser</span><span class="p">,</span>
    <span class="nx">fetchPosts</span><span class="p">,</span>
    <span class="nx">fetchFriends</span><span class="p">,</span>
    <span class="nx">formatProfile</span>
<span class="p">);</span>

<span class="c1">// Usage</span>
<span class="nx">getUserProfile</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">profile</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Profile:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">profile</span><span class="p">))</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">));</span>
</code></pre></div></div>

<hr />

<h2 id="-event-loop--concurrency">ğŸ”„ Event Loop &amp; Concurrency</h2>

<p><strong>The Event Loop</strong> is the mechanism that allows JavaScript to perform non-blocking operations despite being single-threaded. It continuously checks the call stack and processes tasks from the callback queue.</p>

<h3 id="how-the-event-loop-works">How the Event Loop Works:</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Event Loop demonstration</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">1. Start</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">2. Timeout callback</span><span class="dl">'</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">0</span><span class="p">);</span>

<span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">3. Promise microtask</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">4. End</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Output order:</span>
<span class="c1">// 1. Start</span>
<span class="c1">// 4. End</span>
<span class="c1">// 3. Promise microtask</span>
<span class="c1">// 2. Timeout callback</span>
</code></pre></div></div>

<h3 id="ascii-diagram-event-loop-architecture">ASCII Diagram: Event Loop Architecture</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>EVENT LOOP ARCHITECTURE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Call Stack                      â”‚
â”‚ â”œâ”€ main()                      â”‚
â”‚ â”œâ”€ setTimeout()                â”‚
â”‚ â””â”€ console.log()               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Web APIs                        â”‚
â”‚ â”œâ”€ setTimeout                  â”‚
â”‚ â”œâ”€ fetch                       â”‚
â”‚ â”œâ”€ DOM events                  â”‚
â”‚ â””â”€ ...                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Callback Queue (Macrotasks)     â”‚
â”‚ â”œâ”€ setTimeout callbacks         â”‚
â”‚ â”œâ”€ DOM event handlers           â”‚
â”‚ â””â”€ fetch callbacks              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Microtask Queue                 â”‚
â”‚ â”œâ”€ Promise callbacks            â”‚
â”‚ â”œâ”€ queueMicrotask()            â”‚
â”‚ â””â”€ process.nextTick() (Node)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Event Loop                      â”‚
â”‚ 1. Check call stack            â”‚
â”‚ 2. If empty, check microtasks  â”‚
â”‚ 3. If empty, check macrotasks  â”‚
â”‚ 4. Repeat                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div></div>

<h3 id="task-types-and-priority">Task Types and Priority:</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Microtasks (highest priority)</span>
<span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Microtask 1</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">queueMicrotask</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Microtask 2</span><span class="dl">'</span><span class="p">));</span>

<span class="c1">// Macrotasks (lower priority)</span>
<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Macrotask 1</span><span class="dl">'</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">setImmediate</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Macrotask 2</span><span class="dl">'</span><span class="p">));</span> <span class="c1">// Node.js only</span>

<span class="c1">// Synchronous code (immediate)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Synchronous</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Output order:</span>
<span class="c1">// Synchronous</span>
<span class="c1">// Microtask 1</span>
<span class="c1">// Microtask 2</span>
<span class="c1">// Macrotask 1</span>
<span class="c1">// Macrotask 2</span>
</code></pre></div></div>

<hr />

<h2 id="ï¸-error-handling">âš ï¸ Error Handling</h2>

<p><strong>Error handling</strong> in asynchronous JavaScript is crucial for building robust applications. Different patterns require different error handling approaches.</p>

<h3 id="error-handling-patterns">Error Handling Patterns:</h3>

<h4 id="1-try-catch-with-asyncawait">1. <strong>Try-Catch with Async/Await</strong></h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">fetchUserData</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`/api/users/</span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`HTTP error! status: </span><span class="p">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
        <span class="p">}</span>
        
        <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
        
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Failed to fetch user:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
        <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span> <span class="c1">// Re-throw to let caller handle</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUserData</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">User:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error in main:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
        <span class="c1">// Handle error appropriately</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="2-promise-error-handling">2. <strong>Promise Error Handling</strong></h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">fetchUserData</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`/api/users/</span><span class="p">${</span><span class="nx">userId</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`HTTP error! status: </span><span class="p">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Failed to fetch user:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
            <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
        <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="nx">fetchUserData</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">User:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">user</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">});</span>
</code></pre></div></div>

<h4 id="3-global-error-handling">3. <strong>Global Error Handling</strong></h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Global unhandled promise rejection handler</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">unhandledrejection</span><span class="dl">'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Unhandled promise rejection:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">reason</span><span class="p">);</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> <span class="c1">// Prevent default browser behavior</span>
<span class="p">});</span>

<span class="c1">// Global error handler</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Global error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// Node.js global handlers</span>
<span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">unhandledRejection</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">reason</span><span class="p">,</span> <span class="nx">promise</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Unhandled Rejection at:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">promise</span><span class="p">,</span> <span class="dl">'</span><span class="s1">reason:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">reason</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">uncaughtException</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Uncaught Exception:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// Exit on uncaught exceptions</span>
<span class="p">});</span>
</code></pre></div></div>

<hr />

<h2 id="-advanced-async-patterns">ğŸš€ Advanced Async Patterns</h2>

<h3 id="1-async-retry-with-exponential-backoff">1. <strong>Async Retry with Exponential Backoff</strong></h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">retryWithBackoff</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">maxAttempts</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="nx">baseDelay</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">attempt</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">attempt</span> <span class="o">&lt;=</span> <span class="nx">maxAttempts</span><span class="p">;</span> <span class="nx">attempt</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">await</span> <span class="nx">fn</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">attempt</span> <span class="o">===</span> <span class="nx">maxAttempts</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
            <span class="p">}</span>
            
            <span class="kd">const</span> <span class="nx">delay</span> <span class="o">=</span> <span class="nx">baseDelay</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">attempt</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Attempt </span><span class="p">${</span><span class="nx">attempt</span><span class="p">}</span><span class="s2"> failed, retrying in </span><span class="p">${</span><span class="nx">delay</span><span class="p">}</span><span class="s2">ms...`</span><span class="p">);</span>
            
            <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">delay</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">const</span> <span class="nx">unreliableOperation</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">random</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">random</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="dl">"</span><span class="s2">Success!</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Operation failed</span><span class="dl">"</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">retryWithBackoff</span><span class="p">(</span><span class="nx">unreliableOperation</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Final result:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">result</span><span class="p">))</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">All attempts failed:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">));</span>
</code></pre></div></div>

<h3 id="2-async-pool-concurrency-control">2. <strong>Async Pool (Concurrency Control)</strong></h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">AsyncPool</span> <span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">concurrency</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">concurrency</span> <span class="o">=</span> <span class="nx">concurrency</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">running</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">queue</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="p">}</span>
    
    <span class="k">async</span> <span class="nx">add</span><span class="p">(</span><span class="nx">task</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nx">task</span><span class="p">,</span> <span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span> <span class="p">});</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">process</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>
    
    <span class="k">async</span> <span class="nx">process</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">running</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">concurrency</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        
        <span class="k">this</span><span class="p">.</span><span class="nx">running</span><span class="o">++</span><span class="p">;</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="nx">task</span><span class="p">,</span> <span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
        
        <span class="k">try</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">task</span><span class="p">();</span>
            <span class="nx">resolve</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">running</span><span class="o">--</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">process</span><span class="p">();</span> <span class="c1">// Process next item</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">async</span> <span class="nx">waitForAll</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">running</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">const</span> <span class="nx">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AsyncPool</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">tasks</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">resolve</span><span class="p">(</span><span class="dl">"</span><span class="s2">Task 1</span><span class="dl">"</span><span class="p">),</span> <span class="mi">1000</span><span class="p">)),</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">resolve</span><span class="p">(</span><span class="dl">"</span><span class="s2">Task 2</span><span class="dl">"</span><span class="p">),</span> <span class="mi">500</span><span class="p">)),</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">resolve</span><span class="p">(</span><span class="dl">"</span><span class="s2">Task 3</span><span class="dl">"</span><span class="p">),</span> <span class="mi">800</span><span class="p">)),</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">resolve</span><span class="p">(</span><span class="dl">"</span><span class="s2">Task 4</span><span class="dl">"</span><span class="p">),</span> <span class="mi">300</span><span class="p">)),</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">resolve</span><span class="p">(</span><span class="dl">"</span><span class="s2">Task 5</span><span class="dl">"</span><span class="p">),</span> <span class="mi">600</span><span class="p">))</span>
<span class="p">];</span>

<span class="c1">// Add all tasks</span>
<span class="kd">const</span> <span class="nx">promises</span> <span class="o">=</span> <span class="nx">tasks</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">task</span> <span class="o">=&gt;</span> <span class="nx">pool</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">task</span><span class="p">));</span>

<span class="c1">// Wait for all to complete</span>
<span class="k">await</span> <span class="nx">pool</span><span class="p">.</span><span class="nx">waitForAll</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">promises</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">All tasks completed:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">results</span><span class="p">);</span>
</code></pre></div></div>

<hr />

<h2 id="-detailed-examples">ğŸ’» Detailed Examples</h2>

<h3 id="example-1-building-a-complete-async-api-client">Example 1: Building a Complete Async API Client</h3>
<div style="position: relative;">
<button onclick="copyCode(this)" style="position: absolute; top: 10px; right: 10px; background: #007acc; color: white; border: none; border-radius: 4px; padding: 5px 10px; cursor: pointer; font-size: 12px;">ğŸ“‹ Copy</button>



```javascript
console.log("=== BUILDING A COMPLETE ASYNC API CLIENT ===");

class APIClient {
    constructor(baseURL, options = {}) {
        this.baseURL = baseURL;
        this.timeout = options.timeout || 5000;
        this.retries = options.retries || 3;
        this.retryDelay = options.retryDelay || 1000;
        this.headers = {
            'Content-Type': 'application/json',
            ...options.headers
        };
        
        // Request interceptor
        this.requestInterceptor = options.requestInterceptor || (config =&gt; config);
        this.responseInterceptor = options.responseInterceptor || (response =&gt; response);
    }
    
    async request(endpoint, options = {}) {
        const config = this.requestInterceptor({
            url: `${this.baseURL}${endpoint}`,
            timeout: this.timeout,
            headers: { ...this.headers, ...options.headers },
            ...options
        });
        
        return this.executeWithRetry(config);
    }
    
    async executeWithRetry(config, attempt = 1) {
        try {
            const controller = new AbortController();
            const timeoutId = setTimeout(() =&gt; controller.abort(), config.timeout);
            
            const response = await fetch(config.url, {
                method: config.method || 'GET',
                headers: config.headers,
                body: config.body,
                signal: controller.signal
            });
            
            clearTimeout(timeoutId);
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }
            
            const data = await response.json();
            return this.responseInterceptor(data);
            
        } catch (error) {
            if (error.name === 'AbortError') {
                error.message = `Request timed out after ${config.timeout}ms`;
            }
            
            if (attempt &lt; this.retries &amp;&amp; this.isRetryableError(error)) {
                const delay = this.retryDelay * Math.pow(2, attempt - 1);
                console.log(`Attempt ${attempt} failed, retrying in ${delay}ms...`);
                
                await new Promise(resolve =&gt; setTimeout(resolve, delay));
                return this.executeWithRetry(config, attempt + 1);
            }
            
            throw error;
        }
    }
    
    isRetryableError(error) {
        // Retry on network errors, 5xx status codes, and timeouts
        return error.name === 'TypeError' || // Network error
               error.message.includes('timeout') ||
               (error.message.includes('HTTP 5'));
    }
    
    // Convenience methods
    async get(endpoint, options = {}) {
        return this.request(endpoint, { ...options, method: 'GET' });
    }
    
    async post(endpoint, data, options = {}) {
        return this.request(endpoint, {
            ...options,
            method: 'POST',
            body: JSON.stringify(data)
        });
    }
    
    async put(endpoint, data, options = {}) {
        return this.request(endpoint, {
            ...options,
            method: 'PUT',
            body: JSON.stringify(data)
        });
    }
    
    async delete(endpoint, options = {}) {
        return this.request(endpoint, { ...options, method: 'DELETE' });
    }
}

// Enhanced API client with caching and rate limiting
class EnhancedAPIClient extends APIClient {
    constructor(baseURL, options = {}) {
        super(baseURL, options);
        this.cache = new Map();
        this.cacheTTL = options.cacheTTL || 5 * 60 * 1000; // 5 minutes
        this.rateLimiter = new RateLimiter(options.rateLimit || { requests: 100, window: 60000 });
    }
    
    async get(endpoint, options = {}) {
        const cacheKey = `${endpoint}-${JSON.stringify(options)}`;
        
        // Check cache first
        if (options.useCache !== false &amp;&amp; this.cache.has(cacheKey)) {
            const cached = this.cache.get(cacheKey);
            if (Date.now() - cached.timestamp &lt; this.cacheTTL) {
                console.log('Returning cached response for:', endpoint);
                return cached.data;
            }
            this.cache.delete(cacheKey);
        }
        
        // Wait for rate limiter
        await this.rateLimiter.waitForSlot();
        
        // Make request
        const data = await super.get(endpoint, options);
        
        // Cache response
        if (options.useCache !== false) {
            this.cache.set(cacheKey, {
                data,
                timestamp: Date.now()
            });
        }
        
        return data;
    }
    
    clearCache(pattern = null) {
        if (pattern) {
            for (const key of this.cache.keys()) {
                if (key.includes(pattern)) {
                    this.cache.delete(key);
                }
            }
        } else {
            this.cache.clear();
        }
    }
}

// Rate limiter implementation
class RateLimiter {
    constructor({ requests, window }) {
        this.requests = requests;
        this.window = window;
        this.tokens = requests;
        this.lastRefill = Date.now();
    }
    
    async waitForSlot() {
        this.refillTokens();
        
        if (this.tokens &gt; 0) {
            this.tokens--;
            return;
        }
        
        // Wait for next refill
        const waitTime = this.window - (Date.now() - this.lastRefill);
        if (waitTime &gt; 0) {
            console.log(`Rate limited, waiting ${waitTime}ms...`);
            await new Promise(resolve =&gt; setTimeout(resolve, waitTime));
            this.refillTokens();
            this.tokens--;
        }
    }
    
    refillTokens() {
        const now = Date.now();
        const timePassed = now - this.lastRefill;
        const refillAmount = Math.floor(timePassed / this.window) * this.requests;
        
        if (refillAmount &gt; 0) {
            this.tokens = Math.min(this.requests, this.tokens + refillAmount);
            this.lastRefill = now;
        }
    }
}

// Usage example
const apiClient = new EnhancedAPIClient('https://api.example.com', {
    timeout: 10000,
    retries: 3,
    cacheTTL: 10 * 60 * 1000, // 10 minutes
    rateLimit: { requests: 50, window: 60000 } // 50 requests per minute
});

// Add interceptors
apiClient.requestInterceptor = (config) =&gt; {
    console.log(`Making ${config.method} request to ${config.url}`);
    return config;
};

apiClient.responseInterceptor = (data) =&gt; {
    console.log('Response received:', data);
    return data;
};

// Use the client
async function main() {
    try {
        // These will be cached and rate-limited
        const users = await apiClient.get('/users');
        const posts = await apiClient.get('/posts');
        
        // Create new user
        const newUser = await apiClient.post('/users', {
            name: 'John Doe',
            email: 'john@example.com'
        });
        
        console.log('All operations completed successfully');
        
    } catch (error) {
        console.error('API operation failed:', error.message);
    }
}

main();
```



---

## âš ï¸ Common Pitfalls

### Pitfall 1: Forgetting `await` Keyword


```javascript
// âŒ WRONG: Missing await
async function fetchData() {
    const data = fetch('/api/data'); // Missing await!
    return data.json(); // Error: data is a Promise, not Response
}

// âœ… CORRECT: With await
async function fetchData() {
    const response = await fetch('/api/data');
    return response.json();
}
```



### Pitfall 2: Not Handling Promise Rejections


```javascript
// âŒ WRONG: Unhandled promise rejection
async function riskyOperation() {
    const result = await someAsyncFunction();
    // If someAsyncFunction rejects, this will cause unhandled rejection
}

// âœ… CORRECT: Proper error handling
async function riskyOperation() {
    try {
        const result = await someAsyncFunction();
        return result;
    } catch (error) {
        console.error('Operation failed:', error);
        throw error; // Re-throw if you want caller to handle
    }
}
```



### Pitfall 3: Blocking the Event Loop


```javascript
// âŒ WRONG: Blocking operation
async function blockingOperation() {
    const start = Date.now();
    while (Date.now() - start &lt; 5000) {
        // This blocks the event loop for 5 seconds
    }
    return "Done";
}

// âœ… CORRECT: Non-blocking operation
async function nonBlockingOperation() {
    await new Promise(resolve =&gt; setTimeout(resolve, 5000));
    return "Done";
}
```



---

## ğŸ¯ Best Practices

### âœ… Do's:
- **Use async/await** for cleaner, more readable code
- **Handle errors properly** with try-catch blocks
- **Use Promise.all()** for parallel operations when possible
- **Implement proper retry logic** for unreliable operations
- **Add timeouts** to prevent hanging requests
- **Use appropriate concurrency limits** to avoid overwhelming systems

### âŒ Don'ts:
- **Don't forget error handling** in async functions
- **Don't block the event loop** with long-running synchronous code
- **Don't create callback hell** - use promises or async/await
- **Don't ignore unhandled promise rejections**
- **Don't mix async patterns** unnecessarily

---

## ğŸ”‘ Key Points

- **Asynchronous programming** allows non-blocking operations
- **Callbacks** are fundamental but can lead to callback hell
- **Promises** provide better error handling and chaining
- **Async/await** makes async code look synchronous
- **Event Loop** manages task execution order
- **Microtasks** have higher priority than macrotasks
- **Error handling** is crucial for robust async applications
- **Use appropriate patterns** for different use cases

---

## â“ Common Interview Questions

<div class="interview-question">
    <h4>Q1: What is the difference between synchronous and asynchronous code?</h4>
    <button class="solution-toggle-btn" onclick="toggleSolution(this)">Show Solution</button>
    <div class="solution">
        <p><strong>A:</strong> Synchronous code executes line by line, blocking execution until each operation completes. Asynchronous code allows operations to run in the background while other code continues to execute. Async operations use callbacks, promises, or async/await to handle completion, making applications more responsive and efficient.</p>
    </div>
</div>

<div class="interview-question">
    <h4>Q2: How does the Event Loop work in JavaScript?</h4>
    <button class="solution-toggle-btn" onclick="toggleSolution(this)">Show Solution</button>
    <div class="solution">
        <p><strong>A:</strong> The Event Loop continuously checks if the call stack is empty. When empty, it processes tasks from the microtask queue first (promises, queueMicrotask), then from the macrotask queue (setTimeout, DOM events, fetch callbacks). This ensures JavaScript remains non-blocking while maintaining proper execution order.</p>
    </div>
</div>

<div class="interview-question">
    <h4>Q3: What's the difference between Promise.all() and Promise.allSettled()?</h4>
    <button class="solution-toggle-btn" onclick="toggleSolution(this)">Show Solution</button>
    <div class="solution">
        <p><strong>A:</strong> Promise.all() waits for all promises to resolve and rejects immediately if any promise rejects. Promise.allSettled() waits for all promises to complete (resolve or reject) and returns an array of results with status and value/reason for each promise, regardless of success or failure.</p>
    </div>
</div>

<div class="interview-question">
    <h4>Q4: How do you handle errors in async/await functions?</h4>
    <button class="solution-toggle-btn" onclick="toggleSolution(this)">Show Solution</button>
    <div class="solution">
        <p><strong>A:</strong> Use try-catch blocks around await expressions, handle specific errors with conditional logic, or use Promise.catch() with await. Always handle errors appropriately to prevent unhandled promise rejections and provide fallback behavior when operations fail.</p>
    </div>
</div>

<div class="interview-question">
    <h4>Q5: What are microtasks and macrotasks?</h4>
    <button class="solution-toggle-btn" onclick="toggleSolution(this)">Show Solution</button>
    <div class="solution">
        <p><strong>A:</strong> Microtasks (promises, queueMicrotask) have higher priority and execute before the next render. Macrotasks (setTimeout, setInterval, DOM events) have lower priority and execute after microtasks. The Event Loop processes all microtasks before moving to macrotasks, ensuring proper execution order.</p>
    </div>
</div>

---

## ğŸ‹ï¸ Practice Exercises

<div class="practice-exercise">
    <h4>Exercise 1: Implement a Promise-based Retry Mechanism</h4>
    <p>Create a function that retries a promise-based operation with configurable attempts, delays, and backoff strategies.</p>
    <button class="solution-toggle-btn" onclick="toggleSolution(this)">Show Solution</button>
    <div class="solution">
        <div style="position: relative;">
            <button onclick="copyCode(this)" class="copy-btn">ğŸ“‹ Copy</button>
            <pre><code>function retry(operation, options = {}) {
    const {
        maxAttempts = 3,
        baseDelay = 1000,
        maxDelay = 10000,
        backoff = 'exponential',
        shouldRetry = () =&gt; true
    } = options;
    
    return new Promise((resolve, reject) =&gt; {
        let attempts = 0;
        
        function attempt() {
            attempts++;
            
            operation()
                .then(resolve)
                .catch(error =&gt; {
                    if (attempts &gt;= maxAttempts || !shouldRetry(error)) {
                        reject(new Error(`Failed after ${attempts} attempts: ${error.message}`));
                        return;
                    }
                    
                    const delay = calculateDelay(attempts, baseDelay, maxDelay, backoff);
                    console.log(`Attempt ${attempts} failed, retrying in ${delay}ms...`);
                    
                    setTimeout(attempt, delay);
                });
        }
        
        attempt();
    });
}

function calculateDelay(attempt, baseDelay, maxDelay, backoff) {
    let delay;
    
    switch (backoff) {
        case 'linear':
            delay = baseDelay * attempt;
            break;
        case 'exponential':
            delay = baseDelay * Math.pow(2, attempt - 1);
            break;
        case 'fibonacci':
            delay = baseDelay * getFibonacci(attempt);
            break;
        default:
            delay = baseDelay;
    }
    
    return Math.min(delay, maxDelay);
}

function getFibonacci(n) {
    if (n &lt;= 1) return 1;
    return getFibonacci(n - 1) + getFibonacci(n - 2);
}

// Usage examples
const unreliableOperation = () =&gt; {
    return new Promise((resolve, reject) =&gt; {
        const random = Math.random();
        if (random &gt; 0.7) {
            resolve("Operation succeeded!");
        } else {
            reject(new Error("Operation failed"));
        }
    });
};

// Test different retry strategies
retry(unreliableOperation, {
    maxAttempts: 5,
    baseDelay: 500,
    backoff: 'exponential'
})
.then(result =&gt; console.log("Success:", result))
.catch(error =&gt; console.error("Failed:", error.message));

// Custom retry condition
retry(unreliableOperation, {
    maxAttempts: 10,
    baseDelay: 200,
    backoff: 'linear',
    shouldRetry: (error) =&gt; !error.message.includes('fatal')
})
.then(result =&gt; console.log("Success:", result))
.catch(error =&gt; console.error("Failed:", error.message));</code></pre>
        </div>
    </div>
</div>

<div class="practice-exercise">
    <h4>Exercise 2: Create an Async Queue with Priority</h4>
    <p>Implement a queue system that processes async tasks with different priority levels and concurrency control.</p>
    <button class="solution-toggle-btn" onclick="toggleSolution(this)">Show Solution</button>
    <div class="solution">
        <div style="position: relative;">
            <button onclick="copyCode(this)" class="copy-btn">ğŸ“‹ Copy</button>
            <pre><code>class PriorityAsyncQueue {
    constructor(concurrency = 3) {
        this.concurrency = concurrency;
        this.running = 0;
        this.queues = {
            high: [],
            normal: [],
            low: []
        };
        this.processing = false;
    }
    
    add(task, priority = 'normal') {
        return new Promise((resolve, reject) =&gt; {
            const queueItem = { task, resolve, reject, priority, timestamp: Date.now() };
            
            if (!this.queues[priority]) {
                priority = 'normal'; // Default to normal if invalid priority
            }
            
            this.queues[priority].push(queueItem);
            this.process();
        });
    }
    
    async process() {
        if (this.processing || this.running &gt;= this.concurrency) {
            return;
        }
        
        this.processing = true;
        
        while (this.running &lt; this.concurrency &amp;&amp; this.hasTasks()) {
            const task = this.getNextTask();
            if (task) {
                this.running++;
                this.executeTask(task);
            }
        }
        
        this.processing = false;
    }
    
    hasTasks() {
        return this.queues.high.length &gt; 0 || 
               this.queues.normal.length &gt; 0 || 
               this.queues.low.length &gt; 0;
    }
    
    getNextTask() {
        // Priority order: high &gt; normal &gt; low
        if (this.queues.high.length &gt; 0) {
            return this.queues.high.shift();
        }
        if (this.queues.normal.length &gt; 0) {
            return this.queues.normal.shift();
        }
        if (this.queues.low.length &gt; 0) {
            return this.queues.low.shift();
        }
        return null;
    }
    
    async executeTask(queueItem) {
        try {
            const result = await queueItem.task();
            queueItem.resolve(result);
        } catch (error) {
            queueItem.reject(error);
        } finally {
            this.running--;
            this.process(); // Process next task
        }
    }
    
    getStats() {
        return {
            running: this.running,
            queued: {
                high: this.queues.high.length,
                normal: this.queues.normal.length,
                low: this.queues.low.length
            },
            total: this.queues.high.length + this.queues.normal.length + this.queues.low.length
        };
    }
    
    clear() {
        this.queues.high = [];
        this.queues.normal = [];
        this.queues.low = [];
    }
}

// Usage example
const queue = new PriorityAsyncQueue(2);

// Add tasks with different priorities
const tasks = [
    { task: () =&gt; new Promise(resolve =&gt; setTimeout(() =&gt; resolve("High priority"), 100)), priority: 'high' },
    { task: () =&gt; new Promise(resolve =&gt; setTimeout(() =&gt; resolve("Normal priority"), 200)), priority: 'normal' },
    { task: () =&gt; new Promise(resolve =&gt; setTimeout(() =&gt; resolve("Low priority"), 300)), priority: 'low' },
    { task: () =&gt; new Promise(resolve =&gt; setTimeout(() =&gt; resolve("Another high"), 150)), priority: 'high' },
    { task: () =&gt; new Promise(resolve =&gt; setTimeout(() =&gt; resolve("Another normal"), 250)), priority: 'normal' }
];

// Add all tasks
const promises = tasks.map(({ task, priority }) =&gt; 
    queue.add(task, priority)
);

// Monitor progress
const interval = setInterval(() =&gt; {
    const stats = queue.getStats();
    console.log('Queue stats:', stats);
    
    if (stats.total === 0 &amp;&amp; stats.running === 0) {
        clearInterval(interval);
        console.log('All tasks completed');
    }
}, 100);

// Wait for all tasks
Promise.all(promises)
    .then(results =&gt; {
        console.log('All results:', results);
    })
    .catch(error =&gt; {
        console.error('Task failed:', error);
    });</code></pre>
        </div>
    </div>
</div>

<div class="practice-exercise">
    <h4>Exercise 3: Build a Promise-based Event Emitter</h4>
    <p>Create an event emitter that supports both synchronous and asynchronous event handlers with proper error handling.</p>
    <button class="solution-toggle-btn" onclick="toggleSolution(this)">Show Solution</button>
    <div class="solution">
        <div style="position: relative;">
            <button onclick="copyCode(this)" class="copy-btn">ğŸ“‹ Copy</button>
            <pre><code>class AsyncEventEmitter {
    constructor() {
        this.events = new Map();
        this.onceEvents = new Map();
    }
    
    on(event, handler) {
        if (!this.events.has(event)) {
            this.events.set(event, []);
        }
        this.events.get(event).push(handler);
        return this; // For chaining
    }
    
    once(event, handler) {
        if (!this.onceEvents.has(event)) {
            this.onceEvents.set(event, []);
        }
        this.onceEvents.get(event).push(handler);
        return this;
    }
    
    off(event, handler) {
        if (this.events.has(event)) {
            const handlers = this.events.get(event);
            const index = handlers.indexOf(handler);
            if (index &gt; -1) {
                handlers.splice(index, 1);
            }
        }
        
        if (this.onceEvents.has(event)) {
            const handlers = this.onceEvents.get(event);
            const index = handlers.indexOf(handler);
            if (index &gt; -1) {
                handlers.splice(index, 1);
            }
        }
        
        return this;
    }
    
    async emit(event, ...args) {
        const results = [];
        const errors = [];
        
        // Execute regular event handlers
        if (this.events.has(event)) {
            const handlers = this.events.get(event);
            for (const handler of handlers) {
                try {
                    const result = await this.executeHandler(handler, args);
                    results.push(result);
                } catch (error) {
                    errors.push(error);
                }
            }
        }
        
        // Execute once event handlers and remove them
        if (this.onceEvents.has(event)) {
            const handlers = this.onceEvents.get(event);
            for (const handler of handlers) {
                try {
                    const result = await this.executeHandler(handler, args);
                    results.push(result);
                } catch (error) {
                    errors.push(error);
                }
            }
            this.onceEvents.delete(event);
        }
        
        // Throw error if any handlers failed
        if (errors.length &gt; 0) {
            throw new Error(`Event ${event} had ${errors.length} handler errors: ${errors.map(e =&gt; e.message).join(', ')}`);
        }
        
        return results;
    }
    
    async executeHandler(handler, args) {
        if (typeof handler === 'function') {
            const result = handler(...args);
            if (result instanceof Promise) {
                return await result;
            }
            return result;
        }
        return undefined;
    }
    
    // Utility methods
    async emitAsync(event, ...args) {
        try {
            return await this.emit(event, ...args);
        } catch (error) {
            console.error(`Error emitting event ${event}:`, error);
            return [];
        }
    }
    
    emitSync(event, ...args) {
        const results = [];
        
        // Execute regular handlers synchronously
        if (this.events.has(event)) {
            const handlers = this.events.get(event);
            for (const handler of handlers) {
                try {
                    const result = handler(...args);
                    results.push(result);
                } catch (error) {
                    console.error(`Handler error for event ${event}:`, error);
                }
            }
        }
        
        // Execute once handlers
        if (this.onceEvents.has(event)) {
            const handlers = this.onceEvents.get(event);
            for (const handler of handlers) {
                try {
                    const result = handler(...args);
                    results.push(result);
                } catch (error) {
                    console.error(`Once handler error for event ${event}:`, error);
                }
            }
            this.onceEvents.delete(event);
        }
        
        return results;
    }
    
    // Event counting and monitoring
    listenerCount(event) {
        const regularCount = this.events.has(event) ? this.events.get(event).length : 0;
        const onceCount = this.onceEvents.has(event) ? this.onceEvents.get(event).length : 0;
        return regularCount + onceCount;
    }
    
    eventNames() {
        const regularEvents = Array.from(this.events.keys());
        const onceEvents = Array.from(this.onceEvents.keys());
        return [...new Set([...regularEvents, ...onceEvents])];
    }
    
    removeAllListeners(event) {
        if (event) {
            this.events.delete(event);
            this.onceEvents.delete(event);
        } else {
            this.events.clear();
            this.onceEvents.clear();
        }
        return this;
    }
}

// Usage example
const emitter = new AsyncEventEmitter();

// Add async event handlers
emitter.on('userCreated', async (user) =&gt; {
    await new Promise(resolve =&gt; setTimeout(resolve, 100));
    console.log('Async handler: User created:', user.name);
    return `Processed ${user.name}`;
});

emitter.on('userCreated', (user) =&gt; {
    console.log('Sync handler: User created:', user.name);
    return `Synced ${user.name}`;
});

emitter.once('userCreated', async (user) =&gt; {
    await new Promise(resolve =&gt; setTimeout(resolve, 50));
    console.log('Once handler: Welcome email sent to:', user.email);
    return `Email sent to ${user.email}`;
});

// Emit events
async function main() {
    try {
        // Emit async (waits for all handlers)
        const results = await emitter.emit('userCreated', {
            name: 'John Doe',
            email: 'john@example.com'
        });
        console.log('Async emit results:', results);
        
        // Emit sync (doesn't wait)
        const syncResults = emitter.emitSync('userCreated', {
            name: 'Jane Smith',
            email: 'jane@example.com'
        });
        console.log('Sync emit results:', syncResults);
        
        // Check listener count
        console.log('Listener count for userCreated:', emitter.listenerCount('userCreated'));
        
    } catch (error) {
        console.error('Event emission failed:', error.message);
    }
}

main();</code></pre>
        </div>
    </div>
</div>

---

## ğŸ“š Additional Resources

- [MDN: Using Promises](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises)
- [MDN: async function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function)
- [JavaScript.info: Promises, async/await](https://javascript.info/async)
- [Node.js: Event Loop](https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/)
- [You Don't Know JS: Async &amp; Performance](https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/async-performance/README.md)

---

## ğŸ“‹ Copy Code Functionality

<script src="../common-scripts.js"></script>



---

## ğŸ§­ Navigation

<div class="navigation">
    <a href="02-Object-Oriented-JavaScript.md" class="nav-link prev">â† Previous: Object-Oriented JavaScript</a>
    <a href="04-Modules.md" class="nav-link next">Next: Modules â†’</a>
</div>

*Last updated: December 2024*
</div>

        </main>
        
        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ecf0f1; color: #666; text-align: center;">
            <p>Interview Prep Documentation - Built with Jekyll</p>
        </footer>
    </div>
</body>
</html>
