<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Type Guards &amp; Narrowing - Interview Prep Documentation</title>
    <meta name="description" content="Comprehensive guides for JavaScript, TypeScript, and React Native interview preparation">
    
    <!-- GitHub Pages compatible styling -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
        }
        
        .container {
            max-width: 100%;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 2em;
            margin-bottom: 1em;
        }
        
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 5px;
        }
        
        code {
            background-color: #f8f9fa;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
        }
        
        blockquote {
            border-left: 4px solid #3498db;
            margin: 0;
            padding-left: 20px;
            color: #666;
            font-style: italic;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .navigation {
            background-color: #2c3e50;
            color: white;
            padding: 10px 0;
            margin-bottom: 20px;
        }
        
        .navigation a {
            color: white;
            text-decoration: none;
            margin-right: 20px;
        }
        
        .navigation a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb {
            margin-bottom: 20px;
            color: #666;
        }
        
        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="navigation">
            <a href="/">Home</a>
            <a href="/Javascript/">JavaScript</a>
            <a href="/TypeScript/">TypeScript</a>
            <a href="/React-Native/">React Native</a>
        </nav>
        
        
        
        <main>
            <h1 id="-type-guards--narrowing">üîç <strong>Type Guards &amp; Narrowing</strong></h1>

<blockquote>
  <p><strong>Complete guide to TypeScript type guards, type narrowing, and advanced type safety techniques</strong></p>
</blockquote>

<link rel="stylesheet" href="../../common-styles.css" />

<hr />

<h2 id="-table-of-contents">üìö <strong>Table of Contents</strong></h2>

<ul>
  <li><a href="#type-guards-overview">Type Guards Overview</a></li>
  <li><a href="#built-in-type-guards">Built-in Type Guards</a></li>
  <li><a href="#custom-type-guards">Custom Type Guards</a></li>
  <li><a href="#type-narrowing">Type Narrowing</a></li>
  <li><a href="#advanced-patterns">Advanced Patterns</a></li>
  <li><a href="#best-practices">Best Practices</a></li>
  <li><a href="#common-interview-questions">Common Interview Questions</a></li>
</ul>

<hr />

<h2 id="-type-guards-overview">üéØ <strong>Type Guards Overview</strong></h2>

<p>Type guards are TypeScript‚Äôs way of narrowing down types at runtime, providing type safety and better IntelliSense.</p>

<h3 id="what-are-type-guards"><strong>What are Type Guards?</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Type guards help TypeScript understand types at runtime</span>
<span class="kd">const</span> <span class="nx">typeGuards</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">purpose</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Narrow down types at runtime</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">safety</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Provide type safety</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">intellisense</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Enable better IntelliSense</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">runtime</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Work at both compile-time and runtime</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// Basic type guard example</span>
<span class="kd">function</span> <span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">processValue</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// TypeScript knows value is string here</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">());</span> <span class="c1">// ‚úÖ No error</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// TypeScript knows value is not string here</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Not a string</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="type-guard-benefits"><strong>Type Guard Benefits</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Benefits of using type guards</span>
<span class="kd">const</span> <span class="nx">typeGuardBenefits</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">typeSafety</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Compile-time type safety</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">runtimeSafety</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Runtime type checking</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">intellisense</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Better IDE support</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">refactoring</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Safer refactoring</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">debugging</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Easier debugging</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// Without type guard</span>
<span class="kd">function</span> <span class="nx">processWithoutGuard</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// TypeScript doesn't know the type</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> <span class="c1">// ‚ùå Error: Object is of type 'unknown'</span>
<span class="p">}</span>

<span class="c1">// With type guard</span>
<span class="kd">function</span> <span class="nx">processWithGuard</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// TypeScript knows value is string</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> <span class="c1">// ‚úÖ No error</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="Ô∏è-built-in-type-guards">üõ°Ô∏è <strong>Built-in Type Guards</strong></h2>

<h3 id="typeof-type-guards"><strong>typeof Type Guards</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// typeof type guards</span>
<span class="kd">const</span> <span class="nx">typeofGuards</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">string</span><span class="p">:</span> <span class="dl">"</span><span class="s2">typeof value === 'string'</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">number</span><span class="p">:</span> <span class="dl">"</span><span class="s2">typeof value === 'number'</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">boolean</span><span class="p">:</span> <span class="dl">"</span><span class="s2">typeof value === 'boolean'</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">undefined</span><span class="p">:</span> <span class="dl">"</span><span class="s2">typeof value === 'undefined'</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">object</span><span class="p">:</span> <span class="dl">"</span><span class="s2">typeof value === 'object'</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">function</span><span class="p">:</span> <span class="dl">"</span><span class="s2">typeof value === 'function'</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// typeof examples</span>
<span class="kd">function</span> <span class="nx">processByType</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// value is string</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// value is number</span>
    <span class="k">return</span> <span class="nx">value</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">boolean</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// value is boolean</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// value is function</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// value is object (including null)</span>
    <span class="k">return</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">null</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">null</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// value is undefined</span>
    <span class="k">return</span> <span class="dl">'</span><span class="s1">undefined</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// typeof with null check</span>
<span class="kd">function</span> <span class="nx">handleObject</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// value is object (not null)</span>
    <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">[];</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="instanceof-type-guards"><strong>instanceof Type Guards</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// instanceof type guards</span>
<span class="kd">const</span> <span class="nx">instanceofGuards</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">arrays</span><span class="p">:</span> <span class="dl">"</span><span class="s2">value instanceof Array</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">dates</span><span class="p">:</span> <span class="dl">"</span><span class="s2">value instanceof Date</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">errors</span><span class="p">:</span> <span class="dl">"</span><span class="s2">value instanceof Error</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">custom</span><span class="p">:</span> <span class="dl">"</span><span class="s2">value instanceof CustomClass</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// instanceof examples</span>
<span class="kd">class</span> <span class="nx">CustomError</span> <span class="kd">extends</span> <span class="nb">Error</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">CustomError</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">handleError</span><span class="p">(</span><span class="nx">error</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nb">Error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// error is Error</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">stack</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">CustomError</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// error is CustomError</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Custom error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// error is not an Error</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Unknown error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// instanceof with arrays</span>
<span class="kd">function</span> <span class="nx">processArray</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// value is Array</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// Alternative array check</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="in-operator-type-guards"><strong>in Operator Type Guards</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in operator type guards</span>
<span class="kd">const</span> <span class="nx">inOperatorGuards</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">property</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Check if property exists in object</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">narrowing</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Narrow object types based on properties</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">discrimination</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Discriminate union types</span><span class="dl">"</span>
<span class="p">};</span>

<span class="c1">// in operator examples</span>
<span class="kr">interface</span> <span class="nx">Dog</span> <span class="p">{</span>
  <span class="nl">breed</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nx">bark</span><span class="p">():</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">Cat</span> <span class="p">{</span>
  <span class="nl">breed</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nx">meow</span><span class="p">():</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">handlePet</span><span class="p">(</span><span class="nx">pet</span><span class="p">:</span> <span class="nx">Dog</span> <span class="o">|</span> <span class="nx">Cat</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="dl">'</span><span class="s1">bark</span><span class="dl">'</span> <span class="k">in</span> <span class="nx">pet</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// pet is Dog</span>
    <span class="nx">pet</span><span class="p">.</span><span class="nx">bark</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="dl">'</span><span class="s1">meow</span><span class="dl">'</span> <span class="k">in</span> <span class="nx">pet</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// pet is Cat</span>
    <span class="nx">pet</span><span class="p">.</span><span class="nx">meow</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// in operator with optional properties</span>
<span class="kr">interface</span> <span class="nx">User</span> <span class="p">{</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">email</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">processUser</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">User</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="dl">'</span><span class="s1">email</span><span class="dl">'</span> <span class="k">in</span> <span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// email property exists</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span> <span class="c1">// string | undefined</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// email property doesn't exist</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">No email provided</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="-custom-type-guards">üîß <strong>Custom Type Guards</strong></h2>

<h3 id="basic-custom-type-guards"><strong>Basic Custom Type Guards</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Custom type guard function</span>
<span class="kd">function</span> <span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">isNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">isBoolean</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="nx">boolean</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">boolean</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Using custom type guards</span>
<span class="kd">function</span> <span class="nx">processValue</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// value is string</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// value is number</span>
    <span class="k">return</span> <span class="nx">value</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">isBoolean</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// value is boolean</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="complex-type-guards"><strong>Complex Type Guards</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Complex type guards</span>
<span class="kr">interface</span> <span class="nx">ApiResponse</span> <span class="p">{</span>
  <span class="nl">success</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nl">data</span><span class="p">?:</span> <span class="kr">any</span><span class="p">;</span>
  <span class="nl">error</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">isApiResponse</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="nx">ApiResponse</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span> <span class="o">&amp;&amp;</span>
    <span class="nx">value</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span>
    <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span> <span class="k">in</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span>
    <span class="k">typeof</span> <span class="p">(</span><span class="nx">value</span> <span class="k">as</span> <span class="kr">any</span><span class="p">).</span><span class="nx">success</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">boolean</span><span class="dl">'</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Array type guards</span>
<span class="kd">function</span> <span class="nx">isStringArray</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="kr">string</span><span class="p">[]</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="k">typeof</span> <span class="nx">item</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">isNumberArray</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="kr">number</span><span class="p">[]</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="k">typeof</span> <span class="nx">item</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Using complex type guards</span>
<span class="kd">function</span> <span class="nx">handleApiResponse</span><span class="p">(</span><span class="nx">response</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isApiResponse</span><span class="p">(</span><span class="nx">response</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Success:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid API response</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="generic-type-guards"><strong>Generic Type Guards</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Generic type guards</span>
<span class="kd">function</span> <span class="nx">isArrayOf</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">,</span> <span class="nx">guard</span><span class="p">:</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span> <span class="k">is</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="nx">T</span><span class="p">[]</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="nx">guard</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">isObjectOf</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">,</span> <span class="nx">guard</span><span class="p">:</span> <span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span> <span class="k">is</span> <span class="nx">T</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="nb">Record</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span> <span class="o">&amp;&amp;</span>
    <span class="nx">value</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">values</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">every</span><span class="p">(</span><span class="nx">guard</span><span class="p">)</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Using generic type guards</span>
<span class="kd">function</span> <span class="nx">processStringArray</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isArrayOf</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">isString</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// value is string[]</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="s1">, </span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="dl">''</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">processNumberObject</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isObjectOf</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">isNumber</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// value is Record&lt;string, number&gt;</span>
    <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">values</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">num</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">num</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="-type-narrowing">üéØ <strong>Type Narrowing</strong></h2>

<h3 id="control-flow-analysis"><strong>Control Flow Analysis</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Control flow analysis</span>
<span class="kd">function</span> <span class="nx">analyzeValue</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span> <span class="o">|</span> <span class="nx">boolean</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// TypeScript analyzes the control flow</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// value is string</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// value is number</span>
    <span class="k">return</span> <span class="nx">value</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// value is boolean</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Control flow with early returns</span>
<span class="kd">function</span> <span class="nx">processValue</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="dl">'</span><span class="s1">Not a string</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="c1">// TypeScript knows value is string here</span>
  <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="discriminated-unions"><strong>Discriminated Unions</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Discriminated unions</span>
<span class="kr">interface</span> <span class="nx">LoadingState</span> <span class="p">{</span>
  <span class="nl">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">loading</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">SuccessState</span> <span class="p">{</span>
  <span class="nl">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">data</span><span class="p">:</span> <span class="kr">any</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">ErrorState</span> <span class="p">{</span>
  <span class="nl">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">error</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">AppState</span> <span class="o">=</span> <span class="nx">LoadingState</span> <span class="o">|</span> <span class="nx">SuccessState</span> <span class="o">|</span> <span class="nx">ErrorState</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">handleState</span><span class="p">(</span><span class="nx">state</span><span class="p">:</span> <span class="nx">AppState</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">loading</span><span class="dl">'</span><span class="p">:</span>
      <span class="c1">// state is LoadingState</span>
      <span class="k">return</span> <span class="dl">'</span><span class="s1">Loading...</span><span class="dl">'</span><span class="p">;</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">:</span>
      <span class="c1">// state is SuccessState</span>
      <span class="k">return</span> <span class="s2">`Data: </span><span class="p">${</span><span class="nx">state</span><span class="p">.</span><span class="nx">data</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">:</span>
      <span class="c1">// state is ErrorState</span>
      <span class="k">return</span> <span class="s2">`Error: </span><span class="p">${</span><span class="nx">state</span><span class="p">.</span><span class="nx">error</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="c1">// Exhaustive check</span>
      <span class="kd">const</span> <span class="nx">_exhaustive</span><span class="p">:</span> <span class="nx">never</span> <span class="o">=</span> <span class="nx">state</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">_exhaustive</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="assertion-functions"><strong>Assertion Functions</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Assertion functions</span>
<span class="kd">function</span> <span class="nx">assertIsString</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">asserts</span> <span class="nx">value</span> <span class="k">is</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Expected string</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">assertIsNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">asserts</span> <span class="nx">value</span> <span class="k">is</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">||</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Expected number</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Using assertion functions</span>
<span class="kd">function</span> <span class="nx">processValue</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">assertIsString</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  <span class="c1">// TypeScript knows value is string here</span>
  <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Assertion function with custom error</span>
<span class="kd">function</span> <span class="nx">assertIsArray</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">asserts</span> <span class="nx">value</span> <span class="k">is</span> <span class="kr">any</span><span class="p">[]</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Expected array</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="-advanced-patterns">üöÄ <strong>Advanced Patterns</strong></h2>

<h3 id="branded-types"><strong>Branded Types</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Branded types</span>
<span class="kd">type</span> <span class="nx">Brand</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">B</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">T</span> <span class="o">&amp;</span> <span class="p">{</span> <span class="na">__brand</span><span class="p">:</span> <span class="nx">B</span> <span class="p">};</span>
<span class="kd">type</span> <span class="nx">UserId</span> <span class="o">=</span> <span class="nx">Brand</span><span class="o">&lt;</span><span class="kr">number</span><span class="p">,</span> <span class="dl">'</span><span class="s1">UserId</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">ProductId</span> <span class="o">=</span> <span class="nx">Brand</span><span class="o">&lt;</span><span class="kr">number</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ProductId</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">createUserId</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">UserId</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">id</span> <span class="k">as</span> <span class="nx">UserId</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">createProductId</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">ProductId</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">id</span> <span class="k">as</span> <span class="nx">ProductId</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Type guard for branded types</span>
<span class="kd">function</span> <span class="nx">isUserId</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="nx">UserId</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">isProductId</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="nx">ProductId</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Using branded types</span>
<span class="kd">function</span> <span class="nx">processUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="nx">UserId</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// TypeScript ensures only UserId can be passed</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Processing user:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">userId</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">processProduct</span><span class="p">(</span><span class="nx">productId</span><span class="p">:</span> <span class="nx">ProductId</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// TypeScript ensures only ProductId can be passed</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Processing product:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">productId</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="opaque-types"><strong>Opaque Types</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Opaque types</span>
<span class="kr">declare</span> <span class="kd">const</span> <span class="nx">__opaque</span><span class="p">:</span> <span class="nx">unique</span> <span class="nx">symbol</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">Opaque</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">K</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">T</span> <span class="o">&amp;</span> <span class="p">{</span> <span class="k">readonly</span> <span class="p">[</span><span class="nx">__opaque</span><span class="p">]:</span> <span class="nx">K</span> <span class="p">};</span>

<span class="kd">type</span> <span class="nx">UserId</span> <span class="o">=</span> <span class="nx">Opaque</span><span class="o">&lt;</span><span class="kr">number</span><span class="p">,</span> <span class="dl">'</span><span class="s1">UserId</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">ProductId</span> <span class="o">=</span> <span class="nx">Opaque</span><span class="o">&lt;</span><span class="kr">number</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ProductId</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span>

<span class="c1">// Factory functions for opaque types</span>
<span class="kd">function</span> <span class="nx">createUserId</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">UserId</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">id</span> <span class="k">as</span> <span class="nx">UserId</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">createProductId</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">ProductId</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">id</span> <span class="k">as</span> <span class="nx">ProductId</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Type guards for opaque types</span>
<span class="kd">function</span> <span class="nx">isUserId</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="nx">UserId</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">isProductId</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="nx">ProductId</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="template-literal-types"><strong>Template Literal Types</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Template literal types</span>
<span class="kd">type</span> <span class="nx">EventName</span><span class="o">&lt;</span><span class="nx">T</span> <span class="kd">extends</span> <span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="s2">`on</span><span class="p">${</span><span class="nx">Capitalize</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
<span class="kd">type</span> <span class="nx">ClickEvent</span> <span class="o">=</span> <span class="nx">EventName</span><span class="o">&lt;</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// 'onClick'</span>
<span class="kd">type</span> <span class="nx">SubmitEvent</span> <span class="o">=</span> <span class="nx">EventName</span><span class="o">&lt;</span><span class="dl">'</span><span class="s1">submit</span><span class="dl">'</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// 'onSubmit'</span>

<span class="c1">// Type guard for template literal types</span>
<span class="kd">function</span> <span class="nx">isEventName</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="nx">EventName</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="dl">'</span><span class="s1">on</span><span class="dl">'</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Using template literal types</span>
<span class="kd">function</span> <span class="nx">handleEvent</span><span class="p">(</span><span class="nx">eventName</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isEventName</span><span class="p">(</span><span class="nx">eventName</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// eventName is EventName&lt;string&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Handling event:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">eventName</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="-best-practices">‚úÖ <strong>Best Practices</strong></h2>

<h3 id="1-use-built-in-type-guards-when-possible"><strong>1. Use Built-in Type Guards When Possible</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ‚úÖ Good: Use built-in type guards</span>
<span class="kd">function</span> <span class="nx">processValue</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="k">instanceof</span> <span class="nb">Date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">toISOString</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ‚ùå Avoid: Unnecessary custom type guards</span>
<span class="kd">function</span> <span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">processValue</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="2-make-type-guards-specific"><strong>2. Make Type Guards Specific</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ‚úÖ Good: Specific type guards</span>
<span class="kd">function</span> <span class="nx">isApiResponse</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="nx">ApiResponse</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span> <span class="o">&amp;&amp;</span>
    <span class="nx">value</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span>
    <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span> <span class="k">in</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span>
    <span class="k">typeof</span> <span class="p">(</span><span class="nx">value</span> <span class="k">as</span> <span class="kr">any</span><span class="p">).</span><span class="nx">success</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">boolean</span><span class="dl">'</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="c1">// ‚ùå Avoid: Generic type guards</span>
<span class="kd">function</span> <span class="nx">isObject</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="nx">object</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="3-use-discriminated-unions"><strong>3. Use Discriminated Unions</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ‚úÖ Good: Discriminated unions</span>
<span class="kr">interface</span> <span class="nx">LoadingState</span> <span class="p">{</span>
  <span class="nl">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">loading</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">SuccessState</span> <span class="p">{</span>
  <span class="nl">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">data</span><span class="p">:</span> <span class="kr">any</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">AppState</span> <span class="o">=</span> <span class="nx">LoadingState</span> <span class="o">|</span> <span class="nx">SuccessState</span><span class="p">;</span>

<span class="c1">// ‚ùå Avoid: Union types without discrimination</span>
<span class="kd">type</span> <span class="nx">AppState</span> <span class="o">=</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="nl">data</span><span class="p">?:</span> <span class="kr">any</span> <span class="p">};</span>
</code></pre></div></div>

<h3 id="4-handle-exhaustive-checks"><strong>4. Handle Exhaustive Checks</strong></h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ‚úÖ Good: Exhaustive checks</span>
<span class="kd">function</span> <span class="nx">handleState</span><span class="p">(</span><span class="nx">state</span><span class="p">:</span> <span class="nx">AppState</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">loading</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="dl">'</span><span class="s1">Loading...</span><span class="dl">'</span><span class="p">;</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="dl">'</span><span class="s1">Success</span><span class="dl">'</span><span class="p">;</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="kd">const</span> <span class="nx">_exhaustive</span><span class="p">:</span> <span class="nx">never</span> <span class="o">=</span> <span class="nx">state</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">_exhaustive</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ‚ùå Avoid: Missing cases</span>
<span class="kd">function</span> <span class="nx">handleState</span><span class="p">(</span><span class="nx">state</span><span class="p">:</span> <span class="nx">AppState</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">loading</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="dl">'</span><span class="s1">Loading...</span><span class="dl">'</span><span class="p">;</span>
    <span class="c1">// Missing 'success' case</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="-common-interview-questions">‚ùì <strong>Common Interview Questions</strong></h2>

<h3 id="1-what-are-type-guards-in-typescript"><strong>1. What are type guards in TypeScript?</strong></h3>

<p><strong>Answer:</strong>
Type guards are functions that help TypeScript narrow down types at runtime. They return a type predicate that tells TypeScript what type a value is, enabling type safety and better IntelliSense.</p>

<h3 id="2-whats-the-difference-between-type-guards-and-type-assertions"><strong>2. What‚Äôs the difference between type guards and type assertions?</strong></h3>

<p><strong>Answer:</strong></p>
<ul>
  <li><strong>Type Guards</strong>: Runtime checks that narrow types safely</li>
  <li><strong>Type Assertions</strong>: Compile-time type casting without runtime checks</li>
  <li>Type guards are safer because they actually verify the type at runtime</li>
</ul>

<h3 id="3-how-do-you-create-a-custom-type-guard"><strong>3. How do you create a custom type guard?</strong></h3>

<p><strong>Answer:</strong></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">isString</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">unknown</span><span class="p">):</span> <span class="nx">value</span> <span class="k">is</span> <span class="kr">string</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The return type <code class="language-plaintext highlighter-rouge">value is string</code> is a type predicate that tells TypeScript the value is a string.</p>

<h3 id="4-what-are-discriminated-unions"><strong>4. What are discriminated unions?</strong></h3>

<p><strong>Answer:</strong>
Discriminated unions are union types with a common property (discriminator) that helps TypeScript narrow down the exact type. They‚Äôre useful for representing different states or variants.</p>

<h3 id="5-how-do-you-handle-exhaustive-checks-in-typescript"><strong>5. How do you handle exhaustive checks in TypeScript?</strong></h3>

<p><strong>Answer:</strong>
Use the <code class="language-plaintext highlighter-rouge">never</code> type to ensure all cases are handled:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">handleState</span><span class="p">(</span><span class="nx">state</span><span class="p">:</span> <span class="nx">AppState</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">loading</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="dl">'</span><span class="s1">Loading...</span><span class="dl">'</span><span class="p">;</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="dl">'</span><span class="s1">Success</span><span class="dl">'</span><span class="p">;</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="kd">const</span> <span class="nx">_exhaustive</span><span class="p">:</span> <span class="nx">never</span> <span class="o">=</span> <span class="nx">state</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">_exhaustive</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="-navigation">üß≠ Navigation</h2>

<div class="navigation">
  <a href="../07-TypeScript-Libraries-Ecosystem/04-TypeScript-Future-Roadmap.md" class="nav-button">‚Üê Previous: TypeScript Future Roadmap</a>
  <a href="02-Discriminated-Unions.md" class="nav-button">Next: Discriminated Unions ‚Üí</a>
</div>

<p><em>Last updated: December 2025</em></p>

        </main>
        
        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ecf0f1; color: #666; text-align: center;">
            <p>Interview Prep Documentation - Built with Jekyll</p>
        </footer>
    </div>
</body>
</html>
