<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🔄 Background Tasks - Interview Prep Documentation</title>
    <meta name="description" content="Comprehensive guides for JavaScript, TypeScript, and React Native interview preparation">
    
    <!-- GitHub Pages compatible styling -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
        }
        
        .container {
            max-width: 100%;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 2em;
            margin-bottom: 1em;
        }
        
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 5px;
        }
        
        code {
            background-color: #f8f9fa;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
        }
        
        blockquote {
            border-left: 4px solid #3498db;
            margin: 0;
            padding-left: 20px;
            color: #666;
            font-style: italic;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .navigation {
            background-color: #2c3e50;
            color: white;
            padding: 10px 0;
            margin-bottom: 20px;
        }
        
        .navigation a {
            color: white;
            text-decoration: none;
            margin-right: 20px;
        }
        
        .navigation a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb {
            margin-bottom: 20px;
            color: #666;
        }
        
        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="navigation">
            <a href="/">Home</a>
            <a href="/Javascript/">JavaScript</a>
            <a href="/TypeScript/">TypeScript</a>
            <a href="/React-Native/">React Native</a>
        </nav>
        
        
        
        <main>
            <h1 id="-background-tasks">🔄 <strong>Background Tasks</strong></h1>

<blockquote>
  <p><strong>Master background task execution, Headless JS, and background processing in React Native applications</strong></p>
</blockquote>

<link rel="stylesheet" href="../../common-styles.css" />

<hr />

<h2 id="-table-of-contents">📚 <strong>Table of Contents</strong></h2>

<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#headless-js">Headless JS</a></li>
  <li><a href="#background-fetch">Background Fetch</a></li>
  <li><a href="#background-sync">Background Sync</a></li>
  <li><a href="#task-scheduling">Task Scheduling</a></li>
  <li><a href="#common-patterns">Common Patterns</a></li>
  <li><a href="#interview-questions">Interview Questions</a></li>
  <li><a href="#best-practices">Best Practices</a></li>
</ul>

<hr />

<h2 id="-introduction">🎯 <strong>Introduction</strong></h2>

<p>Background tasks enable React Native applications to perform operations when the app is not in the foreground. Understanding background task management is crucial for building robust applications with offline capabilities and data synchronization.</p>

<h3 id="background-tasks-overview"><strong>Background Tasks Overview</strong></h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>┌─────────────────────────────────────┐
│        Background Tasks             │
│  ┌─────────────────────────────────┐│
│  │        Headless JS              ││
│  │  - Background execution         ││
│  │  - Task scheduling              ││
│  │  - Data processing              ││
│  │  - Notification handling        ││
│  └─────────────────────────────────┘│
│  ┌─────────────────────────────────┐│
│  │        Background Fetch         ││
│  │  - Periodic updates             ││
│  │  - Data synchronization         ││
│  │  - Content refresh              ││
│  │  - Offline support              ││
│  └─────────────────────────────────┘│
│  ┌─────────────────────────────────┐│
│  │        Background Sync          ││
│  │  - Data synchronization         ││
│  │  - Conflict resolution          ││
│  │  - Queue management             ││
│  │  - Error handling               ││
│  └─────────────────────────────────┘│
└─────────────────────────────────────┘
</code></pre></div></div>

<hr />

<h2 id="-headless-js">🔄 <strong>Headless JS</strong></h2>

<h3 id="background-task-manager-example"><strong>Background Task Manager Example</strong></h3>

<p><button onclick="copyCode(this)" class="copy-btn">📋 Copy</button></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">AppRegistry</span><span class="p">,</span> <span class="nx">NativeModules</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">BackgroundJob</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native-background-job</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">AsyncStorage</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@react-native-async-storage/async-storage</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// Background task state</span>
<span class="kd">let</span> <span class="nx">isRunning</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">taskId</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

<span class="c1">// Background task function</span>
<span class="kd">const</span> <span class="nx">backgroundTask</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Background task started</span><span class="dl">'</span><span class="p">);</span>
  
  <span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Perform background operations</span>
    <span class="k">await</span> <span class="nx">performBackgroundSync</span><span class="p">();</span>
    <span class="k">await</span> <span class="nx">processPendingData</span><span class="p">();</span>
    <span class="k">await</span> <span class="nx">updateLocalCache</span><span class="p">();</span>
    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Background task completed successfully</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Background task failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="k">return</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Setup background tasks</span>
<span class="kd">const</span> <span class="nx">setupBackgroundTasks</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Register background task</span>
  <span class="nx">AppRegistry</span><span class="p">.</span><span class="nx">registerHeadlessTask</span><span class="p">(</span><span class="dl">'</span><span class="s1">BackgroundTask</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">backgroundTask</span><span class="p">);</span>
  
  <span class="c1">// Setup background job</span>
  <span class="nx">BackgroundJob</span><span class="p">.</span><span class="nx">register</span><span class="p">({</span>
    <span class="na">jobKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">backgroundSync</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">period</span><span class="p">:</span> <span class="mi">15000</span><span class="p">,</span> <span class="c1">// 15 seconds</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="c1">// Start background task</span>
<span class="kd">const</span> <span class="nx">startBackgroundTask</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isRunning</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Background task already running</span><span class="dl">'</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="nx">isRunning</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    
    <span class="c1">// Start background job</span>
    <span class="nx">BackgroundJob</span><span class="p">.</span><span class="nx">start</span><span class="p">({</span>
      <span class="na">jobKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">backgroundSync</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">callback</span><span class="p">:</span> <span class="nx">backgroundTask</span><span class="p">,</span>
    <span class="p">});</span>
    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Background task started</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error starting background task:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="nx">isRunning</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Stop background task</span>
<span class="kd">const</span> <span class="nx">stopBackgroundTask</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isRunning</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Background task not running</span><span class="dl">'</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="nx">isRunning</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    
    <span class="c1">// Stop background job</span>
    <span class="nx">BackgroundJob</span><span class="p">.</span><span class="nx">stop</span><span class="p">({</span>
      <span class="na">jobKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">backgroundSync</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">});</span>
    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Background task stopped</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error stopping background task:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Perform background sync</span>
<span class="kd">const</span> <span class="nx">performBackgroundSync</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Performing background sync...</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="c1">// Get pending data</span>
    <span class="kd">const</span> <span class="nx">pendingData</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getPendingData</span><span class="p">();</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="nx">pendingData</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">No pending data to sync</span><span class="dl">'</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="c1">// Sync data with server</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">item</span> <span class="k">of</span> <span class="nx">pendingData</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">syncDataItem</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
        <span class="k">await</span> <span class="nx">markDataAsSynced</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">`Failed to sync item </span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">:`</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Synced </span><span class="p">${</span><span class="nx">pendingData</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="s2"> items`</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Background sync failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Process pending data</span>
<span class="kd">const</span> <span class="nx">processPendingData</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Processing pending data...</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="kd">const</span> <span class="nx">pendingData</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getPendingData</span><span class="p">();</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">item</span> <span class="k">of</span> <span class="nx">pendingData</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Process data based on type</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="dl">'</span><span class="s1">image</span><span class="dl">'</span><span class="p">:</span>
          <span class="k">await</span> <span class="nx">processImageData</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="dl">'</span><span class="s1">document</span><span class="dl">'</span><span class="p">:</span>
          <span class="k">await</span> <span class="nx">processDocumentData</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="dl">'</span><span class="s1">audio</span><span class="dl">'</span><span class="p">:</span>
          <span class="k">await</span> <span class="nx">processAudioData</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="nl">default</span><span class="p">:</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Unknown data type: </span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">type</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Pending data processing completed</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Pending data processing failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Update local cache</span>
<span class="kd">const</span> <span class="nx">updateLocalCache</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Updating local cache...</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="c1">// Get cache update timestamp</span>
    <span class="kd">const</span> <span class="nx">lastUpdate</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">AsyncStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">lastCacheUpdate</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">now</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    
    <span class="c1">// Update cache if needed</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">lastUpdate</span> <span class="o">||</span> <span class="p">(</span><span class="nx">now</span> <span class="o">-</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">lastUpdate</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">300000</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 5 minutes</span>
      <span class="k">await</span> <span class="nx">refreshCache</span><span class="p">();</span>
      <span class="k">await</span> <span class="nx">AsyncStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">lastCacheUpdate</span><span class="dl">'</span><span class="p">,</span> <span class="nx">now</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
    <span class="p">}</span>
    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Local cache updated</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Cache update failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Get pending data</span>
<span class="kd">const</span> <span class="nx">getPendingData</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">pendingData</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">AsyncStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">pendingData</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">pendingData</span> <span class="p">?</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">pendingData</span><span class="p">)</span> <span class="p">:</span> <span class="p">[];</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error getting pending data:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">[];</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Sync data item</span>
<span class="kd">const</span> <span class="nx">syncDataItem</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.example.com/sync</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">item</span><span class="p">),</span>
    <span class="p">});</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`Sync failed: </span><span class="p">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Sync error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Mark data as synced</span>
<span class="kd">const</span> <span class="nx">markDataAsSynced</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">pendingData</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getPendingData</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">updatedData</span> <span class="o">=</span> <span class="nx">pendingData</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">id</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">AsyncStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">pendingData</span><span class="dl">'</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">updatedData</span><span class="p">));</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error marking data as synced:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Process image data</span>
<span class="kd">const</span> <span class="nx">processImageData</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Processing image data: </span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="c1">// Image processing logic here</span>
<span class="p">};</span>

<span class="c1">// Process document data</span>
<span class="kd">const</span> <span class="nx">processDocumentData</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Processing document data: </span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="c1">// Document processing logic here</span>
<span class="p">};</span>

<span class="c1">// Process audio data</span>
<span class="kd">const</span> <span class="nx">processAudioData</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Processing audio data: </span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="c1">// Audio processing logic here</span>
<span class="p">};</span>

<span class="c1">// Refresh cache</span>
<span class="kd">const</span> <span class="nx">refreshCache</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Fetch fresh data from server</span>
    <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://api.example.com/cache</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
    
    <span class="c1">// Update local cache</span>
    <span class="k">await</span> <span class="nx">AsyncStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">cachedData</span><span class="dl">'</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Cache refresh failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Get task status</span>
<span class="kd">const</span> <span class="nx">getTaskStatus</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">isRunning</span><span class="p">:</span> <span class="nx">isRunning</span><span class="p">,</span>
    <span class="na">taskId</span><span class="p">:</span> <span class="nx">taskId</span><span class="p">,</span>
    <span class="na">lastRun</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">(),</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="c1">// Export all functions</span>
<span class="k">export</span> <span class="p">{</span>
  <span class="nx">setupBackgroundTasks</span><span class="p">,</span>
  <span class="nx">startBackgroundTask</span><span class="p">,</span>
  <span class="nx">stopBackgroundTask</span><span class="p">,</span>
  <span class="nx">performBackgroundSync</span><span class="p">,</span>
  <span class="nx">processPendingData</span><span class="p">,</span>
  <span class="nx">updateLocalCache</span><span class="p">,</span>
  <span class="nx">getPendingData</span><span class="p">,</span>
  <span class="nx">syncDataItem</span><span class="p">,</span>
  <span class="nx">markDataAsSynced</span><span class="p">,</span>
  <span class="nx">processImageData</span><span class="p">,</span>
  <span class="nx">processDocumentData</span><span class="p">,</span>
  <span class="nx">processAudioData</span><span class="p">,</span>
  <span class="nx">refreshCache</span><span class="p">,</span>
  <span class="nx">getTaskStatus</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<hr />

<h2 id="-navigation">🧭 Navigation</h2>

<div class="navigation">
    <a href="./02-Camera-Media-FileSystem.md" class="nav-link prev">⬅️ Previous: Camera, Media &amp; File System</a>
    <a href="./04-Push-Notifications.md" class="nav-link next">Next: Push Notifications ➡️</a>
</div>

<hr />

<p><em>Last updated: December 2024</em></p>

        </main>
        
        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ecf0f1; color: #666; text-align: center;">
            <p>Interview Prep Documentation - Built with Jekyll</p>
        </footer>
    </div>
</body>
</html>
