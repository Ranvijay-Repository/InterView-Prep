<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Leaks Prevention in React Native - Interview Prep Documentation</title>
    <meta name="description" content="Comprehensive guides for JavaScript, TypeScript, and React Native interview preparation">
    
    <!-- GitHub Pages compatible styling -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
        }
        
        .container {
            max-width: 100%;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 2em;
            margin-bottom: 1em;
        }
        
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 5px;
        }
        
        code {
            background-color: #f8f9fa;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
        }
        
        blockquote {
            border-left: 4px solid #3498db;
            margin: 0;
            padding-left: 20px;
            color: #666;
            font-style: italic;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .navigation {
            background-color: #2c3e50;
            color: white;
            padding: 10px 0;
            margin-bottom: 20px;
        }
        
        .navigation a {
            color: white;
            text-decoration: none;
            margin-right: 20px;
        }
        
        .navigation a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb {
            margin-bottom: 20px;
            color: #666;
        }
        
        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="navigation">
            <a href="/">Home</a>
            <a href="/Javascript/">JavaScript</a>
            <a href="/TypeScript/">TypeScript</a>
            <a href="/React-Native/">React Native</a>
        </nav>
        
        
        
        <main>
            <h1 id="memory-leaks-prevention-in-react-native">Memory Leaks Prevention in React Native</h1>

<h2 id="overview">Overview</h2>

<p>Memory leaks in React Native applications can cause performance degradation, crashes, and poor user experience. Understanding how to identify, prevent, and fix memory leaks is crucial for building robust mobile applications.</p>

<h2 id="understanding-memory-leaks">Understanding Memory Leaks</h2>

<h3 id="what-are-memory-leaks">What are Memory Leaks?</h3>

<p>A memory leak occurs when allocated memory is not properly released, causing the application to consume increasing amounts of RAM over time. In React Native, this typically happens when:</p>

<ul>
  <li>Event listeners are not removed</li>
  <li>Timers/intervals are not cleared</li>
  <li>References to components are held after unmounting</li>
  <li>Large objects are kept in memory unnecessarily</li>
</ul>

<h3 id="common-memory-leak-sources">Common Memory Leak Sources</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ BAD: Event listener not removed</span>
<span class="kd">const</span> <span class="nx">MyComponent</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">handleResize</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Handle resize</span>
    <span class="p">};</span>
    
    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">resize</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleResize</span><span class="p">);</span>
    <span class="c1">// Missing cleanup!</span>
  <span class="p">},</span> <span class="p">[]);</span>
  
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Content</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>

<span class="c1">// ✅ GOOD: Proper cleanup</span>
<span class="kd">const</span> <span class="nx">MyComponent</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">handleResize</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Handle resize</span>
    <span class="p">};</span>
    
    <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">resize</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleResize</span><span class="p">);</span>
    
    <span class="c1">// Cleanup function</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">resize</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleResize</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>
  
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Content</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h2 id="memory-leak-prevention-strategies">Memory Leak Prevention Strategies</h2>

<h3 id="1-event-listener-management">1. Event Listener Management</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppState</span><span class="p">,</span> <span class="nx">Dimensions</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">EventListenerExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">appStateRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="nx">AppState</span><span class="p">.</span><span class="nx">currentState</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">dimensionsRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="nx">Dimensions</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">window</span><span class="dl">'</span><span class="p">));</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// App State listener</span>
    <span class="kd">const</span> <span class="nx">handleAppStateChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">nextAppState</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">appStateRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/inactive|background/</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">nextAppState</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">active</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">App has come to the foreground!</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">appStateRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">nextAppState</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">appStateSubscription</span> <span class="o">=</span> <span class="nx">AppState</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleAppStateChange</span><span class="p">);</span>

    <span class="c1">// Dimensions listener</span>
    <span class="kd">const</span> <span class="nx">handleDimensionChange</span> <span class="o">=</span> <span class="p">({</span> <span class="nb">window</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">dimensionsRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nb">window</span><span class="p">;</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Screen dimensions changed:</span><span class="dl">'</span><span class="p">,</span> <span class="nb">window</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">dimensionsSubscription</span> <span class="o">=</span> <span class="nx">Dimensions</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleDimensionChange</span><span class="p">);</span>

    <span class="c1">// Cleanup</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">appStateSubscription</span><span class="p">?.</span><span class="nx">remove</span><span class="p">();</span>
      <span class="nx">dimensionsSubscription</span><span class="p">?.</span><span class="nx">remove</span><span class="p">();</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Event</span> <span class="nx">Listener</span> <span class="nx">Example</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h3 id="2-timer-management">2. Timer Management</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">TimerExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">intervalRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">timeoutRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Set up interval</span>
    <span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Interval tick</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>

    <span class="c1">// Set up timeout</span>
    <span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Timeout completed</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>

    <span class="c1">// Cleanup</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Timer</span> <span class="nx">Example</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h3 id="3-subscription-management">3. Subscription Management</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">NetInfo</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@react-native-netinfo/netinfo</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">SubscriptionExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">netInfoSubscriptionRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Subscribe to network state changes</span>
    <span class="nx">netInfoSubscriptionRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">NetInfo</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">state</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Connection type:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">state</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Is connected:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">state</span><span class="p">.</span><span class="nx">isConnected</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="c1">// Cleanup</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">netInfoSubscriptionRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">netInfoSubscriptionRef</span><span class="p">.</span><span class="nx">current</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Subscription</span> <span class="nx">Example</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h3 id="4-image-memory-management">4. Image Memory Management</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Image</span><span class="p">,</span> <span class="nx">View</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ImageMemoryExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">images</span><span class="p">,</span> <span class="nx">setImages</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Load images</span>
    <span class="kd">const</span> <span class="nx">imageUrls</span> <span class="o">=</span> <span class="p">[</span>
      <span class="dl">'</span><span class="s1">https://example.com/image1.jpg</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">https://example.com/image2.jpg</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">https://example.com/image3.jpg</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">];</span>

    <span class="nx">setImages</span><span class="p">(</span><span class="nx">imageUrls</span><span class="p">);</span>

    <span class="c1">// Cleanup: Clear images when component unmounts</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">setImages</span><span class="p">([]);</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">images</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">url</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">Image</span>
          <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span>
          <span class="nx">source</span><span class="o">=</span><span class="p">{{}}</span>
          <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span>
          <span class="c1">// Optimize memory usage</span>
          <span class="nx">resizeMode</span><span class="o">=</span><span class="dl">"</span><span class="s2">cover</span><span class="dl">"</span>
          <span class="c1">// Clear cache if needed</span>
          <span class="nx">onLoad</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Image </span><span class="p">${</span><span class="nx">index</span><span class="p">}</span><span class="s2"> loaded`</span><span class="p">)}</span>
        <span class="sr">/</span><span class="err">&gt;
</span>      <span class="p">))}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="advanced-memory-management-techniques">Advanced Memory Management Techniques</h2>

<h3 id="1-weak-references">1. Weak References</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">WeakReferenceExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">dataRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="k">new</span> <span class="nb">Map</span><span class="p">());</span>
  <span class="kd">const</span> <span class="nx">weakDataRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="k">new</span> <span class="nb">WeakMap</span><span class="p">());</span>

  <span class="kd">const</span> <span class="nx">addData</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Regular Map - holds strong references</span>
    <span class="nx">dataRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
    
    <span class="c1">// WeakMap - holds weak references (better for memory)</span>
    <span class="nx">weakDataRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="p">{</span> <span class="na">timestamp</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="p">});</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">clearData</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Clear regular Map</span>
    <span class="nx">dataRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
    
    <span class="c1">// WeakMap will automatically clean up when objects are garbage collected</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">clearData</span><span class="p">();</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">clearData</span><span class="p">]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Weak</span> <span class="nx">Reference</span> <span class="nx">Example</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h3 id="2-memory-efficient-data-structures">2. Memory-Efficient Data Structures</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useMemo</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">EfficientDataExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">items</span><span class="p">,</span> <span class="nx">setItems</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>

  <span class="c1">// Memoize expensive calculations</span>
  <span class="kd">const</span> <span class="nx">processedItems</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">items</span>
      <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">({</span>
        <span class="p">...</span><span class="nx">item</span><span class="p">,</span>
        <span class="na">processed</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="na">timestamp</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span>
      <span class="p">}));</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">items</span><span class="p">]);</span>

  <span class="c1">// Use callback to prevent unnecessary re-renders</span>
  <span class="kd">const</span> <span class="nx">handleItemPress</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">itemId</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setItems</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> 
      <span class="nx">item</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">itemId</span> 
        <span class="p">?</span> <span class="p">{</span> <span class="p">...</span><span class="nx">item</span><span class="p">,</span> <span class="na">active</span><span class="p">:</span> <span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">active</span> <span class="p">}</span>
        <span class="p">:</span> <span class="nx">item</span>
    <span class="p">));</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">processedItems</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span>
          <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">handleItemPress</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">)}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>      <span class="p">))}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="3-lazy-loading-and-virtualization">3. Lazy Loading and Virtualization</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useMemo</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FlatList</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">LazyLoadingExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">data</span><span class="p">,</span> <span class="nx">setData</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>

  <span class="c1">// Only render visible items</span>
  <span class="kd">const</span> <span class="nx">renderItem</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(({</span> <span class="nx">item</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">),</span> <span class="p">[]);</span>

  <span class="c1">// Optimize memory with getItemLayout</span>
  <span class="kd">const</span> <span class="nx">getItemLayout</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">data</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">length</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="na">offset</span><span class="p">:</span> <span class="mi">100</span> <span class="o">*</span> <span class="nx">index</span><span class="p">,</span>
    <span class="nx">index</span><span class="p">,</span>
  <span class="p">}),</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">FlatList</span>
      <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span>
      <span class="nx">renderItem</span><span class="o">=</span><span class="p">{</span><span class="nx">renderItem</span><span class="p">}</span>
      <span class="nx">getItemLayout</span><span class="o">=</span><span class="p">{</span><span class="nx">getItemLayout</span><span class="p">}</span>
      <span class="c1">// Memory optimization props</span>
      <span class="nx">removeClippedSubviews</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
      <span class="nx">maxToRenderPerBatch</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">windowSize</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">initialNumToRender</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">updateCellsBatchingPeriod</span><span class="o">=</span><span class="p">{</span><span class="mi">50</span><span class="p">}</span>
    <span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="memory-monitoring-and-debugging">Memory Monitoring and Debugging</h2>

<h3 id="1-memory-usage-monitoring">1. Memory Usage Monitoring</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MemoryMonitor</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">memoryInfo</span><span class="p">,</span> <span class="nx">setMemoryInfo</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">monitorMemory</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">performance</span> <span class="o">&amp;&amp;</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">memory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">;</span>
        <span class="nx">setMemoryInfo</span><span class="p">({</span>
          <span class="na">used</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">),</span>
          <span class="na">total</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">totalJSHeapSize</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">),</span>
          <span class="na">limit</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">jsHeapSizeLimit</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">),</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">monitorMemory</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="nx">monitorMemory</span><span class="p">();</span> <span class="c1">// Initial check</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="na">Usage</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="p">{</span><span class="nx">memoryInfo</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Used</span><span class="p">:</span> <span class="p">{</span><span class="nx">memoryInfo</span><span class="p">.</span><span class="nx">used</span><span class="p">}</span> <span class="nx">MB</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Total</span><span class="p">:</span> <span class="p">{</span><span class="nx">memoryInfo</span><span class="p">.</span><span class="nx">total</span><span class="p">}</span> <span class="nx">MB</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Limit</span><span class="p">:</span> <span class="p">{</span><span class="nx">memoryInfo</span><span class="p">.</span><span class="nx">limit</span><span class="p">}</span> <span class="nx">MB</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;
</span>      <span class="p">)}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="2-memory-leak-detection">2. Memory Leak Detection</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MemoryLeakDetector</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">componentRefs</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="k">new</span> <span class="nb">Set</span><span class="p">());</span>
  <span class="kd">const</span> <span class="nx">timerRefs</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="k">new</span> <span class="nb">Set</span><span class="p">());</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Track component references</span>
    <span class="kd">const</span> <span class="nx">trackRef</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ref</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">componentRefs</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">ref</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="c1">// Track timers</span>
    <span class="kd">const</span> <span class="nx">trackTimer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">timer</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">timerRefs</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="c1">// Cleanup tracking</span>
    <span class="kd">const</span> <span class="nx">cleanup</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">componentRefs</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
      <span class="nx">timerRefs</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">timer</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">timer</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
      <span class="nx">timerRefs</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
    <span class="p">};</span>

    <span class="c1">// Expose cleanup for debugging</span>
    <span class="nb">global</span><span class="p">.</span><span class="nx">__cleanupMemoryLeaks</span> <span class="o">=</span> <span class="nx">cleanup</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">cleanup</span><span class="p">;</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="nx">Leak</span> <span class="nx">Detector</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h2 id="best-practices">Best Practices</h2>

<h3 id="1-component-lifecycle-management">1. Component Lifecycle Management</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">LifecycleExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">isMountedRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">abortControllerRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Set up abort controller for fetch requests</span>
    <span class="nx">abortControllerRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AbortController</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">isMountedRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">abortControllerRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">abortControllerRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">fetchData</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/data</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">signal</span><span class="p">:</span> <span class="nx">abortControllerRef</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">signal</span>
      <span class="p">});</span>
      
      <span class="k">if</span> <span class="p">(</span><span class="nx">isMountedRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
        <span class="c1">// Process data</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">name</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">AbortError</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">isMountedRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Fetch error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Lifecycle</span> <span class="nx">Example</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h3 id="2-memory-efficient-state-management">2. Memory-Efficient State Management</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useReducer</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">initialState</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">items</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">error</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">reducer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">SET_LOADING</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="nx">state</span><span class="p">,</span> <span class="na">loading</span><span class="p">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span> <span class="p">};</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">SET_ITEMS</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="nx">state</span><span class="p">,</span> <span class="na">items</span><span class="p">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">,</span> <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span> <span class="p">};</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">CLEAR_ITEMS</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="nx">state</span><span class="p">,</span> <span class="na">items</span><span class="p">:</span> <span class="p">[]</span> <span class="p">};</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">SET_ERROR</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="nx">state</span><span class="p">,</span> <span class="na">error</span><span class="p">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">,</span> <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span> <span class="p">};</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">state</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">StateManagementExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">state</span><span class="p">,</span> <span class="nx">dispatch</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useReducer</span><span class="p">(</span><span class="nx">reducer</span><span class="p">,</span> <span class="nx">initialState</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">clearItems</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">CLEAR_ITEMS</span><span class="dl">'</span> <span class="p">});</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">loadItems</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SET_LOADING</span><span class="dl">'</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchItems</span><span class="p">();</span>
      <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SET_ITEMS</span><span class="dl">'</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">items</span> <span class="p">});</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SET_ERROR</span><span class="dl">'</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span> <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">State</span> <span class="nx">Management</span> <span class="nx">Example</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h2 id="memory-leak-testing">Memory Leak Testing</h2>

<h3 id="1-automated-memory-testing">1. Automated Memory Testing</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">render</span><span class="p">,</span> <span class="nx">cleanup</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@testing-library/react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">Memory Leak Tests</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">afterEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">cleanup</span><span class="p">();</span>
    <span class="c1">// Force garbage collection if available</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should not leak memory on component unmount</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">unmount</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">MyComponent</span> <span class="o">/&gt;</span><span class="p">);</span>
    
    <span class="c1">// Simulate component lifecycle</span>
    <span class="nx">unmount</span><span class="p">();</span>
    
    <span class="c1">// Check for memory leaks</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span><span class="p">).</span><span class="nx">toBeLessThan</span><span class="p">(</span>
      <span class="nx">initialMemoryUsage</span>
    <span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should clean up event listeners</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">addEventListenerSpy</span> <span class="o">=</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">spyOn</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="dl">'</span><span class="s1">addEventListener</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">removeEventListenerSpy</span> <span class="o">=</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">spyOn</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="dl">'</span><span class="s1">removeEventListener</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">unmount</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">EventListenerComponent</span> <span class="o">/&gt;</span><span class="p">);</span>
    <span class="nx">unmount</span><span class="p">();</span>
    
    <span class="nx">expect</span><span class="p">(</span><span class="nx">removeEventListenerSpy</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="summary">Summary</h2>

<p>Memory leak prevention in React Native requires:</p>

<ol>
  <li><strong>Proper cleanup</strong> of event listeners, timers, and subscriptions</li>
  <li><strong>Efficient data structures</strong> and state management</li>
  <li><strong>Lazy loading</strong> and virtualization for large datasets</li>
  <li><strong>Memory monitoring</strong> and debugging tools</li>
  <li><strong>Testing</strong> for memory leaks in development</li>
</ol>

<p>By following these practices, you can build React Native applications that maintain optimal memory usage and provide a smooth user experience.</p>

<h2 id="key-takeaways">Key Takeaways</h2>

<ul>
  <li>Always provide cleanup functions in useEffect hooks</li>
  <li>Use WeakMap and WeakSet for automatic garbage collection</li>
  <li>Implement proper component lifecycle management</li>
  <li>Monitor memory usage in development and production</li>
  <li>Test for memory leaks as part of your testing strategy</li>
  <li>Use memory-efficient rendering techniques like FlatList virtualization</li>
</ul>


        </main>
        
        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ecf0f1; color: #666; text-align: center;">
            <p>Interview Prep Documentation - Built with Jekyll</p>
        </footer>
    </div>
</body>
</html>
