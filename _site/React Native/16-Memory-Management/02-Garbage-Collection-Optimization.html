<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garbage Collection Optimization in React Native - Interview Prep Documentation</title>
    <meta name="description" content="Comprehensive guides for JavaScript, TypeScript, and React Native interview preparation">
    
    <!-- GitHub Pages compatible styling -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
        }
        
        .container {
            max-width: 100%;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 2em;
            margin-bottom: 1em;
        }
        
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 5px;
        }
        
        code {
            background-color: #f8f9fa;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
        }
        
        blockquote {
            border-left: 4px solid #3498db;
            margin: 0;
            padding-left: 20px;
            color: #666;
            font-style: italic;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .navigation {
            background-color: #2c3e50;
            color: white;
            padding: 10px 0;
            margin-bottom: 20px;
        }
        
        .navigation a {
            color: white;
            text-decoration: none;
            margin-right: 20px;
        }
        
        .navigation a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb {
            margin-bottom: 20px;
            color: #666;
        }
        
        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="navigation">
            <a href="/">Home</a>
            <a href="/Javascript/">JavaScript</a>
            <a href="/TypeScript/">TypeScript</a>
            <a href="/React-Native/">React Native</a>
        </nav>
        
        
        
        <main>
            <h1 id="garbage-collection-optimization-in-react-native">Garbage Collection Optimization in React Native</h1>

<h2 id="overview">Overview</h2>

<p>Garbage Collection (GC) is the automatic memory management process that frees up memory by removing objects that are no longer referenced. Understanding and optimizing garbage collection is crucial for maintaining smooth performance in React Native applications.</p>

<h2 id="understanding-garbage-collection">Understanding Garbage Collection</h2>

<h3 id="how-garbage-collection-works">How Garbage Collection Works</h3>

<pre><code class="language-mermaid">graph TD
    A[Object Created] --&gt; B[Object Referenced]
    B --&gt; C{Object Still Referenced?}
    C --&gt;|Yes| D[Keep in Memory]
    C --&gt;|No| E[Mark for Collection]
    E --&gt; F[Garbage Collection Cycle]
    F --&gt; G[Memory Freed]
    D --&gt; H[Continue Using]
    G --&gt; I[Memory Available]
</code></pre>

<h3 id="types-of-garbage-collection">Types of Garbage Collection</h3>

<ol>
  <li><strong>Mark and Sweep</strong>: Marks unreachable objects and sweeps them away</li>
  <li><strong>Generational GC</strong>: Separates objects by age (young/old generation)</li>
  <li><strong>Incremental GC</strong>: Breaks GC work into smaller chunks</li>
  <li><strong>Concurrent GC</strong>: Runs GC alongside application code</li>
</ol>

<h2 id="gc-optimization-strategies">GC Optimization Strategies</h2>

<h3 id="1-object-pooling">1. Object Pooling</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// Object pool for frequently created/destroyed objects</span>
<span class="kd">class</span> <span class="nx">ObjectPool</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">createFn</span><span class="p">,</span> <span class="nx">resetFn</span><span class="p">,</span> <span class="nx">initialSize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">createFn</span> <span class="o">=</span> <span class="nx">createFn</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">resetFn</span> <span class="o">=</span> <span class="nx">resetFn</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pool</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Set</span><span class="p">();</span>
    
    <span class="c1">// Pre-populate pool</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">initialSize</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">createFn</span><span class="p">());</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">acquire</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">obj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createFn</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">release</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">obj</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">resetFn</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">clear</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage example</span>
<span class="kd">const</span> <span class="nx">useObjectPool</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">poolRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">poolRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ObjectPool</span><span class="p">(</span>
      <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="na">timestamp</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}),</span> <span class="c1">// createFn</span>
      <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="c1">// resetFn</span>
        <span class="nx">obj</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">obj</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="nx">obj</span><span class="p">.</span><span class="nx">timestamp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">);</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">poolRef</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">clear</span><span class="p">();</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">getObject</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">poolRef</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">acquire</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">releaseObject</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">obj</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">poolRef</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">release</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">{</span> <span class="nx">getObject</span><span class="p">,</span> <span class="nx">releaseObject</span> <span class="p">};</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="2-efficient-data-structures">2. Efficient Data Structures</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useMemo</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">EfficientDataStructures</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">items</span><span class="p">,</span> <span class="nx">setItems</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>

  <span class="c1">// Use Map for O(1) lookups instead of Array.find()</span>
  <span class="kd">const</span> <span class="nx">itemsMap</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
    <span class="nx">items</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">map</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">map</span><span class="p">;</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">items</span><span class="p">]);</span>

  <span class="c1">// Use Set for unique values</span>
  <span class="kd">const</span> <span class="nx">uniqueCategories</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Set</span><span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">category</span><span class="p">));</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">items</span><span class="p">]);</span>

  <span class="c1">// Efficient filtering with pre-computed values</span>
  <span class="kd">const</span> <span class="nx">filteredItems</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">items</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">active</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">items</span><span class="p">]);</span>

  <span class="kd">const</span> <span class="nx">getItemById</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">itemsMap</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">itemsMap</span><span class="p">]);</span>

  <span class="kd">const</span> <span class="nx">hasCategory</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">category</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">uniqueCategories</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">category</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">uniqueCategories</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Efficient</span> <span class="nx">Data</span> <span class="nx">Structures</span> <span class="nx">Example</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="3-memory-efficient-rendering">3. Memory-Efficient Rendering</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">memo</span><span class="p">,</span> <span class="nx">useMemo</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FlatList</span><span class="p">,</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// Memoized list item to prevent unnecessary re-renders</span>
<span class="kd">const</span> <span class="nx">ListItem</span> <span class="o">=</span> <span class="nx">memo</span><span class="p">(({</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">onPress</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">handlePress</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">onPress</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">onPress</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handlePress</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{</span><span class="err">#</span><span class="mi">123</span><span class="p">;{{</span><span class="err">#</span><span class="mi">123</span><span class="p">;</span> <span class="nl">padding</span><span class="p">:</span> <span class="mi">10</span> <span class="p">}}</span><span class="err">#</span><span class="mi">125</span><span class="p">;}}</span><span class="err">#</span><span class="mi">125</span><span class="p">;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">description</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">OptimizedList</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">data</span><span class="p">,</span> <span class="nx">setData</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>

  <span class="c1">// Memoize the render function</span>
  <span class="kd">const</span> <span class="nx">renderItem</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(({</span> <span class="nx">item</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">ListItem</span> <span class="nx">item</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">}</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleItemPress</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">),</span> <span class="p">[]);</span>

  <span class="c1">// Memoize the key extractor</span>
  <span class="kd">const</span> <span class="nx">keyExtractor</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="p">[]);</span>

  <span class="c1">// Memoize the item layout for better performance</span>
  <span class="kd">const</span> <span class="nx">getItemLayout</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">data</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">length</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
    <span class="na">offset</span><span class="p">:</span> <span class="mi">80</span> <span class="o">*</span> <span class="nx">index</span><span class="p">,</span>
    <span class="nx">index</span><span class="p">,</span>
  <span class="p">}),</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">handleItemPress</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setData</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> 
      <span class="nx">item</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span> 
        <span class="p">?</span> <span class="p">{</span> <span class="p">...</span><span class="nx">item</span><span class="p">,</span> <span class="na">selected</span><span class="p">:</span> <span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">selected</span> <span class="p">}</span>
        <span class="p">:</span> <span class="nx">item</span>
    <span class="p">));</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">FlatList</span>
      <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span>
      <span class="nx">renderItem</span><span class="o">=</span><span class="p">{</span><span class="nx">renderItem</span><span class="p">}</span>
      <span class="nx">keyExtractor</span><span class="o">=</span><span class="p">{</span><span class="nx">keyExtractor</span><span class="p">}</span>
      <span class="nx">getItemLayout</span><span class="o">=</span><span class="p">{</span><span class="nx">getItemLayout</span><span class="p">}</span>
      <span class="c1">// GC optimization props</span>
      <span class="nx">removeClippedSubviews</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
      <span class="nx">maxToRenderPerBatch</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">windowSize</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">initialNumToRender</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">updateCellsBatchingPeriod</span><span class="o">=</span><span class="p">{</span><span class="mi">50</span><span class="p">}</span>
    <span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="4-lazy-initialization">4. Lazy Initialization</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">LazyInitialization</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">expensiveObjectRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">cacheRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="k">new</span> <span class="nb">Map</span><span class="p">());</span>

  <span class="c1">// Lazy initialization of expensive objects</span>
  <span class="kd">const</span> <span class="nx">getExpensiveObject</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">expensiveObjectRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">expensiveObjectRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">createExpensiveObject</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">expensiveObjectRef</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="c1">// Lazy cache with size limit</span>
  <span class="kd">const</span> <span class="nx">getCachedData</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">key</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">cacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">cacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">computeExpensiveData</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
    
    <span class="c1">// Limit cache size to prevent memory bloat</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">cacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">size</span> <span class="o">&gt;=</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">firstKey</span> <span class="o">=</span> <span class="nx">cacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">keys</span><span class="p">().</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span><span class="p">;</span>
      <span class="nx">cacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">firstKey</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="nx">cacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Cleanup on unmount</span>
      <span class="nx">expensiveObjectRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="nx">cacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Lazy</span> <span class="nx">Initialization</span> <span class="nx">Example</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h2 id="advanced-gc-optimization-techniques">Advanced GC Optimization Techniques</h2>

<h3 id="1-weak-references">1. Weak References</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">WeakReferenceExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">weakMapRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="k">new</span> <span class="nb">WeakMap</span><span class="p">());</span>
  <span class="kd">const</span> <span class="nx">weakSetRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="k">new</span> <span class="nb">WeakSet</span><span class="p">());</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Create objects that will be garbage collected</span>
    <span class="kd">const</span> <span class="nx">createObjects</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="dl">'</span><span class="s1">test1</span><span class="dl">'</span> <span class="p">};</span>
      <span class="kd">const</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="dl">'</span><span class="s1">test2</span><span class="dl">'</span> <span class="p">};</span>
      
      <span class="c1">// WeakMap - automatically cleaned up when key is GC'd</span>
      <span class="nx">weakMapRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">obj1</span><span class="p">,</span> <span class="p">{</span> <span class="na">timestamp</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="p">});</span>
      <span class="nx">weakSetRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">obj2</span><span class="p">);</span>
      
      <span class="c1">// Objects will be GC'd when they go out of scope</span>
      <span class="k">return</span> <span class="p">{</span> <span class="nx">obj1</span><span class="p">,</span> <span class="nx">obj2</span> <span class="p">};</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">objects</span> <span class="o">=</span> <span class="nx">createObjects</span><span class="p">();</span>
    
    <span class="c1">// Objects are still referenced, so not GC'd yet</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Objects created:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">objects</span><span class="p">);</span>
    
    <span class="c1">// When objects go out of scope, they'll be GC'd</span>
    <span class="c1">// and automatically removed from WeakMap/WeakSet</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Weak</span> <span class="nx">Reference</span> <span class="nx">Example</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h3 id="2-memory-pressure-handling">2. Memory Pressure Handling</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MemoryPressureHandler</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">memoryPressure</span><span class="p">,</span> <span class="nx">setMemoryPressure</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">'</span><span class="s1">normal</span><span class="dl">'</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">cacheRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="k">new</span> <span class="nb">Map</span><span class="p">());</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">handleAppStateChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">nextAppState</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">nextAppState</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">background</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Clear cache when app goes to background</span>
        <span class="nx">cacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
        <span class="nx">setMemoryPressure</span><span class="p">(</span><span class="dl">'</span><span class="s1">low</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">handleMemoryWarning</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// React to memory warnings</span>
      <span class="nx">setMemoryPressure</span><span class="p">(</span><span class="dl">'</span><span class="s1">high</span><span class="dl">'</span><span class="p">);</span>
      
      <span class="c1">// Clear non-essential data</span>
      <span class="nx">cacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
      
      <span class="c1">// Force garbage collection if available</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">subscription</span> <span class="o">=</span> <span class="nx">AppState</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleAppStateChange</span><span class="p">);</span>
    
    <span class="c1">// Listen for memory warnings (iOS)</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">DeviceEventEmitter</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">global</span><span class="p">.</span><span class="nx">DeviceEventEmitter</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">memoryWarning</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleMemoryWarning</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">subscription</span><span class="p">?.</span><span class="nx">remove</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">DeviceEventEmitter</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">global</span><span class="p">.</span><span class="nx">DeviceEventEmitter</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">memoryWarning</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleMemoryWarning</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="na">Pressure</span><span class="p">:</span> <span class="p">{</span><span class="nx">memoryPressure</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="3-efficient-image-management">3. Efficient Image Management</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Image</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ImageManager</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">imageCacheRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="k">new</span> <span class="nb">Map</span><span class="p">());</span>
  <span class="kd">const</span> <span class="nx">maxCacheSize</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">loadImage</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">uri</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">imageCacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">uri</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">imageCacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">uri</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">const</span> <span class="nx">imagePromise</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">img</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span>
      <span class="nx">img</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">img</span><span class="p">);</span>
      <span class="nx">img</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="nx">reject</span><span class="p">;</span>
      <span class="nx">img</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">uri</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="c1">// Limit cache size</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">imageCacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">size</span> <span class="o">&gt;=</span> <span class="nx">maxCacheSize</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">firstKey</span> <span class="o">=</span> <span class="nx">imageCacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">keys</span><span class="p">().</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span><span class="p">;</span>
      <span class="nx">imageCacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">firstKey</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">imageCacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">imagePromise</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">imagePromise</span><span class="p">;</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">clearImageCache</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">imageCacheRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">clearImageCache</span><span class="p">();</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">clearImageCache</span><span class="p">]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Image</span> <span class="nx">Manager</span> <span class="nx">Example</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h2 id="gc-monitoring-and-profiling">GC Monitoring and Profiling</h2>

<h3 id="1-memory-usage-tracking">1. Memory Usage Tracking</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MemoryTracker</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">memoryStats</span><span class="p">,</span> <span class="nx">setMemoryStats</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">trackMemory</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">performance</span> <span class="o">&amp;&amp;</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">memory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">;</span>
        <span class="nx">setMemoryStats</span><span class="p">({</span>
          <span class="na">used</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">),</span>
          <span class="na">total</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">totalJSHeapSize</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">),</span>
          <span class="na">limit</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">jsHeapSizeLimit</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">),</span>
          <span class="na">percentage</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span> <span class="o">/</span> <span class="nx">memory</span><span class="p">.</span><span class="nx">jsHeapSizeLimit</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">trackMemory</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="nx">trackMemory</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{</span><span class="err">#</span><span class="mi">123</span><span class="p">;{{</span><span class="err">#</span><span class="mi">123</span><span class="p">;</span> <span class="nl">padding</span><span class="p">:</span> <span class="mi">20</span> <span class="p">}}</span><span class="err">#</span><span class="mi">125</span><span class="p">;}}</span><span class="err">#</span><span class="mi">125</span><span class="p">;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="na">Usage</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="p">{</span><span class="nx">memoryStats</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Used</span><span class="p">:</span> <span class="p">{</span><span class="nx">memoryStats</span><span class="p">.</span><span class="nx">used</span><span class="p">}</span> <span class="nx">MB</span> <span class="p">({</span><span class="nx">memoryStats</span><span class="p">.</span><span class="nx">percentage</span><span class="p">}</span><span class="o">%</span><span class="p">)</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Total</span><span class="p">:</span> <span class="p">{</span><span class="nx">memoryStats</span><span class="p">.</span><span class="nx">total</span><span class="p">}</span> <span class="nx">MB</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Limit</span><span class="p">:</span> <span class="p">{</span><span class="nx">memoryStats</span><span class="p">.</span><span class="nx">limit</span><span class="p">}</span> <span class="nx">MB</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;
</span>      <span class="p">)}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="2-gc-performance-monitoring">2. GC Performance Monitoring</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">GCPerformanceMonitor</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">gcTimesRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="nx">lastGCTimeRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">monitorGC</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">performance</span> <span class="o">&amp;&amp;</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">currentTime</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
        <span class="kd">const</span> <span class="nx">memory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">;</span>
        
        <span class="c1">// Detect GC by checking if used memory decreased</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span> <span class="o">&lt;</span> <span class="nx">lastGCTimeRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">gcTime</span> <span class="o">=</span> <span class="nx">currentTime</span> <span class="o">-</span> <span class="nx">lastGCTimeRef</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
          <span class="nx">gcTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">gcTime</span><span class="p">);</span>
          
          <span class="c1">// Keep only last 100 GC times</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">gcTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">gcTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
          <span class="p">}</span>
          
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">GC detected, time:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">gcTime</span><span class="p">,</span> <span class="dl">'</span><span class="s1">ms</span><span class="dl">'</span><span class="p">);</span>
        <span class="p">}</span>
        
        <span class="nx">lastGCTimeRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">monitorGC</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
    
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">getGCAverageTime</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">gcTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">sum</span> <span class="o">=</span> <span class="nx">gcTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">sum</span> <span class="o">/</span> <span class="nx">gcTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">GC</span> <span class="nx">Average</span> <span class="na">Time</span><span class="p">:</span> <span class="p">{</span><span class="nx">getGCAverageTime</span><span class="p">()}</span><span class="nx">ms</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">GC</span> <span class="na">Count</span><span class="p">:</span> <span class="p">{</span><span class="nx">gcTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="best-practices-for-gc-optimization">Best Practices for GC Optimization</h2>

<h3 id="1-minimize-object-creation">1. Minimize Object Creation</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useMemo</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MinimizeObjectCreation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">items</span><span class="p">,</span> <span class="nx">setItems</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>

  <span class="c1">//  BAD: Creates new object on every render</span>
  <span class="kd">const</span> <span class="nx">badStyle</span> <span class="o">=</span> <span class="p">{</span> <span class="na">padding</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">margin</span><span class="p">:</span> <span class="mi">5</span> <span class="p">};</span>

  <span class="c1">//  GOOD: Memoize static objects</span>
  <span class="kd">const</span> <span class="nx">goodStyle</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">padding</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">margin</span><span class="p">:</span> <span class="mi">5</span> <span class="p">}),</span> <span class="p">[]);</span>

  <span class="c1">//  BAD: Creates new function on every render</span>
  <span class="kd">const</span> <span class="nx">badHandler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setItems</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">id</span><span class="p">));</span>
  <span class="p">};</span>

  <span class="c1">//  GOOD: Memoize functions</span>
  <span class="kd">const</span> <span class="nx">goodHandler</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setItems</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">id</span><span class="p">));</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">goodStyle</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">goodHandler</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">)}</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>      <span class="p">))}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="2-efficient-state-updates">2. Efficient State Updates</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useReducer</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">initialState</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">items</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">error</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">reducer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">ADD_ITEM</span><span class="dl">'</span><span class="p">:</span>
      <span class="c1">//  GOOD: Immutable update</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">items</span><span class="p">:</span> <span class="p">[...</span><span class="nx">state</span><span class="p">.</span><span class="nx">items</span><span class="p">,</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">]</span>
      <span class="p">};</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">UPDATE_ITEM</span><span class="dl">'</span><span class="p">:</span>
      <span class="c1">//  GOOD: Efficient update with map</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">items</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span>
          <span class="nx">item</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">id</span>
            <span class="p">?</span> <span class="p">{</span> <span class="p">...</span><span class="nx">item</span><span class="p">,</span> <span class="p">...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span> <span class="p">}</span>
            <span class="p">:</span> <span class="nx">item</span>
        <span class="p">)</span>
      <span class="p">};</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">REMOVE_ITEM</span><span class="dl">'</span><span class="p">:</span>
      <span class="c1">//  GOOD: Efficient removal with filter</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">items</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">)</span>
      <span class="p">};</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">state</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">EfficientStateUpdates</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">state</span><span class="p">,</span> <span class="nx">dispatch</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useReducer</span><span class="p">(</span><span class="nx">reducer</span><span class="p">,</span> <span class="nx">initialState</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">addItem</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ADD_ITEM</span><span class="dl">'</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">item</span> <span class="p">});</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">updateItem</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">id</span><span class="p">,</span> <span class="nx">updates</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">UPDATE_ITEM</span><span class="dl">'</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="p">{</span> <span class="nx">id</span><span class="p">,</span> <span class="p">...</span><span class="nx">updates</span> <span class="p">}</span> <span class="p">});</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">removeItem</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">REMOVE_ITEM</span><span class="dl">'</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">id</span> <span class="p">});</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Efficient</span> <span class="nx">State</span> <span class="nx">Updates</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h2 id="testing-gc-performance">Testing GC Performance</h2>

<h3 id="1-memory-leak-testing">1. Memory Leak Testing</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">render</span><span class="p">,</span> <span class="nx">cleanup</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@testing-library/react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">GC Performance Tests</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">initialMemory</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">initialMemory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">?.</span><span class="nx">memory</span><span class="p">?.</span><span class="nx">usedJSHeapSize</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">afterEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">cleanup</span><span class="p">();</span>
    <span class="c1">// Force GC if available</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should not leak memory after component unmount</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">unmount</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">MyComponent</span> <span class="o">/&gt;</span><span class="p">);</span>
    
    <span class="c1">// Simulate user interactions</span>
    <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">press</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Button</span><span class="dl">'</span><span class="p">));</span>
    
    <span class="nx">unmount</span><span class="p">();</span>
    
    <span class="c1">// Wait for GC</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">finalMemory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">?.</span><span class="nx">memory</span><span class="p">?.</span><span class="nx">usedJSHeapSize</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">finalMemory</span><span class="p">).</span><span class="nx">toBeLessThanOrEqual</span><span class="p">(</span><span class="nx">initialMemory</span> <span class="o">+</span> <span class="mi">1000000</span><span class="p">);</span> <span class="c1">// 1MB tolerance</span>
    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should efficiently handle large datasets</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">largeDataset</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="mi">10000</span> <span class="p">},</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
      <span class="na">id</span><span class="p">:</span> <span class="nx">i</span><span class="p">,</span>
      <span class="na">name</span><span class="p">:</span> <span class="s2">`Item </span><span class="p">${</span><span class="nx">i</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
      <span class="na">data</span><span class="p">:</span> <span class="s2">`Data </span><span class="p">${</span><span class="nx">i</span><span class="p">}</span><span class="s2">`</span>
    <span class="p">}));</span>

    <span class="kd">const</span> <span class="p">{</span> <span class="nx">unmount</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">LargeList</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">largeDataset</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>    
    <span class="c1">// Test scrolling performance</span>
    <span class="kd">const</span> <span class="nx">list</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">getByTestId</span><span class="p">(</span><span class="dl">'</span><span class="s1">large-list</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">scroll</span><span class="p">(</span><span class="nx">list</span><span class="p">,</span> <span class="p">{</span> <span class="na">nativeEvent</span><span class="p">:</span> <span class="p">{</span> <span class="na">contentOffset</span><span class="p">:</span> <span class="p">{</span> <span class="na">y</span><span class="p">:</span> <span class="mi">1000</span> <span class="p">}</span> <span class="p">}</span> <span class="p">});</span>
    
    <span class="nx">unmount</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="summary">Summary</h2>

<p>Garbage Collection optimization in React Native involves:</p>

<ol>
  <li><strong>Object Pooling</strong> for frequently created/destroyed objects</li>
  <li><strong>Efficient Data Structures</strong> (Map, Set, WeakMap, WeakSet)</li>
  <li><strong>Memory-Efficient Rendering</strong> with memoization and virtualization</li>
  <li><strong>Lazy Initialization</strong> to defer expensive operations</li>
  <li><strong>Weak References</strong> for automatic cleanup</li>
  <li><strong>Memory Pressure Handling</strong> for low-memory situations</li>
  <li><strong>Monitoring and Profiling</strong> to track GC performance</li>
</ol>

<h2 id="key-takeaways">Key Takeaways</h2>

<ul>
  <li>Use object pooling for frequently created objects</li>
  <li>Prefer Map/Set over Array for lookups and unique values</li>
  <li>Memoize expensive calculations and static objects</li>
  <li>Use WeakMap/WeakSet for automatic garbage collection</li>
  <li>Monitor memory usage and GC performance</li>
  <li>Test for memory leaks in your test suite</li>
  <li>Handle memory pressure gracefully</li>
  <li>Minimize object creation in render cycles</li>
</ul>


        </main>
        
        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ecf0f1; color: #666; text-align: center;">
            <p>Interview Prep Documentation - Built with Jekyll</p>
        </footer>
    </div>
</body>
</html>
