<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Optimization Best Practices in React Native - Interview Prep Documentation</title>
    <meta name="description" content="Comprehensive guides for JavaScript, TypeScript, and React Native interview preparation">
    
    <!-- GitHub Pages compatible styling -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
        }
        
        .container {
            max-width: 100%;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 2em;
            margin-bottom: 1em;
        }
        
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 5px;
        }
        
        code {
            background-color: #f8f9fa;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
        }
        
        blockquote {
            border-left: 4px solid #3498db;
            margin: 0;
            padding-left: 20px;
            color: #666;
            font-style: italic;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .navigation {
            background-color: #2c3e50;
            color: white;
            padding: 10px 0;
            margin-bottom: 20px;
        }
        
        .navigation a {
            color: white;
            text-decoration: none;
            margin-right: 20px;
        }
        
        .navigation a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb {
            margin-bottom: 20px;
            color: #666;
        }
        
        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="navigation">
            <a href="/">Home</a>
            <a href="/Javascript/">JavaScript</a>
            <a href="/TypeScript/">TypeScript</a>
            <a href="/React-Native/">React Native</a>
        </nav>
        
        
        
        <main>
            <h1 id="memory-optimization-best-practices-in-react-native">Memory Optimization Best Practices in React Native</h1>

<h2 id="overview">Overview</h2>

<p>Memory optimization is crucial for building performant React Native applications. This guide covers comprehensive best practices for managing memory efficiently, preventing leaks, and ensuring smooth user experience across different devices and platforms.</p>

<h2 id="component-level-optimization">Component-Level Optimization</h2>

<h3 id="1-efficient-component-structure">1. Efficient Component Structure</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">memo</span><span class="p">,</span> <span class="nx">useMemo</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">TouchableOpacity</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// ✅ GOOD: Memoized component with optimized props</span>
<span class="kd">const</span> <span class="nx">OptimizedListItem</span> <span class="o">=</span> <span class="nx">memo</span><span class="p">(({</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">onPress</span><span class="p">,</span> <span class="nx">onLongPress</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">handlePress</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">onPress</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">onPress</span><span class="p">]);</span>

  <span class="kd">const</span> <span class="nx">handleLongPress</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">onLongPress</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">onLongPress</span><span class="p">]);</span>

  <span class="c1">// Memoize expensive calculations</span>
  <span class="kd">const</span> <span class="nx">displayText</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> - </span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">category</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">item</span><span class="p">.</span><span class="nx">category</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handlePress</span><span class="p">}</span> <span class="nx">onLongPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleLongPress</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">itemContainer</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">itemText</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">displayText</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">itemSubtext</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">item</span><span class="p">.</span><span class="nx">description</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">});</span>

<span class="c1">// ✅ GOOD: Optimized list container</span>
<span class="kd">const</span> <span class="nx">OptimizedList</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">onItemPress</span><span class="p">,</span> <span class="nx">onItemLongPress</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Memoize the render function</span>
  <span class="kd">const</span> <span class="nx">renderItem</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(({</span> <span class="nx">item</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">OptimizedListItem</span>
      <span class="nx">item</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">}</span>
      <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">onItemPress</span><span class="p">}</span>
      <span class="nx">onLongPress</span><span class="o">=</span><span class="p">{</span><span class="nx">onItemLongPress</span><span class="p">}</span>
    <span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">),</span> <span class="p">[</span><span class="nx">onItemPress</span><span class="p">,</span> <span class="nx">onItemLongPress</span><span class="p">]);</span>

  <span class="c1">// Memoize the key extractor</span>
  <span class="kd">const</span> <span class="nx">keyExtractor</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">FlatList</span>
      <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">items</span><span class="p">}</span>
      <span class="nx">renderItem</span><span class="o">=</span><span class="p">{</span><span class="nx">renderItem</span><span class="p">}</span>
      <span class="nx">keyExtractor</span><span class="o">=</span><span class="p">{</span><span class="nx">keyExtractor</span><span class="p">}</span>
      <span class="c1">// Memory optimization props</span>
      <span class="nx">removeClippedSubviews</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
      <span class="nx">maxToRenderPerBatch</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">windowSize</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">initialNumToRender</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">updateCellsBatchingPeriod</span><span class="o">=</span><span class="p">{</span><span class="mi">50</span><span class="p">}</span>
      <span class="nx">getItemLayout</span><span class="o">=</span><span class="p">{(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
        <span class="na">length</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
        <span class="na">offset</span><span class="p">:</span> <span class="mi">80</span> <span class="o">*</span> <span class="nx">index</span><span class="p">,</span>
        <span class="nx">index</span><span class="p">,</span>
      <span class="p">})}</span>
    <span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="2-state-management-optimization">2. State Management Optimization</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useReducer</span><span class="p">,</span> <span class="nx">useCallback</span><span class="p">,</span> <span class="nx">useMemo</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// ✅ GOOD: Efficient reducer with immutable updates</span>
<span class="kd">const</span> <span class="nx">listReducer</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">ADD_ITEM</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">items</span><span class="p">:</span> <span class="p">[...</span><span class="nx">state</span><span class="p">.</span><span class="nx">items</span><span class="p">,</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">],</span>
        <span class="na">count</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span>
      <span class="p">};</span>
    
    <span class="k">case</span> <span class="dl">'</span><span class="s1">UPDATE_ITEM</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">items</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span>
          <span class="nx">item</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">id</span>
            <span class="p">?</span> <span class="p">{</span> <span class="p">...</span><span class="nx">item</span><span class="p">,</span> <span class="p">...</span><span class="nx">action</span><span class="p">.</span><span class="nx">payload</span> <span class="p">}</span>
            <span class="p">:</span> <span class="nx">item</span>
        <span class="p">)</span>
      <span class="p">};</span>
    
    <span class="k">case</span> <span class="dl">'</span><span class="s1">REMOVE_ITEM</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">items</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">),</span>
        <span class="na">count</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">count</span> <span class="o">-</span> <span class="mi">1</span>
      <span class="p">};</span>
    
    <span class="k">case</span> <span class="dl">'</span><span class="s1">CLEAR_ITEMS</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">items</span><span class="p">:</span> <span class="p">[],</span>
        <span class="na">count</span><span class="p">:</span> <span class="mi">0</span>
      <span class="p">};</span>
    
    <span class="nl">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">state</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">OptimizedStateComponent</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">state</span><span class="p">,</span> <span class="nx">dispatch</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useReducer</span><span class="p">(</span><span class="nx">listReducer</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">items</span><span class="p">:</span> <span class="p">[],</span>
    <span class="na">count</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">loading</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">error</span><span class="p">:</span> <span class="kc">null</span>
  <span class="p">});</span>

  <span class="c1">// Memoize derived state</span>
  <span class="kd">const</span> <span class="nx">activeItems</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> 
    <span class="nx">state</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">active</span><span class="p">),</span> 
    <span class="p">[</span><span class="nx">state</span><span class="p">.</span><span class="nx">items</span><span class="p">]</span>
  <span class="p">);</span>

  <span class="kd">const</span> <span class="nx">itemCount</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> 
    <span class="nx">state</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> 
    <span class="p">[</span><span class="nx">state</span><span class="p">.</span><span class="nx">items</span><span class="p">]</span>
  <span class="p">);</span>

  <span class="c1">// Memoize action creators</span>
  <span class="kd">const</span> <span class="nx">addItem</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ADD_ITEM</span><span class="dl">'</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">item</span> <span class="p">});</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">updateItem</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">id</span><span class="p">,</span> <span class="nx">updates</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">UPDATE_ITEM</span><span class="dl">'</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="p">{</span> <span class="nx">id</span><span class="p">,</span> <span class="p">...</span><span class="nx">updates</span> <span class="p">}</span> <span class="p">});</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">removeItem</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">REMOVE_ITEM</span><span class="dl">'</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">id</span> <span class="p">});</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">clearItems</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">CLEAR_ITEMS</span><span class="dl">'</span> <span class="p">});</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Items</span><span class="p">:</span> <span class="p">{</span><span class="nx">itemCount</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Active</span><span class="p">:</span> <span class="p">{</span><span class="nx">activeItems</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="p">{</span><span class="cm">/* Render optimized list */</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="image-and-media-optimization">Image and Media Optimization</h2>

<h3 id="1-efficient-image-loading">1. Efficient Image Loading</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useCallback</span><span class="p">,</span> <span class="nx">useMemo</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Image</span><span class="p">,</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">OptimizedImage</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">style</span><span class="p">,</span> <span class="nx">placeholder</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">loaded</span><span class="p">,</span> <span class="nx">setLoaded</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">error</span><span class="p">,</span> <span class="nx">setError</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleLoad</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setLoaded</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="nx">setError</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">handleError</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setError</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="nx">setLoaded</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="c1">// Memoize image source to prevent unnecessary re-renders</span>
  <span class="kd">const</span> <span class="nx">imageSource</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">source</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span> <span class="na">uri</span><span class="p">:</span> <span class="nx">source</span> <span class="p">};</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">source</span><span class="p">;</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">source</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">style</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="o">!</span><span class="nx">loaded</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">error</span> <span class="o">&amp;&amp;</span> <span class="nx">placeholder</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{[</span><span class="nx">style</span><span class="p">,</span> <span class="nx">styles</span><span class="p">.</span><span class="nx">placeholder</span><span class="p">]}</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">placeholder</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>      <span class="p">)}</span>
      
      <span class="o">&lt;</span><span class="nx">Image</span>
        <span class="nx">source</span><span class="o">=</span><span class="p">{</span><span class="nx">imageSource</span><span class="p">}</span>
        <span class="nx">style</span><span class="o">=</span><span class="p">{[</span><span class="nx">style</span><span class="p">,</span> <span class="p">{</span> <span class="na">opacity</span><span class="p">:</span> <span class="nx">loaded</span> <span class="p">?</span> <span class="mi">1</span> <span class="p">:</span> <span class="mi">0</span> <span class="p">}]}</span>
        <span class="nx">onLoad</span><span class="o">=</span><span class="p">{</span><span class="nx">handleLoad</span><span class="p">}</span>
        <span class="nx">onError</span><span class="o">=</span><span class="p">{</span><span class="nx">handleError</span><span class="p">}</span>
        <span class="c1">// Memory optimization props</span>
        <span class="nx">resizeMode</span><span class="o">=</span><span class="dl">"</span><span class="s2">cover</span><span class="dl">"</span>
        <span class="nx">fadeDuration</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span>
        <span class="p">{...</span><span class="nx">props</span><span class="p">}</span>
      <span class="sr">/</span><span class="err">&gt;
</span>      
      <span class="p">{</span><span class="nx">error</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{[</span><span class="nx">style</span><span class="p">,</span> <span class="nx">styles</span><span class="p">.</span><span class="nx">errorContainer</span><span class="p">]}</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Failed</span> <span class="nx">to</span> <span class="nx">load</span> <span class="nx">image</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>      <span class="p">)}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="c1">// Image cache manager</span>
<span class="kd">class</span> <span class="nx">ImageCacheManager</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">maxSize</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">maxSize</span> <span class="o">=</span> <span class="nx">maxSize</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">get</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
      <span class="c1">// Move to end (LRU)</span>
      <span class="kd">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">size</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxSize</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Remove least recently used</span>
      <span class="kd">const</span> <span class="nx">firstKey</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">keys</span><span class="p">().</span><span class="nx">next</span><span class="p">().</span><span class="nx">value</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">firstKey</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">clear</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">imageCache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ImageCacheManager</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="2-lazy-loading-and-virtualization">2. Lazy Loading and Virtualization</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FlatList</span><span class="p">,</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">LazyLoadingList</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">renderItem</span><span class="p">,</span> <span class="nx">itemHeight</span> <span class="o">=</span> <span class="mi">80</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">visibleItems</span><span class="p">,</span> <span class="nx">setVisibleItems</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">loading</span><span class="p">,</span> <span class="nx">setLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">pageSize</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">currentPageRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">loadMoreItems</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">loading</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

    <span class="nx">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    
    <span class="c1">// Simulate API call</span>
    <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">500</span><span class="p">));</span>
    
    <span class="kd">const</span> <span class="nx">startIndex</span> <span class="o">=</span> <span class="nx">currentPageRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">*</span> <span class="nx">pageSize</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">endIndex</span> <span class="o">=</span> <span class="nx">startIndex</span> <span class="o">+</span> <span class="nx">pageSize</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">newItems</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">startIndex</span><span class="p">,</span> <span class="nx">endIndex</span><span class="p">);</span>
    
    <span class="nx">setVisibleItems</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="p">[...</span><span class="nx">prev</span><span class="p">,</span> <span class="p">...</span><span class="nx">newItems</span><span class="p">]);</span>
    <span class="nx">currentPageRef</span><span class="p">.</span><span class="nx">current</span><span class="o">++</span><span class="p">;</span>
    <span class="nx">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">data</span><span class="p">,</span> <span class="nx">loading</span><span class="p">,</span> <span class="nx">pageSize</span><span class="p">]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">loadMoreItems</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">loadMoreItems</span><span class="p">]);</span>

  <span class="kd">const</span> <span class="nx">handleEndReached</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">visibleItems</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">loadMoreItems</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">visibleItems</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">loadMoreItems</span><span class="p">]);</span>

  <span class="kd">const</span> <span class="nx">getItemLayout</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">data</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="na">length</span><span class="p">:</span> <span class="nx">itemHeight</span><span class="p">,</span>
    <span class="na">offset</span><span class="p">:</span> <span class="nx">itemHeight</span> <span class="o">*</span> <span class="nx">index</span><span class="p">,</span>
    <span class="nx">index</span><span class="p">,</span>
  <span class="p">}),</span> <span class="p">[</span><span class="nx">itemHeight</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">FlatList</span>
      <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">visibleItems</span><span class="p">}</span>
      <span class="nx">renderItem</span><span class="o">=</span><span class="p">{</span><span class="nx">renderItem</span><span class="p">}</span>
      <span class="nx">onEndReached</span><span class="o">=</span><span class="p">{</span><span class="nx">handleEndReached</span><span class="p">}</span>
      <span class="nx">onEndReachedThreshold</span><span class="o">=</span><span class="p">{</span><span class="mf">0.5</span><span class="p">}</span>
      <span class="nx">getItemLayout</span><span class="o">=</span><span class="p">{</span><span class="nx">getItemLayout</span><span class="p">}</span>
      <span class="c1">// Memory optimization</span>
      <span class="nx">removeClippedSubviews</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
      <span class="nx">maxToRenderPerBatch</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">windowSize</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">initialNumToRender</span><span class="o">=</span><span class="p">{</span><span class="mi">10</span><span class="p">}</span>
      <span class="nx">updateCellsBatchingPeriod</span><span class="o">=</span><span class="p">{</span><span class="mi">50</span><span class="p">}</span>
      <span class="c1">// Performance optimization</span>
      <span class="nx">keyExtractor</span><span class="o">=</span><span class="p">{(</span><span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">toString</span><span class="p">()}</span>
      <span class="nx">ListFooterComponent</span><span class="o">=</span><span class="p">{</span><span class="nx">loading</span> <span class="p">?</span> <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Loading</span><span class="p">...</span><span class="o">&lt;</span><span class="sr">/Text&gt; : null</span><span class="err">}
</span>    <span class="o">/&gt;</span>
  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="memory-efficient-data-handling">Memory-Efficient Data Handling</h2>

<h3 id="1-efficient-data-structures">1. Efficient Data Structures</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useMemo</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">EfficientDataHandling</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">rawData</span><span class="p">,</span> <span class="nx">setRawData</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>

  <span class="c1">// Use Map for O(1) lookups instead of Array.find()</span>
  <span class="kd">const</span> <span class="nx">dataMap</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
    <span class="nx">rawData</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">map</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">map</span><span class="p">;</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">rawData</span><span class="p">]);</span>

  <span class="c1">// Use Set for unique values</span>
  <span class="kd">const</span> <span class="nx">uniqueCategories</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Set</span><span class="p">(</span><span class="nx">rawData</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">category</span><span class="p">));</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">rawData</span><span class="p">]);</span>

  <span class="c1">// Efficient filtering with pre-computed values</span>
  <span class="kd">const</span> <span class="nx">activeItems</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> 
    <span class="nx">rawData</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">active</span><span class="p">),</span> 
    <span class="p">[</span><span class="nx">rawData</span><span class="p">]</span>
  <span class="p">);</span>

  <span class="c1">// Memoized search function</span>
  <span class="kd">const</span> <span class="nx">searchItems</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">query</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">query</span><span class="p">)</span> <span class="k">return</span> <span class="nx">rawData</span><span class="p">;</span>
    
    <span class="kd">const</span> <span class="nx">lowercaseQuery</span> <span class="o">=</span> <span class="nx">query</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">rawData</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> 
      <span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="nx">lowercaseQuery</span><span class="p">)</span> <span class="o">||</span>
      <span class="nx">item</span><span class="p">.</span><span class="nx">description</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="nx">lowercaseQuery</span><span class="p">)</span>
    <span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">rawData</span><span class="p">]);</span>

  <span class="c1">// Efficient item retrieval</span>
  <span class="kd">const</span> <span class="nx">getItemById</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">dataMap</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">dataMap</span><span class="p">]);</span>

  <span class="c1">// Check if category exists</span>
  <span class="kd">const</span> <span class="nx">hasCategory</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">category</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">uniqueCategories</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">category</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">uniqueCategories</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Efficient</span> <span class="nx">Data</span> <span class="nx">Handling</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Total</span> <span class="na">Items</span><span class="p">:</span> <span class="p">{</span><span class="nx">rawData</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Active</span> <span class="na">Items</span><span class="p">:</span> <span class="p">{</span><span class="nx">activeItems</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Unique</span> <span class="na">Categories</span><span class="p">:</span> <span class="p">{</span><span class="nx">uniqueCategories</span><span class="p">.</span><span class="nx">size</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="2-object-pooling-for-frequent-operations">2. Object Pooling for Frequent Operations</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// Object pool for frequently created/destroyed objects</span>
<span class="kd">class</span> <span class="nx">ObjectPool</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">createFn</span><span class="p">,</span> <span class="nx">resetFn</span><span class="p">,</span> <span class="nx">initialSize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">createFn</span> <span class="o">=</span> <span class="nx">createFn</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">resetFn</span> <span class="o">=</span> <span class="nx">resetFn</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pool</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Set</span><span class="p">();</span>
    
    <span class="c1">// Pre-populate pool</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">initialSize</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">createFn</span><span class="p">());</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">acquire</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">obj</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createFn</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">release</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">obj</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">resetFn</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">clear</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">getStats</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">poolSize</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="na">activeCount</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span>
      <span class="na">totalCreated</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">active</span><span class="p">.</span><span class="nx">size</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Usage example</span>
<span class="kd">const</span> <span class="nx">useObjectPool</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">poolRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">poolRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ObjectPool</span><span class="p">(</span>
      <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="na">timestamp</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">active</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}),</span>
      <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">obj</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">obj</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="nx">obj</span><span class="p">.</span><span class="nx">timestamp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">obj</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">);</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">poolRef</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">clear</span><span class="p">();</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">getObject</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">poolRef</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">acquire</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">releaseObject</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">obj</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">poolRef</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">release</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">getPoolStats</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">poolRef</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">getStats</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">{</span> <span class="nx">getObject</span><span class="p">,</span> <span class="nx">releaseObject</span><span class="p">,</span> <span class="nx">getPoolStats</span> <span class="p">};</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="event-handling-optimization">Event Handling Optimization</h2>

<h3 id="1-efficient-event-listeners">1. Efficient Event Listeners</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppState</span><span class="p">,</span> <span class="nx">Dimensions</span><span class="p">,</span> <span class="nx">NetInfo</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">OptimizedEventHandling</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">subscriptionsRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="nx">isMountedRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// App State listener</span>
    <span class="kd">const</span> <span class="nx">appStateSubscription</span> <span class="o">=</span> <span class="nx">AppState</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">nextAppState</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">isMountedRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">App state changed to:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">nextAppState</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="c1">// Dimensions listener</span>
    <span class="kd">const</span> <span class="nx">dimensionsSubscription</span> <span class="o">=</span> <span class="nx">Dimensions</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="p">({</span> <span class="nb">window</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">isMountedRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Screen dimensions changed:</span><span class="dl">'</span><span class="p">,</span> <span class="nb">window</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="c1">// Network state listener</span>
    <span class="kd">const</span> <span class="nx">netInfoSubscription</span> <span class="o">=</span> <span class="nx">NetInfo</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">state</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">isMountedRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Network state:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">state</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="c1">// Store subscriptions for cleanup</span>
    <span class="nx">subscriptionsRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="p">[</span>
      <span class="nx">appStateSubscription</span><span class="p">,</span>
      <span class="nx">dimensionsSubscription</span><span class="p">,</span>
      <span class="nx">netInfoSubscription</span>
    <span class="p">];</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">isMountedRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">subscriptionsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">subscription</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">subscription</span><span class="p">?.</span><span class="nx">remove</span><span class="p">();</span>
      <span class="p">});</span>
      <span class="nx">subscriptionsRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Optimized</span> <span class="nx">Event</span> <span class="nx">Handling</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h3 id="2-debounced-and-throttled-functions">2. Debounced and Throttled Functions</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useCallback</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// Debounce hook</span>
<span class="kd">const</span> <span class="nx">useDebounce</span> <span class="o">=</span> <span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">delay</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">timeoutRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">debouncedCallback</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((...</span><span class="nx">args</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">callback</span><span class="p">(...</span><span class="nx">args</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">delay</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">delay</span><span class="p">]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="nx">debouncedCallback</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Throttle hook</span>
<span class="kd">const</span> <span class="nx">useThrottle</span> <span class="o">=</span> <span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">delay</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">lastCallRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">timeoutRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">throttledCallback</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((...</span><span class="nx">args</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">now</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="nx">now</span> <span class="o">-</span> <span class="nx">lastCallRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">&gt;=</span> <span class="nx">delay</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">lastCallRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">now</span><span class="p">;</span>
      <span class="nx">callback</span><span class="p">(...</span><span class="nx">args</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
      <span class="p">}</span>
      
      <span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">lastCallRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
        <span class="nx">callback</span><span class="p">(...</span><span class="nx">args</span><span class="p">);</span>
      <span class="p">},</span> <span class="nx">delay</span> <span class="o">-</span> <span class="p">(</span><span class="nx">now</span> <span class="o">-</span> <span class="nx">lastCallRef</span><span class="p">.</span><span class="nx">current</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">delay</span><span class="p">]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeoutRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="nx">throttledCallback</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Usage example</span>
<span class="kd">const</span> <span class="nx">SearchComponent</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">query</span><span class="p">,</span> <span class="nx">setQuery</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">results</span><span class="p">,</span> <span class="nx">setResults</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>

  <span class="kd">const</span> <span class="nx">search</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="nx">searchQuery</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">searchQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">setResults</span><span class="p">([]);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s2">`/api/search?q=</span><span class="p">${</span><span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">searchQuery</span><span class="p">)}</span><span class="s2">`</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
      <span class="nx">setResults</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">results</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Search error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">debouncedSearch</span> <span class="o">=</span> <span class="nx">useDebounce</span><span class="p">(</span><span class="nx">search</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">handleQueryChange</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">text</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setQuery</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
    <span class="nx">debouncedSearch</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">debouncedSearch</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">TextInput</span>
        <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">query</span><span class="p">}</span>
        <span class="nx">onChangeText</span><span class="o">=</span><span class="p">{</span><span class="nx">handleQueryChange</span><span class="p">}</span>
        <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Search...</span><span class="dl">"</span>
      <span class="o">/&gt;</span>
      <span class="p">{</span><span class="nx">results</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">result</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">result</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="p">))}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="memory-monitoring-and-cleanup">Memory Monitoring and Cleanup</h2>

<h3 id="1-automatic-cleanup-hooks">1. Automatic Cleanup Hooks</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// Custom hook for automatic cleanup</span>
<span class="kd">const</span> <span class="nx">useCleanup</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">cleanupFunctionsRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">([]);</span>

  <span class="kd">const</span> <span class="nx">addCleanup</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">cleanupFn</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">cleanupFunctionsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">cleanupFn</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">removeCleanup</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">cleanupFn</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">cleanupFunctionsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">cleanupFn</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">cleanupFunctionsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">cleanupFunctionsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">cleanup</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">cleanup</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Cleanup error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
      <span class="nx">cleanupFunctionsRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">{</span> <span class="nx">addCleanup</span><span class="p">,</span> <span class="nx">removeCleanup</span> <span class="p">};</span>
<span class="p">};</span>

<span class="c1">// Usage example</span>
<span class="kd">const</span> <span class="nx">ComponentWithCleanup</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">addCleanup</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useCleanup</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">intervalRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">subscriptionRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Set up interval</span>
    <span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Interval tick</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>

    <span class="c1">// Set up subscription</span>
    <span class="nx">subscriptionRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">NetInfo</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">state</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Network state:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">state</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="c1">// Add cleanup functions</span>
    <span class="nx">addCleanup</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">addCleanup</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">subscriptionRef</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">remove</span><span class="p">();</span>
    <span class="p">});</span>

  <span class="p">},</span> <span class="p">[</span><span class="nx">addCleanup</span><span class="p">]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Component</span> <span class="kd">with</span> <span class="nx">Cleanup</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h3 id="2-memory-pressure-handling">2. Memory Pressure Handling</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useCallback</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">useMemoryPressure</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">pressureLevel</span><span class="p">,</span> <span class="nx">setPressureLevel</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">'</span><span class="s1">normal</span><span class="dl">'</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">memoryWarnings</span><span class="p">,</span> <span class="nx">setMemoryWarnings</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">cleanupFunctionsRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">([]);</span>

  <span class="kd">const</span> <span class="nx">handleMemoryWarning</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setMemoryWarnings</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nx">setPressureLevel</span><span class="p">(</span><span class="dl">'</span><span class="s1">high</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="c1">// Execute cleanup functions</span>
    <span class="nx">cleanupFunctionsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">cleanup</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">cleanup</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Memory cleanup error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
    
    <span class="c1">// Force garbage collection if available</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">handleAppStateChange</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">nextAppState</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">nextAppState</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">background</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setPressureLevel</span><span class="p">(</span><span class="dl">'</span><span class="s1">low</span><span class="dl">'</span><span class="p">);</span>
      <span class="c1">// Clear non-essential data when app goes to background</span>
      <span class="nx">cleanupFunctionsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">cleanup</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">cleanup</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Background cleanup error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">nextAppState</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">active</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setPressureLevel</span><span class="p">(</span><span class="dl">'</span><span class="s1">normal</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">addMemoryCleanup</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">((</span><span class="nx">cleanupFn</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">cleanupFunctionsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">cleanupFn</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">memoryWarningSubscription</span> <span class="o">=</span> <span class="nx">AppState</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">memoryWarning</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleMemoryWarning</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">appStateSubscription</span> <span class="o">=</span> <span class="nx">AppState</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleAppStateChange</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">memoryWarningSubscription</span><span class="p">?.</span><span class="nx">remove</span><span class="p">();</span>
      <span class="nx">appStateSubscription</span><span class="p">?.</span><span class="nx">remove</span><span class="p">();</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">handleMemoryWarning</span><span class="p">,</span> <span class="nx">handleAppStateChange</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">pressureLevel</span><span class="p">,</span>
    <span class="nx">memoryWarnings</span><span class="p">,</span>
    <span class="nx">addMemoryCleanup</span>
  <span class="p">};</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="performance-testing-and-monitoring">Performance Testing and Monitoring</h2>

<h3 id="1-memory-performance-tests">1. Memory Performance Tests</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">render</span><span class="p">,</span> <span class="nx">cleanup</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@testing-library/react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">Memory Performance Tests</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">initialMemory</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">initialMemory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">?.</span><span class="nx">memory</span><span class="p">?.</span><span class="nx">usedJSHeapSize</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">afterEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">cleanup</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should not leak memory during component lifecycle</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">unmount</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">MyComponent</span> <span class="o">/&gt;</span><span class="p">);</span>
    
    <span class="c1">// Simulate user interactions</span>
    <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">press</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Button</span><span class="dl">'</span><span class="p">));</span>
    <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">scroll</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByTestId</span><span class="p">(</span><span class="dl">'</span><span class="s1">list</span><span class="dl">'</span><span class="p">),</span> <span class="p">{</span> <span class="na">nativeEvent</span><span class="p">:</span> <span class="p">{</span> <span class="na">contentOffset</span><span class="p">:</span> <span class="p">{</span> <span class="na">y</span><span class="p">:</span> <span class="mi">1000</span> <span class="p">}</span> <span class="p">}</span> <span class="p">});</span>
    
    <span class="nx">unmount</span><span class="p">();</span>
    
    <span class="c1">// Wait for GC</span>
    <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">1000</span><span class="p">));</span>
    
    <span class="kd">const</span> <span class="nx">finalMemory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">?.</span><span class="nx">memory</span><span class="p">?.</span><span class="nx">usedJSHeapSize</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">memoryIncrease</span> <span class="o">=</span> <span class="nx">finalMemory</span> <span class="o">-</span> <span class="nx">initialMemory</span><span class="p">;</span>
    
    <span class="c1">// Allow for 1MB increase (tolerance for test overhead)</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">memoryIncrease</span><span class="p">).</span><span class="nx">toBeLessThan</span><span class="p">(</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should handle memory pressure gracefully</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">getByText</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">MemoryPressureComponent</span> <span class="o">/&gt;</span><span class="p">);</span>
    
    <span class="c1">// Simulate memory warning</span>
    <span class="nx">fireEvent</span><span class="p">(</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Trigger Memory Warning</span><span class="dl">'</span><span class="p">),</span> <span class="dl">'</span><span class="s1">memoryWarning</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="nx">expect</span><span class="p">(</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Memory pressure handled</span><span class="dl">'</span><span class="p">)).</span><span class="nx">toBeTruthy</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should efficiently handle large datasets</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">largeDataset</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">({</span> <span class="na">length</span><span class="p">:</span> <span class="mi">10000</span> <span class="p">},</span> <span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
      <span class="na">id</span><span class="p">:</span> <span class="nx">i</span><span class="p">,</span>
      <span class="na">name</span><span class="p">:</span> <span class="s2">`Item </span><span class="p">${</span><span class="nx">i</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
      <span class="na">data</span><span class="p">:</span> <span class="s2">`Data </span><span class="p">${</span><span class="nx">i</span><span class="p">}</span><span class="s2">`</span>
    <span class="p">}));</span>

    <span class="kd">const</span> <span class="p">{</span> <span class="nx">unmount</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">LargeList</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">largeDataset</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>    
    <span class="c1">// Test scrolling performance</span>
    <span class="kd">const</span> <span class="nx">list</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">getByTestId</span><span class="p">(</span><span class="dl">'</span><span class="s1">large-list</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">scroll</span><span class="p">(</span><span class="nx">list</span><span class="p">,</span> <span class="p">{</span> <span class="na">nativeEvent</span><span class="p">:</span> <span class="p">{</span> <span class="na">contentOffset</span><span class="p">:</span> <span class="p">{</span> <span class="na">y</span><span class="p">:</span> <span class="mi">1000</span> <span class="p">}</span> <span class="p">}</span> <span class="p">});</span>
    
    <span class="nx">unmount</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="summary">Summary</h2>

<p>Memory optimization best practices in React Native include:</p>

<ol>
  <li><strong>Component Optimization</strong>: Memoization, efficient state management, optimized rendering</li>
  <li><strong>Image and Media</strong>: Efficient loading, caching, lazy loading, virtualization</li>
  <li><strong>Data Handling</strong>: Efficient data structures, object pooling, optimized operations</li>
  <li><strong>Event Handling</strong>: Proper cleanup, debouncing, throttling</li>
  <li><strong>Memory Monitoring</strong>: Automatic cleanup, memory pressure handling</li>
  <li><strong>Performance Testing</strong>: Memory leak testing, performance monitoring</li>
</ol>

<h2 id="key-takeaways">Key Takeaways</h2>

<ul>
  <li>Use memoization to prevent unnecessary re-renders and calculations</li>
  <li>Implement proper cleanup for event listeners, timers, and subscriptions</li>
  <li>Use efficient data structures (Map, Set) for better performance</li>
  <li>Implement object pooling for frequently created/destroyed objects</li>
  <li>Use lazy loading and virtualization for large datasets</li>
  <li>Monitor memory usage and handle memory pressure gracefully</li>
  <li>Test for memory leaks as part of your development workflow</li>
  <li>Optimize images and media to reduce memory footprint</li>
  <li>Use debouncing and throttling for performance-critical operations</li>
  <li>Implement automatic cleanup mechanisms to prevent memory leaks</li>
</ul>


        </main>
        
        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ecf0f1; color: #666; text-align: center;">
            <p>Interview Prep Documentation - Built with Jekyll</p>
        </footer>
    </div>
</body>
</html>
