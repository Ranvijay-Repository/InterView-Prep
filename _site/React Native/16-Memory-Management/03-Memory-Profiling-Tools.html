<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Profiling Tools for React Native - Interview Prep Documentation</title>
    <meta name="description" content="Comprehensive guides for JavaScript, TypeScript, and React Native interview preparation">
    
    <!-- GitHub Pages compatible styling -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
        }
        
        .container {
            max-width: 100%;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 2em;
            margin-bottom: 1em;
        }
        
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 5px;
        }
        
        code {
            background-color: #f8f9fa;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
        }
        
        blockquote {
            border-left: 4px solid #3498db;
            margin: 0;
            padding-left: 20px;
            color: #666;
            font-style: italic;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .navigation {
            background-color: #2c3e50;
            color: white;
            padding: 10px 0;
            margin-bottom: 20px;
        }
        
        .navigation a {
            color: white;
            text-decoration: none;
            margin-right: 20px;
        }
        
        .navigation a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb {
            margin-bottom: 20px;
            color: #666;
        }
        
        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="navigation">
            <a href="/">Home</a>
            <a href="/Javascript/">JavaScript</a>
            <a href="/TypeScript/">TypeScript</a>
            <a href="/React-Native/">React Native</a>
        </nav>
        
        
        
        <main>
            <h1 id="memory-profiling-tools-for-react-native">Memory Profiling Tools for React Native</h1>

<h2 id="overview">Overview</h2>

<p>Memory profiling tools are essential for identifying memory leaks, optimizing performance, and understanding memory usage patterns in React Native applications. This guide covers various tools and techniques for effective memory profiling.</p>

<h2 id="built-in-react-native-tools">Built-in React Native Tools</h2>

<h3 id="1-flipper-integration">1. Flipper Integration</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">Button</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">FlipperMemoryProfiler</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">memoryData</span><span class="p">,</span> <span class="nx">setMemoryData</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Flipper memory plugin integration</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">__flipper</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">memoryPlugin</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">__flipper</span><span class="p">.</span><span class="nx">getPlugin</span><span class="p">(</span><span class="dl">'</span><span class="s1">Memory</span><span class="dl">'</span><span class="p">);</span>
      
      <span class="k">if</span> <span class="p">(</span><span class="nx">memoryPlugin</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">startProfiling</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">memoryPlugin</span><span class="p">.</span><span class="nx">startProfiling</span><span class="p">();</span>
        <span class="p">};</span>

        <span class="kd">const</span> <span class="nx">stopProfiling</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">memoryPlugin</span><span class="p">.</span><span class="nx">stopProfiling</span><span class="p">();</span>
          <span class="nx">setMemoryData</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
        <span class="p">};</span>

        <span class="c1">// Expose functions to Flipper</span>
        <span class="nb">global</span><span class="p">.</span><span class="nx">__flipperMemoryProfiler</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">startProfiling</span><span class="p">,</span>
          <span class="nx">stopProfiling</span><span class="p">,</span>
          <span class="na">getMemoryData</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">memoryData</span>
        <span class="p">};</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Flipper</span> <span class="nx">Memory</span> <span class="nx">Profiler</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="p">{</span><span class="nx">memoryData</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="na">Data</span><span class="p">:</span> <span class="p">{</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">memoryData</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="p">)}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="2-react-devtools-profiler">2. React DevTools Profiler</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Profiler</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ProfilerExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">onRenderCallback</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">phase</span><span class="p">,</span> <span class="nx">actualDuration</span><span class="p">,</span> <span class="nx">baseDuration</span><span class="p">,</span> <span class="nx">startTime</span><span class="p">,</span> <span class="nx">commitTime</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Profiler:</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">id</span><span class="p">,</span>
      <span class="nx">phase</span><span class="p">,</span>
      <span class="nx">actualDuration</span><span class="p">,</span>
      <span class="nx">baseDuration</span><span class="p">,</span>
      <span class="nx">startTime</span><span class="p">,</span>
      <span class="nx">commitTime</span>
    <span class="p">});</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Profiler</span> <span class="nx">id</span><span class="o">=</span><span class="dl">"</span><span class="s2">MyComponent</span><span class="dl">"</span> <span class="nx">onRender</span><span class="o">=</span><span class="p">{</span><span class="nx">onRenderCallback</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Profiled</span> <span class="nx">Component</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Profiler</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="custom-memory-monitoring">Custom Memory Monitoring</h2>

<h3 id="1-memory-usage-tracker">1. Memory Usage Tracker</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">ScrollView</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MemoryTracker</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">memoryHistory</span><span class="p">,</span> <span class="nx">setMemoryHistory</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">currentMemory</span><span class="p">,</span> <span class="nx">setCurrentMemory</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">intervalRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">trackMemory</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">performance</span> <span class="o">&amp;&amp;</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">memory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">memoryInfo</span> <span class="o">=</span> <span class="p">{</span>
          <span class="na">timestamp</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
          <span class="na">used</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">),</span>
          <span class="na">total</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">totalJSHeapSize</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">),</span>
          <span class="na">limit</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">memory</span><span class="p">.</span><span class="nx">jsHeapSizeLimit</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">),</span>
          <span class="na">percentage</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span> <span class="o">/</span> <span class="nx">memory</span><span class="p">.</span><span class="nx">jsHeapSizeLimit</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
        <span class="p">};</span>

        <span class="nx">setCurrentMemory</span><span class="p">(</span><span class="nx">memoryInfo</span><span class="p">);</span>
        <span class="nx">setMemoryHistory</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="p">[...</span><span class="nx">prev</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">50</span><span class="p">),</span> <span class="nx">memoryInfo</span><span class="p">]);</span> <span class="c1">// Keep last 50 entries</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">trackMemory</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="nx">trackMemory</span><span class="p">();</span> <span class="c1">// Initial measurement</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">intervalRef</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">getMemoryTrend</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">memoryHistory</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">stable</span><span class="dl">'</span><span class="p">;</span>
    
    <span class="kd">const</span> <span class="nx">recent</span> <span class="o">=</span> <span class="nx">memoryHistory</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">older</span> <span class="o">=</span> <span class="nx">memoryHistory</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">);</span>
    
    <span class="kd">const</span> <span class="nx">recentAvg</span> <span class="o">=</span> <span class="nx">recent</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">m</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">m</span><span class="p">.</span><span class="nx">used</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="nx">recent</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">olderAvg</span> <span class="o">=</span> <span class="nx">older</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">m</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">m</span><span class="p">.</span><span class="nx">used</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="nx">older</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="nx">recentAvg</span> <span class="o">&gt;</span> <span class="nx">olderAvg</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">)</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">increasing</span><span class="dl">'</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">recentAvg</span> <span class="o">&lt;</span> <span class="nx">olderAvg</span> <span class="o">*</span> <span class="mf">0.9</span><span class="p">)</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">decreasing</span><span class="dl">'</span><span class="p">;</span>
    <span class="k">return</span> <span class="dl">'</span><span class="s1">stable</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">ScrollView</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="nx">Tracker</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      
      <span class="p">{</span><span class="nx">currentMemory</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Current</span> <span class="nx">Memory</span> <span class="na">Usage</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Used</span><span class="p">:</span> <span class="p">{</span><span class="nx">currentMemory</span><span class="p">.</span><span class="nx">used</span><span class="p">}</span> <span class="nx">MB</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Total</span><span class="p">:</span> <span class="p">{</span><span class="nx">currentMemory</span><span class="p">.</span><span class="nx">total</span><span class="p">}</span> <span class="nx">MB</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Limit</span><span class="p">:</span> <span class="p">{</span><span class="nx">currentMemory</span><span class="p">.</span><span class="nx">limit</span><span class="p">}</span> <span class="nx">MB</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Percentage</span><span class="p">:</span> <span class="p">{</span><span class="nx">currentMemory</span><span class="p">.</span><span class="nx">percentage</span><span class="p">}</span><span class="o">%&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Trend</span><span class="p">:</span> <span class="p">{</span><span class="nx">getMemoryTrend</span><span class="p">()}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>      <span class="p">)}</span>

      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="na">History</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="p">{</span><span class="nx">memoryHistory</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">).</span><span class="nx">map</span><span class="p">((</span><span class="nx">entry</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">).</span><span class="nx">toLocaleTimeString</span><span class="p">()}:</span> <span class="p">{</span><span class="nx">entry</span><span class="p">.</span><span class="nx">used</span><span class="p">}</span><span class="nx">MB</span> <span class="p">({</span><span class="nx">entry</span><span class="p">.</span><span class="nx">percentage</span><span class="p">}</span><span class="o">%</span><span class="p">)</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="p">))}</span>
      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/ScrollView</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="2-component-memory-profiler">2. Component Memory Profiler</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">Button</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">ComponentMemoryProfiler</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">components</span><span class="p">,</span> <span class="nx">setComponents</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="k">new</span> <span class="nb">Map</span><span class="p">());</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isProfiling</span><span class="p">,</span> <span class="nx">setIsProfiling</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">profilerRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">profilerRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">startProfiling</span><span class="p">:</span> <span class="p">(</span><span class="nx">componentName</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">startMemory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">?.</span><span class="nx">memory</span><span class="p">?.</span><span class="nx">usedJSHeapSize</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">startTime</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
        
        <span class="nx">setComponents</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">(</span><span class="nx">prev</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">componentName</span><span class="p">,</span> <span class="p">{</span>
          <span class="nx">startMemory</span><span class="p">,</span>
          <span class="nx">startTime</span><span class="p">,</span>
          <span class="na">endMemory</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="na">endTime</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="na">memoryDelta</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="na">duration</span><span class="p">:</span> <span class="kc">null</span>
        <span class="p">})));</span>
      <span class="p">},</span>
      
      <span class="na">endProfiling</span><span class="p">:</span> <span class="p">(</span><span class="nx">componentName</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">endMemory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">?.</span><span class="nx">memory</span><span class="p">?.</span><span class="nx">usedJSHeapSize</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">endTime</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
        
        <span class="nx">setComponents</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">component</span> <span class="o">=</span> <span class="nx">prev</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">componentName</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">component</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">const</span> <span class="nx">updated</span> <span class="o">=</span> <span class="p">{</span>
              <span class="p">...</span><span class="nx">component</span><span class="p">,</span>
              <span class="nx">endMemory</span><span class="p">,</span>
              <span class="nx">endTime</span><span class="p">,</span>
              <span class="na">memoryDelta</span><span class="p">:</span> <span class="nx">endMemory</span> <span class="o">-</span> <span class="nx">component</span><span class="p">.</span><span class="nx">startMemory</span><span class="p">,</span>
              <span class="na">duration</span><span class="p">:</span> <span class="nx">endTime</span> <span class="o">-</span> <span class="nx">component</span><span class="p">.</span><span class="nx">startTime</span>
            <span class="p">};</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">(</span><span class="nx">prev</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">componentName</span><span class="p">,</span> <span class="nx">updated</span><span class="p">));</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">prev</span><span class="p">;</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">startProfiling</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setIsProfiling</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="nx">profilerRef</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">startProfiling</span><span class="p">(</span><span class="dl">'</span><span class="s1">MyComponent</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="kd">const</span> <span class="nx">endProfiling</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setIsProfiling</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="nx">profilerRef</span><span class="p">.</span><span class="nx">current</span><span class="p">?.</span><span class="nx">endProfiling</span><span class="p">(</span><span class="dl">'</span><span class="s1">MyComponent</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Component</span> <span class="nx">Memory</span> <span class="nx">Profiler</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Button</span>
          <span class="nx">title</span><span class="o">=</span><span class="p">{</span><span class="nx">isProfiling</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">Stop Profiling</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Start Profiling</span><span class="dl">"</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">isProfiling</span> <span class="p">?</span> <span class="nx">endProfiling</span> <span class="p">:</span> <span class="nx">startProfiling</span><span class="p">}</span>
        <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">components</span><span class="p">.</span><span class="nx">entries</span><span class="p">()).</span><span class="nx">map</span><span class="p">(([</span><span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">name</span><span class="p">}</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">name</span><span class="p">}:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Start</span> <span class="na">Memory</span><span class="p">:</span> <span class="p">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">startMemory</span><span class="p">}</span> <span class="nx">bytes</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">End</span> <span class="na">Memory</span><span class="p">:</span> <span class="p">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">endMemory</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">N/A</span><span class="dl">'</span><span class="p">}</span> <span class="nx">bytes</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="na">Delta</span><span class="p">:</span> <span class="p">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">memoryDelta</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">N/A</span><span class="dl">'</span><span class="p">}</span> <span class="nx">bytes</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Duration</span><span class="p">:</span> <span class="p">{</span><span class="nx">data</span><span class="p">.</span><span class="nx">duration</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">N/A</span><span class="dl">'</span><span class="p">}</span> <span class="nx">ms</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>        <span class="p">))}</span>
      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="advanced-memory-profiling">Advanced Memory Profiling</h2>

<h3 id="1-heap-snapshot-analysis">1. Heap Snapshot Analysis</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">HeapSnapshotProfiler</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">snapshotRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">takeHeapSnapshot</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">performance</span> <span class="o">&amp;&amp;</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">memory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">snapshot</span> <span class="o">=</span> <span class="p">{</span>
          <span class="na">timestamp</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
          <span class="na">usedJSHeapSize</span><span class="p">:</span> <span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span><span class="p">,</span>
          <span class="na">totalJSHeapSize</span><span class="p">:</span> <span class="nx">memory</span><span class="p">.</span><span class="nx">totalJSHeapSize</span><span class="p">,</span>
          <span class="na">jsHeapSizeLimit</span><span class="p">:</span> <span class="nx">memory</span><span class="p">.</span><span class="nx">jsHeapSizeLimit</span><span class="p">,</span>
          <span class="c1">// Additional context</span>
          <span class="na">userAgent</span><span class="p">:</span> <span class="nb">global</span><span class="p">.</span><span class="nb">navigator</span><span class="p">?.</span><span class="nx">userAgent</span><span class="p">,</span>
          <span class="na">platform</span><span class="p">:</span> <span class="nb">global</span><span class="p">.</span><span class="nx">Platform</span><span class="p">?.</span><span class="nx">OS</span><span class="p">,</span>
          <span class="na">version</span><span class="p">:</span> <span class="nb">global</span><span class="p">.</span><span class="nx">Platform</span><span class="p">?.</span><span class="nx">Version</span>
        <span class="p">};</span>
        
        <span class="nx">snapshotRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">snapshot</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Heap Snapshot:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">snapshot</span><span class="p">);</span>
        
        <span class="k">return</span> <span class="nx">snapshot</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">compareSnapshots</span> <span class="o">=</span> <span class="p">(</span><span class="nx">snapshot1</span><span class="p">,</span> <span class="nx">snapshot2</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">snapshot1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">snapshot2</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
      
      <span class="k">return</span> <span class="p">{</span>
        <span class="na">memoryDelta</span><span class="p">:</span> <span class="nx">snapshot2</span><span class="p">.</span><span class="nx">usedJSHeapSize</span> <span class="o">-</span> <span class="nx">snapshot1</span><span class="p">.</span><span class="nx">usedJSHeapSize</span><span class="p">,</span>
        <span class="na">timeDelta</span><span class="p">:</span> <span class="nx">snapshot2</span><span class="p">.</span><span class="nx">timestamp</span> <span class="o">-</span> <span class="nx">snapshot1</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">,</span>
        <span class="na">percentageChange</span><span class="p">:</span> <span class="p">((</span><span class="nx">snapshot2</span><span class="p">.</span><span class="nx">usedJSHeapSize</span> <span class="o">-</span> <span class="nx">snapshot1</span><span class="p">.</span><span class="nx">usedJSHeapSize</span><span class="p">)</span> <span class="o">/</span> <span class="nx">snapshot1</span><span class="p">.</span><span class="nx">usedJSHeapSize</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
      <span class="p">};</span>
    <span class="p">};</span>

    <span class="c1">// Expose functions globally for debugging</span>
    <span class="nb">global</span><span class="p">.</span><span class="nx">__heapProfiler</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">takeSnapshot</span><span class="p">:</span> <span class="nx">takeHeapSnapshot</span><span class="p">,</span>
      <span class="nx">compareSnapshots</span><span class="p">,</span>
      <span class="na">getCurrentSnapshot</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">snapshotRef</span><span class="p">.</span><span class="nx">current</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Heap</span> <span class="nx">Snapshot</span> <span class="nx">Profiler</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h3 id="2-memory-leak-detector">2. Memory Leak Detector</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">Button</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MemoryLeakDetector</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">leakReport</span><span class="p">,</span> <span class="nx">setLeakReport</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">memoryHistoryRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="nx">componentRefsRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="k">new</span> <span class="nb">Set</span><span class="p">());</span>
  <span class="kd">const</span> <span class="nx">timerRefsRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="k">new</span> <span class="nb">Set</span><span class="p">());</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">trackMemory</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">performance</span> <span class="o">&amp;&amp;</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">memory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">memoryInfo</span> <span class="o">=</span> <span class="p">{</span>
          <span class="na">timestamp</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
          <span class="na">used</span><span class="p">:</span> <span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span><span class="p">,</span>
          <span class="na">total</span><span class="p">:</span> <span class="nx">memory</span><span class="p">.</span><span class="nx">totalJSHeapSize</span>
        <span class="p">};</span>
        
        <span class="nx">memoryHistoryRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">memoryInfo</span><span class="p">);</span>
        
        <span class="c1">// Keep only last 100 entries</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">memoryHistoryRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">memoryHistoryRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">trackMemory</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="nx">trackMemory</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">detectLeaks</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">history</span> <span class="o">=</span> <span class="nx">memoryHistoryRef</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">history</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">setLeakReport</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Not enough data for leak detection</span><span class="dl">'</span> <span class="p">});</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Analyze memory trend</span>
    <span class="kd">const</span> <span class="nx">recent</span> <span class="o">=</span> <span class="nx">history</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">older</span> <span class="o">=</span> <span class="nx">history</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">);</span>
    
    <span class="kd">const</span> <span class="nx">recentAvg</span> <span class="o">=</span> <span class="nx">recent</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">m</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">m</span><span class="p">.</span><span class="nx">used</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="nx">recent</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">olderAvg</span> <span class="o">=</span> <span class="nx">older</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">m</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">m</span><span class="p">.</span><span class="nx">used</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="nx">older</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    
    <span class="kd">const</span> <span class="nx">growthRate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">recentAvg</span> <span class="o">-</span> <span class="nx">olderAvg</span><span class="p">)</span> <span class="o">/</span> <span class="nx">olderAvg</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">isLeaking</span> <span class="o">=</span> <span class="nx">growthRate</span> <span class="o">&gt;</span> <span class="mf">0.1</span><span class="p">;</span> <span class="c1">// 10% growth threshold</span>
    
    <span class="kd">const</span> <span class="nx">report</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">isLeaking</span><span class="p">,</span>
      <span class="na">growthRate</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">growthRate</span> <span class="o">*</span> <span class="mi">100</span><span class="p">),</span>
      <span class="na">recentAverage</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">recentAvg</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">),</span>
      <span class="na">olderAverage</span><span class="p">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">olderAvg</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">),</span>
      <span class="na">componentRefs</span><span class="p">:</span> <span class="nx">componentRefsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span>
      <span class="na">timerRefs</span><span class="p">:</span> <span class="nx">timerRefsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span>
      <span class="na">recommendations</span><span class="p">:</span> <span class="p">[]</span>
    <span class="p">};</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">isLeaking</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">report</span><span class="p">.</span><span class="nx">recommendations</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="dl">'</span><span class="s1">Memory usage is increasing - check for memory leaks</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="nx">componentRefsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">size</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">report</span><span class="p">.</span><span class="nx">recommendations</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="dl">'</span><span class="s1">High number of component references - consider cleanup</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="nx">timerRefsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">size</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">report</span><span class="p">.</span><span class="nx">recommendations</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="dl">'</span><span class="s1">High number of timers - ensure proper cleanup</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">setLeakReport</span><span class="p">(</span><span class="nx">report</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="kd">const</span> <span class="nx">clearReferences</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">componentRefsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
    <span class="nx">timerRefsRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
    <span class="nx">memoryHistoryRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">setLeakReport</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="nx">Leak</span> <span class="nx">Detector</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">title</span><span class="o">=</span><span class="dl">"</span><span class="s2">Detect Leaks</span><span class="dl">"</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">detectLeaks</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">title</span><span class="o">=</span><span class="dl">"</span><span class="s2">Clear References</span><span class="dl">"</span> <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">clearReferences</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>
      <span class="p">{</span><span class="nx">leakReport</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span><span class="nx">Leak</span> <span class="na">Report</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Is</span> <span class="na">Leaking</span><span class="p">:</span> <span class="p">{</span><span class="nx">leakReport</span><span class="p">.</span><span class="nx">isLeaking</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">Yes</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">No</span><span class="dl">'</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Growth</span> <span class="na">Rate</span><span class="p">:</span> <span class="p">{</span><span class="nx">leakReport</span><span class="p">.</span><span class="nx">growthRate</span><span class="p">}</span><span class="o">%&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Recent</span> <span class="na">Average</span><span class="p">:</span> <span class="p">{</span><span class="nx">leakReport</span><span class="p">.</span><span class="nx">recentAverage</span><span class="p">}</span> <span class="nx">MB</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Older</span> <span class="na">Average</span><span class="p">:</span> <span class="p">{</span><span class="nx">leakReport</span><span class="p">.</span><span class="nx">olderAverage</span><span class="p">}</span> <span class="nx">MB</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Component</span> <span class="na">Refs</span><span class="p">:</span> <span class="p">{</span><span class="nx">leakReport</span><span class="p">.</span><span class="nx">componentRefs</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Timer</span> <span class="na">Refs</span><span class="p">:</span> <span class="p">{</span><span class="nx">leakReport</span><span class="p">.</span><span class="nx">timerRefs</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          
          <span class="p">{</span><span class="nx">leakReport</span><span class="p">.</span><span class="nx">recommendations</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span><span class="na">Recommendations</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>              <span class="p">{</span><span class="nx">leakReport</span><span class="p">.</span><span class="nx">recommendations</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">rec</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
                <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span><span class="o">&gt;</span><span class="err"></span> <span class="p">{</span><span class="nx">rec</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>              <span class="p">))}</span>
            <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>          <span class="p">)}</span>
        <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>      <span class="p">)}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="performance-monitoring">Performance Monitoring</h2>

<h3 id="1-frame-rate-monitor">1. Frame Rate Monitor</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">FrameRateMonitor</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">fps</span><span class="p">,</span> <span class="nx">setFps</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">frameDrops</span><span class="p">,</span> <span class="nx">setFrameDrops</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">frameCountRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">lastTimeRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">());</span>
  <span class="kd">const</span> <span class="nx">frameTimesRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">([]);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">measureFrameRate</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">now</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
      <span class="kd">const</span> <span class="nx">deltaTime</span> <span class="o">=</span> <span class="nx">now</span> <span class="o">-</span> <span class="nx">lastTimeRef</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
      
      <span class="nx">frameCountRef</span><span class="p">.</span><span class="nx">current</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">frameTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">deltaTime</span><span class="p">);</span>
      
      <span class="c1">// Keep only last 60 frame times</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">frameTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">frameTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="p">}</span>
      
      <span class="c1">// Calculate FPS every second</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">frameCountRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">%</span> <span class="mi">60</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">avgFrameTime</span> <span class="o">=</span> <span class="nx">frameTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">time</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">time</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="nx">frameTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">currentFps</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="nx">avgFrameTime</span><span class="p">);</span>
        <span class="nx">setFps</span><span class="p">(</span><span class="nx">currentFps</span><span class="p">);</span>
        
        <span class="c1">// Count frame drops (frames taking longer than 16.67ms for 60fps)</span>
        <span class="kd">const</span> <span class="nx">drops</span> <span class="o">=</span> <span class="nx">frameTimesRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">time</span> <span class="o">=&gt;</span> <span class="nx">time</span> <span class="o">&gt;</span> <span class="mf">16.67</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
        <span class="nx">setFrameDrops</span><span class="p">(</span><span class="nx">drops</span><span class="p">);</span>
      <span class="p">}</span>
      
      <span class="nx">lastTimeRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">now</span><span class="p">;</span>
      <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">measureFrameRate</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">rafId</span> <span class="o">=</span> <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">measureFrameRate</span><span class="p">);</span>
    
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">cancelAnimationFrame</span><span class="p">(</span><span class="nx">rafId</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">getPerformanceStatus</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fps</span> <span class="o">&gt;=</span> <span class="mi">55</span><span class="p">)</span> <span class="k">return</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Excellent</span><span class="dl">'</span><span class="p">,</span> <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">green</span><span class="dl">'</span> <span class="p">};</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fps</span> <span class="o">&gt;=</span> <span class="mi">45</span><span class="p">)</span> <span class="k">return</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Good</span><span class="dl">'</span><span class="p">,</span> <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">orange</span><span class="dl">'</span> <span class="p">};</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fps</span> <span class="o">&gt;=</span> <span class="mi">30</span><span class="p">)</span> <span class="k">return</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Fair</span><span class="dl">'</span><span class="p">,</span> <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">red</span><span class="dl">'</span> <span class="p">};</span>
    <span class="k">return</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Poor</span><span class="dl">'</span><span class="p">,</span> <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">darkred</span><span class="dl">'</span> <span class="p">};</span>
  <span class="p">};</span>

  <span class="kd">const</span> <span class="nx">performance</span> <span class="o">=</span> <span class="nx">getPerformanceStatus</span><span class="p">();</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span><span class="nx">Frame</span> <span class="nx">Rate</span> <span class="nx">Monitor</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span><span class="na">FPS</span><span class="p">:</span> <span class="p">{</span><span class="nx">fps</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Frame</span> <span class="na">Drops</span><span class="p">:</span> <span class="p">{</span><span class="nx">frameDrops</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="na">Status</span><span class="p">:</span> <span class="p">{</span><span class="nx">performance</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="2-memory-pressure-monitor">2. Memory Pressure Monitor</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">AppState</span><span class="p">,</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">MemoryPressureMonitor</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">pressureLevel</span><span class="p">,</span> <span class="nx">setPressureLevel</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">'</span><span class="s1">normal</span><span class="dl">'</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">memoryWarnings</span><span class="p">,</span> <span class="nx">setMemoryWarnings</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">handleMemoryWarning</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">setMemoryWarnings</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
      <span class="nx">setPressureLevel</span><span class="p">(</span><span class="dl">'</span><span class="s1">high</span><span class="dl">'</span><span class="p">);</span>
      
      <span class="c1">// Log memory warning</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="dl">'</span><span class="s1">Memory warning received</span><span class="dl">'</span><span class="p">);</span>
      
      <span class="c1">// Clear non-essential data</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">const</span> <span class="nx">handleAppStateChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">nextAppState</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">nextAppState</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">background</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">setPressureLevel</span><span class="p">(</span><span class="dl">'</span><span class="s1">low</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">nextAppState</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">active</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">setPressureLevel</span><span class="p">(</span><span class="dl">'</span><span class="s1">normal</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="c1">// Listen for memory warnings</span>
    <span class="kd">const</span> <span class="nx">memoryWarningSubscription</span> <span class="o">=</span> <span class="nx">AppState</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">memoryWarning</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleMemoryWarning</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">appStateSubscription</span> <span class="o">=</span> <span class="nx">AppState</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">change</span><span class="dl">'</span><span class="p">,</span> <span class="nx">handleAppStateChange</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">memoryWarningSubscription</span><span class="p">?.</span><span class="nx">remove</span><span class="p">();</span>
      <span class="nx">appStateSubscription</span><span class="p">?.</span><span class="nx">remove</span><span class="p">();</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">const</span> <span class="nx">getPressureColor</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nx">pressureLevel</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="dl">'</span><span class="s1">low</span><span class="dl">'</span><span class="p">:</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">green</span><span class="dl">'</span><span class="p">;</span>
      <span class="k">case</span> <span class="dl">'</span><span class="s1">normal</span><span class="dl">'</span><span class="p">:</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">blue</span><span class="dl">'</span><span class="p">;</span>
      <span class="k">case</span> <span class="dl">'</span><span class="s1">high</span><span class="dl">'</span><span class="p">:</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">red</span><span class="dl">'</span><span class="p">;</span>
      <span class="nl">default</span><span class="p">:</span> <span class="k">return</span> <span class="dl">'</span><span class="s1">gray</span><span class="dl">'</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="nx">Pressure</span> <span class="nx">Monitor</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{{}}</span><span class="o">&gt;</span><span class="nx">Pressure</span> <span class="na">Level</span><span class="p">:</span> <span class="p">{</span><span class="nx">pressureLevel</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">Text</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="na">Warnings</span><span class="p">:</span> <span class="p">{</span><span class="nx">memoryWarnings</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="integration-with-development-tools">Integration with Development Tools</h2>

<h3 id="1-metro-bundle-analyzer">1. Metro Bundle Analyzer</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// metro.config.js</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">getDefaultConfig</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">metro-config</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span>
    <span class="na">resolver</span><span class="p">:</span> <span class="p">{</span> <span class="nx">sourceExts</span><span class="p">,</span> <span class="nx">assetExts</span> <span class="p">},</span>
  <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getDefaultConfig</span><span class="p">();</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="na">transformer</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">babelTransformerPath</span><span class="p">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="dl">'</span><span class="s1">react-native-svg-transformer</span><span class="dl">'</span><span class="p">),</span>
    <span class="p">},</span>
    <span class="na">resolver</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">assetExts</span><span class="p">:</span> <span class="nx">assetExts</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ext</span> <span class="o">=&gt;</span> <span class="nx">ext</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">svg</span><span class="dl">'</span><span class="p">),</span>
      <span class="na">sourceExts</span><span class="p">:</span> <span class="p">[...</span><span class="nx">sourceExts</span><span class="p">,</span> <span class="dl">'</span><span class="s1">svg</span><span class="dl">'</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="c1">// Enable bundle analysis</span>
    <span class="na">serializer</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">createModuleIdFactory</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// Log module paths for analysis</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Module:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">path</span><span class="p">);</span>
          <span class="k">return</span> <span class="nx">path</span><span class="p">;</span>
        <span class="p">};</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="p">})();</span>
</code></pre></div></div>

<h3 id="2-custom-dev-menu-integration">2. Custom Dev Menu Integration</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">DevSettings</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">DevMenuIntegration</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Add custom dev menu items</span>
    <span class="nx">DevSettings</span><span class="p">.</span><span class="nx">addMenuItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">Memory Profile</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">__heapProfiler</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">snapshot</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">__heapProfiler</span><span class="p">.</span><span class="nx">takeSnapshot</span><span class="p">();</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Memory Snapshot:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">snapshot</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">DevSettings</span><span class="p">.</span><span class="nx">addMenuItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">Force GC</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">();</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Garbage collection forced</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="nx">DevSettings</span><span class="p">.</span><span class="nx">addMenuItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">Clear Caches</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Clear various caches</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">__clearCaches</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">global</span><span class="p">.</span><span class="nx">__clearCaches</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span><span class="nx">Dev</span> <span class="nx">Menu</span> <span class="nx">Integration</span><span class="o">&lt;</span><span class="sr">/View&gt;</span><span class="err">;
</span><span class="p">};</span>
</code></pre></div></div>

<h2 id="testing-memory-profiling">Testing Memory Profiling</h2>

<h3 id="1-memory-test-suite">1. Memory Test Suite</h3>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">render</span><span class="p">,</span> <span class="nx">cleanup</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@testing-library/react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">Memory Profiling Tests</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">initialMemory</span><span class="p">;</span>

  <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">initialMemory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">?.</span><span class="nx">memory</span><span class="p">?.</span><span class="nx">usedJSHeapSize</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">afterEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">cleanup</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should not leak memory during component lifecycle</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">unmount</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">MyComponent</span> <span class="o">/&gt;</span><span class="p">);</span>
    
    <span class="c1">// Simulate user interactions</span>
    <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">press</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Button</span><span class="dl">'</span><span class="p">));</span>
    
    <span class="nx">unmount</span><span class="p">();</span>
    
    <span class="c1">// Wait for GC</span>
    <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="mi">1000</span><span class="p">));</span>
    
    <span class="kd">const</span> <span class="nx">finalMemory</span> <span class="o">=</span> <span class="nb">global</span><span class="p">.</span><span class="nx">performance</span><span class="p">?.</span><span class="nx">memory</span><span class="p">?.</span><span class="nx">usedJSHeapSize</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">memoryIncrease</span> <span class="o">=</span> <span class="nx">finalMemory</span> <span class="o">-</span> <span class="nx">initialMemory</span><span class="p">;</span>
    
    <span class="c1">// Allow for 1MB increase (tolerance for test overhead)</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">memoryIncrease</span><span class="p">).</span><span class="nx">toBeLessThan</span><span class="p">(</span><span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should handle memory pressure gracefully</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">getByText</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">MemoryPressureComponent</span> <span class="o">/&gt;</span><span class="p">);</span>
    
    <span class="c1">// Simulate memory warning</span>
    <span class="nx">fireEvent</span><span class="p">(</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Trigger Memory Warning</span><span class="dl">'</span><span class="p">),</span> <span class="dl">'</span><span class="s1">memoryWarning</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="nx">expect</span><span class="p">(</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Memory pressure handled</span><span class="dl">'</span><span class="p">)).</span><span class="nx">toBeTruthy</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="summary">Summary</h2>

<p>Memory profiling tools for React Native include:</p>

<ol>
  <li><strong>Built-in Tools</strong>: Flipper, React DevTools, Metro Bundle Analyzer</li>
  <li><strong>Custom Monitoring</strong>: Memory trackers, component profilers, leak detectors</li>
  <li><strong>Performance Monitoring</strong>: Frame rate monitoring, memory pressure detection</li>
  <li><strong>Development Integration</strong>: Dev menu integration, automated testing</li>
  <li><strong>Advanced Analysis</strong>: Heap snapshots, memory trend analysis</li>
</ol>

<h2 id="key-takeaways">Key Takeaways</h2>

<ul>
  <li>Use Flipper for comprehensive memory profiling during development</li>
  <li>Implement custom memory monitoring for production insights</li>
  <li>Monitor frame rates and memory pressure in real-time</li>
  <li>Test for memory leaks as part of your test suite</li>
  <li>Integrate memory profiling tools into your development workflow</li>
  <li>Use heap snapshots to analyze memory usage patterns</li>
  <li>Monitor memory trends to detect potential leaks early</li>
</ul>


        </main>
        
        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ecf0f1; color: #666; text-align: center;">
            <p>Interview Prep Documentation - Built with Jekyll</p>
        </footer>
    </div>
</body>
</html>
