<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ§  Memory Optimization - Interview Prep Documentation</title>
    <meta name="description" content="Comprehensive guides for JavaScript, TypeScript, and React Native interview preparation">
    
    <!-- GitHub Pages compatible styling -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
        }
        
        .container {
            max-width: 100%;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #2c3e50;
            margin-top: 2em;
            margin-bottom: 1em;
        }
        
        h1 {
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 5px;
        }
        
        code {
            background-color: #f8f9fa;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
        }
        
        blockquote {
            border-left: 4px solid #3498db;
            margin: 0;
            padding-left: 20px;
            color: #666;
            font-style: italic;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 1em 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .navigation {
            background-color: #2c3e50;
            color: white;
            padding: 10px 0;
            margin-bottom: 20px;
        }
        
        .navigation a {
            color: white;
            text-decoration: none;
            margin-right: 20px;
        }
        
        .navigation a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb {
            margin-bottom: 20px;
            color: #666;
        }
        
        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="navigation">
            <a href="/">Home</a>
            <a href="/Javascript/">JavaScript</a>
            <a href="/TypeScript/">TypeScript</a>
            <a href="/React-Native/">React Native</a>
        </nav>
        
        
        
        <main>
            <h1 id="-memory-optimization">ðŸ§  <strong>Memory Optimization</strong></h1>

<blockquote>
  <p><strong>Master memory optimization techniques, profiling, and best practices for React Native applications</strong></p>
</blockquote>

<link rel="stylesheet" href="../../common-styles.css" />

<hr />

<h2 id="-table-of-contents">ðŸ“š <strong>Table of Contents</strong></h2>

<ul>
  <li><a href="#-memory-optimization-overview">Memory Optimization Overview</a></li>
  <li><a href="#-memory-profiling">Memory Profiling</a></li>
  <li><a href="#-memory-leak-prevention">Memory Leak Prevention</a></li>
  <li><a href="#-image-memory-management">Image Memory Management</a></li>
  <li><a href="#-list-memory-optimization">List Memory Optimization</a></li>
  <li><a href="#-best-practices">Best Practices</a></li>
  <li><a href="#-interview-questions">Interview Questions</a></li>
</ul>

<hr />

<h2 id="-memory-optimization-overview">ðŸ§  <strong>Memory Optimization Overview</strong></h2>

<h3 id="memory-management-architecture"><strong>Memory Management Architecture</strong></h3>

<pre><code class="language-mermaid">graph TD
    A[React Native App] --&gt; B[JavaScript Heap]
    A --&gt; C[Native Memory]
    A --&gt; D[Image Cache]
    A --&gt; E[Bridge Memory]
    
    B --&gt; F[Component State]
    B --&gt; G[Event Listeners]
    B --&gt; H[Closures]
    C --&gt; I[Native Modules]
    C --&gt; J[UI Components]
    D --&gt; K[Image Assets]
    E --&gt; L[Bridge Communication]
</code></pre>

<h3 id="key-areas"><strong>Key Areas</strong></h3>
<ul>
  <li><strong>JavaScript Heap</strong>: Component state, closures, event listeners</li>
  <li><strong>Native Memory</strong>: Native modules, UI components</li>
  <li><strong>Image Cache</strong>: Image assets and caching</li>
  <li><strong>Bridge Memory</strong>: Communication between JS and native</li>
</ul>

<hr />

<h2 id="-memory-profiling">ðŸ“Š <strong>Memory Profiling</strong></h2>

<h3 id="memory-profiling-tools"><strong>Memory Profiling Tools</strong></h3>

<p><button onclick="copyCode(this)" class="copy-btn">ðŸ“‹ Copy</button></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useCallback</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">TouchableOpacity</span><span class="p">,</span> <span class="nx">StyleSheet</span><span class="p">,</span> <span class="nx">Alert</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// Memory profiling utilities</span>
<span class="kd">const</span> <span class="nx">MemoryProfiler</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// Get memory usage</span>
  <span class="na">getMemoryUsage</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="na">usedJSHeapSize</span><span class="p">:</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span><span class="p">,</span>
        <span class="na">totalJSHeapSize</span><span class="p">:</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">.</span><span class="nx">totalJSHeapSize</span><span class="p">,</span>
        <span class="na">jsHeapSizeLimit</span><span class="p">:</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">.</span><span class="nx">jsHeapSizeLimit</span><span class="p">,</span>
        <span class="na">usagePercentage</span><span class="p">:</span> <span class="p">(</span><span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span> <span class="o">/</span> <span class="nx">performance</span><span class="p">.</span><span class="nx">memory</span><span class="p">.</span><span class="nx">jsHeapSizeLimit</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="c1">// Monitor memory usage</span>
  <span class="na">startMonitoring</span><span class="p">:</span> <span class="p">(</span><span class="nx">interval</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">memoryData</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">let</span> <span class="nx">isMonitoring</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">monitor</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">isMonitoring</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">memoryUsage</span> <span class="o">=</span> <span class="nx">MemoryProfiler</span><span class="p">.</span><span class="nx">getMemoryUsage</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">memoryUsage</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">memoryData</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
            <span class="p">...</span><span class="nx">memoryUsage</span><span class="p">,</span>
            <span class="na">timestamp</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">()</span>
          <span class="p">});</span>
        <span class="p">}</span>
        <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">monitor</span><span class="p">,</span> <span class="nx">interval</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="na">start</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">isMonitoring</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">monitor</span><span class="p">();</span>
      <span class="p">},</span>
      <span class="na">stop</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">isMonitoring</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">memoryData</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="na">getData</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">memoryData</span>
    <span class="p">};</span>
  <span class="p">},</span>

  <span class="c1">// Force garbage collection (if available)</span>
  <span class="na">forceGC</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">global</span><span class="p">.</span><span class="nx">gc</span><span class="p">();</span>
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="c1">// Memory leak detection</span>
  <span class="na">detectMemoryLeaks</span><span class="p">:</span> <span class="p">(</span><span class="nx">componentName</span><span class="p">,</span> <span class="nx">initialMemory</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">currentMemory</span> <span class="o">=</span> <span class="nx">MemoryProfiler</span><span class="p">.</span><span class="nx">getMemoryUsage</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">currentMemory</span> <span class="o">&amp;&amp;</span> <span class="nx">initialMemory</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">memoryIncrease</span> <span class="o">=</span> <span class="nx">currentMemory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span> <span class="o">-</span> <span class="nx">initialMemory</span><span class="p">.</span><span class="nx">usedJSHeapSize</span><span class="p">;</span>
      <span class="kd">const</span> <span class="nx">threshold</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">;</span> <span class="c1">// 10MB threshold</span>
      
      <span class="k">if</span> <span class="p">(</span><span class="nx">memoryIncrease</span> <span class="o">&gt;</span> <span class="nx">threshold</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s2">`Potential memory leak detected in </span><span class="p">${</span><span class="nx">componentName</span><span class="p">}</span><span class="s2">: </span><span class="p">${</span><span class="nx">memoryIncrease</span><span class="p">}</span><span class="s2"> bytes increase`</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="na">component</span><span class="p">:</span> <span class="nx">componentName</span><span class="p">,</span>
          <span class="nx">memoryIncrease</span><span class="p">,</span>
          <span class="nx">threshold</span><span class="p">,</span>
          <span class="na">isLeak</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">};</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span> <span class="na">isLeak</span><span class="p">:</span> <span class="kc">false</span> <span class="p">};</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Memory profiling demo component</span>
<span class="kd">const</span> <span class="nx">MemoryProfilingDemo</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">memoryUsage</span><span class="p">,</span> <span class="nx">setMemoryUsage</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">monitoring</span><span class="p">,</span> <span class="nx">setMonitoring</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">memoryData</span><span class="p">,</span> <span class="nx">setMemoryData</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">leakDetection</span><span class="p">,</span> <span class="nx">setLeakDetection</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">monitor</span><span class="p">,</span> <span class="nx">setMonitor</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

  <span class="c1">// Update memory usage</span>
  <span class="kd">const</span> <span class="nx">updateMemoryUsage</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">usage</span> <span class="o">=</span> <span class="nx">MemoryProfiler</span><span class="p">.</span><span class="nx">getMemoryUsage</span><span class="p">();</span>
    <span class="nx">setMemoryUsage</span><span class="p">(</span><span class="nx">usage</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="c1">// Start monitoring</span>
  <span class="kd">const</span> <span class="nx">handleStartMonitoring</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">newMonitor</span> <span class="o">=</span> <span class="nx">MemoryProfiler</span><span class="p">.</span><span class="nx">startMonitoring</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
    <span class="nx">newMonitor</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
    <span class="nx">setMonitor</span><span class="p">(</span><span class="nx">newMonitor</span><span class="p">);</span>
    <span class="nx">setMonitoring</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Stop monitoring</span>
  <span class="kd">const</span> <span class="nx">handleStopMonitoring</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">monitor</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">monitor</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
      <span class="nx">setMemoryData</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
      <span class="nx">setMonitoring</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Force garbage collection</span>
  <span class="kd">const</span> <span class="nx">handleForceGC</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">success</span> <span class="o">=</span> <span class="nx">MemoryProfiler</span><span class="p">.</span><span class="nx">forceGC</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">Alert</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Success</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Garbage collection forced</span><span class="dl">'</span><span class="p">);</span>
      <span class="nx">updateMemoryUsage</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">Alert</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Info</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Garbage collection not available</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Detect memory leaks</span>
  <span class="kd">const</span> <span class="nx">handleDetectLeaks</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">initialMemory</span> <span class="o">=</span> <span class="nx">MemoryProfiler</span><span class="p">.</span><span class="nx">getMemoryUsage</span><span class="p">();</span>
    
    <span class="c1">// Simulate some operations that might cause memory leaks</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">leakResult</span> <span class="o">=</span> <span class="nx">MemoryProfiler</span><span class="p">.</span><span class="nx">detectMemoryLeaks</span><span class="p">(</span><span class="dl">'</span><span class="s1">MemoryProfilingDemo</span><span class="dl">'</span><span class="p">,</span> <span class="nx">initialMemory</span><span class="p">);</span>
      <span class="nx">setLeakDetection</span><span class="p">(</span><span class="nx">leakResult</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Simulate memory-intensive operations</span>
  <span class="kd">const</span> <span class="nx">handleMemoryIntensiveOperation</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">largeArray</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">100000</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">largeArray</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="na">id</span><span class="p">:</span> <span class="nx">i</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">),</span>
        <span class="na">timestamp</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">()</span>
      <span class="p">});</span>
    <span class="p">}</span>
    
    <span class="c1">// Keep reference to prevent immediate GC</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">largeArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">updateMemoryUsage</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
    
    <span class="nx">updateMemoryUsage</span><span class="p">();</span>
  <span class="p">};</span>

  <span class="c1">// Update memory usage on mount and periodically</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">updateMemoryUsage</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">updateMemoryUsage</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">updateMemoryUsage</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="nx">Profiling</span> <span class="nx">Demo</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      
      <span class="p">{</span><span class="nx">memoryUsage</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">memoryContainer</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">memoryTitle</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="na">Usage</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">memoryText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="na">Used</span><span class="p">:</span> <span class="p">{(</span><span class="nx">memoryUsage</span><span class="p">.</span><span class="nx">usedJSHeapSize</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span> <span class="nx">MB</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">memoryText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="na">Total</span><span class="p">:</span> <span class="p">{(</span><span class="nx">memoryUsage</span><span class="p">.</span><span class="nx">totalJSHeapSize</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span> <span class="nx">MB</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">memoryText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="na">Limit</span><span class="p">:</span> <span class="p">{(</span><span class="nx">memoryUsage</span><span class="p">.</span><span class="nx">jsHeapSizeLimit</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span> <span class="nx">MB</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">memoryText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="na">Usage</span><span class="p">:</span> <span class="p">{</span><span class="nx">memoryUsage</span><span class="p">.</span><span class="nx">usagePercentage</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span><span class="o">%</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>      <span class="p">)}</span>

      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonContainer</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">,</span> <span class="nx">monitoring</span> <span class="o">&amp;&amp;</span> <span class="nx">styles</span><span class="p">.</span><span class="nx">buttonDisabled</span><span class="p">]}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleStartMonitoring</span><span class="p">}</span>
          <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">monitoring</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">monitoring</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">Monitoring...</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Start Monitoring</span><span class="dl">'</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">,</span> <span class="o">!</span><span class="nx">monitoring</span> <span class="o">&amp;&amp;</span> <span class="nx">styles</span><span class="p">.</span><span class="nx">buttonDisabled</span><span class="p">]}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleStopMonitoring</span><span class="p">}</span>
          <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="o">!</span><span class="nx">monitoring</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Stop</span> <span class="nx">Monitoring</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleForceGC</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Force</span> <span class="nx">GC</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleDetectLeaks</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Detect</span> <span class="nx">Leaks</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleMemoryIntensiveOperation</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="nx">Intensive</span> <span class="nx">Op</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>
      <span class="p">{</span><span class="nx">leakDetection</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">leakContainer</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">leakTitle</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Leak</span> <span class="na">Detection</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">leakText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">leakDetection</span><span class="p">.</span><span class="nx">isLeak</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">Potential leak detected</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">No leaks detected</span><span class="dl">'</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="p">{</span><span class="nx">leakDetection</span><span class="p">.</span><span class="nx">isLeak</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">leakText</span><span class="p">}</span><span class="o">&gt;</span>
              <span class="nx">Memory</span> <span class="na">increase</span><span class="p">:</span> <span class="p">{(</span><span class="nx">leakDetection</span><span class="p">.</span><span class="nx">memoryIncrease</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span> <span class="nx">MB</span>
            <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="p">)}</span>
        <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>      <span class="p">)}</span>

      <span class="p">{</span><span class="nx">memoryData</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">dataContainer</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">dataTitle</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Monitoring</span> <span class="na">Data</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">dataText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="na">Samples</span><span class="p">:</span> <span class="p">{</span><span class="nx">memoryData</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">dataText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="nx">Average</span> <span class="na">Usage</span><span class="p">:</span> <span class="p">{(</span><span class="nx">memoryData</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">usagePercentage</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="nx">memoryData</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span><span class="o">%</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>      <span class="p">)}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">styles</span> <span class="o">=</span> <span class="nx">StyleSheet</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">container</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">flex</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#fff</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#333</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">memoryContainer</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#e3f2fd</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">memoryTitle</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#1976d2</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">memoryText</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#1976d2</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">buttonContainer</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">button</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#007bff</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">alignItems</span><span class="p">:</span> <span class="dl">'</span><span class="s1">center</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">buttonDisabled</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#6c757d</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">buttonText</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#fff</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">leakContainer</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#fff3cd</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">leakTitle</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#856404</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">leakText</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#856404</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">dataContainer</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#d4edda</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">dataTitle</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#155724</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">dataText</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#155724</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">});</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">MemoryProfiler</span><span class="p">,</span> <span class="nx">MemoryProfilingDemo</span> <span class="p">};</span>
</code></pre></div></div>

<hr />

<h2 id="-memory-leak-prevention">ðŸ”’ <strong>Memory Leak Prevention</strong></h2>

<h3 id="memory-leak-prevention-patterns"><strong>Memory Leak Prevention Patterns</strong></h3>

<p><button onclick="copyCode(this)" class="copy-btn">ðŸ“‹ Copy</button></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useCallback</span><span class="p">,</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">TouchableOpacity</span><span class="p">,</span> <span class="nx">StyleSheet</span><span class="p">,</span> <span class="nx">Alert</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// Memory leak prevention utilities</span>
<span class="kd">const</span> <span class="nx">MemoryLeakPrevention</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// Cleanup event listeners</span>
  <span class="na">cleanupEventListeners</span><span class="p">:</span> <span class="p">(</span><span class="nx">listeners</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">listeners</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">listener</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">listener</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">remove</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">listener</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="c1">// Cleanup timers</span>
  <span class="na">cleanupTimers</span><span class="p">:</span> <span class="p">(</span><span class="nx">timers</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">timers</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">timer</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">timer</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
        <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="c1">// Cleanup subscriptions</span>
  <span class="na">cleanupSubscriptions</span><span class="p">:</span> <span class="p">(</span><span class="nx">subscriptions</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">subscriptions</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">subscription</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">subscription</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">subscription</span><span class="p">.</span><span class="nx">unsubscribe</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">subscription</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="c1">// Weak reference utility</span>
  <span class="na">createWeakRef</span><span class="p">:</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">WeakRef</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">undefined</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">WeakRef</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// Fallback for environments without WeakRef</span>
    <span class="k">return</span> <span class="p">{</span> <span class="na">deref</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">object</span> <span class="p">};</span>
  <span class="p">},</span>

  <span class="c1">// Memory-efficient object pool</span>
  <span class="na">createObjectPool</span><span class="p">:</span> <span class="p">(</span><span class="nx">createFn</span><span class="p">,</span> <span class="nx">resetFn</span><span class="p">,</span> <span class="nx">maxSize</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">pool</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">let</span> <span class="nx">currentSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="na">acquire</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">pool</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">pool</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">currentSize</span> <span class="o">&lt;</span> <span class="nx">maxSize</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">currentSize</span><span class="o">++</span><span class="p">;</span>
          <span class="k">return</span> <span class="nx">createFn</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">createFn</span><span class="p">();</span>
      <span class="p">},</span>
      
      <span class="na">release</span><span class="p">:</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">pool</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">maxSize</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">resetFn</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
          <span class="nx">pool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      
      <span class="na">clear</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">pool</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">currentSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Memory leak prevention demo component</span>
<span class="kd">const</span> <span class="nx">MemoryLeakPreventionDemo</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">listeners</span><span class="p">,</span> <span class="nx">setListeners</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">timers</span><span class="p">,</span> <span class="nx">setTimers</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">subscriptions</span><span class="p">,</span> <span class="nx">setSubscriptions</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">objectPool</span><span class="p">,</span> <span class="nx">setObjectPool</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">pooledObjects</span><span class="p">,</span> <span class="nx">setPooledObjects</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>

  <span class="c1">// Create object pool</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">pool</span> <span class="o">=</span> <span class="nx">MemoryLeakPrevention</span><span class="p">.</span><span class="nx">createObjectPool</span><span class="p">(</span>
      <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span> <span class="na">data</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">1000</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">)</span> <span class="p">}),</span>
      <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">},</span>
      <span class="mi">10</span>
    <span class="p">);</span>
    <span class="nx">setObjectPool</span><span class="p">(</span><span class="nx">pool</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="c1">// Cleanup on unmount</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Cleanup event listeners</span>
      <span class="nx">MemoryLeakPrevention</span><span class="p">.</span><span class="nx">cleanupEventListeners</span><span class="p">(</span><span class="nx">listeners</span><span class="p">);</span>
      
      <span class="c1">// Cleanup timers</span>
      <span class="nx">MemoryLeakPrevention</span><span class="p">.</span><span class="nx">cleanupTimers</span><span class="p">(</span><span class="nx">timers</span><span class="p">);</span>
      
      <span class="c1">// Cleanup subscriptions</span>
      <span class="nx">MemoryLeakPrevention</span><span class="p">.</span><span class="nx">cleanupSubscriptions</span><span class="p">(</span><span class="nx">subscriptions</span><span class="p">);</span>
      
      <span class="c1">// Clear object pool</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">objectPool</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">objectPool</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">listeners</span><span class="p">,</span> <span class="nx">timers</span><span class="p">,</span> <span class="nx">subscriptions</span><span class="p">,</span> <span class="nx">objectPool</span><span class="p">]);</span>

  <span class="c1">// Add event listener</span>
  <span class="kd">const</span> <span class="nx">handleAddEventListener</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">listener</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">remove</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Event listener removed</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">setListeners</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="p">[...</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">listener</span><span class="p">]);</span>
    <span class="nx">setCount</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Add timer</span>
  <span class="kd">const</span> <span class="nx">handleAddTimer</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Timer executed</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
    <span class="nx">setTimers</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="p">[...</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">timer</span><span class="p">]);</span>
    <span class="nx">setCount</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Add subscription</span>
  <span class="kd">const</span> <span class="nx">handleAddSubscription</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">subscription</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">unsubscribe</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Subscription unsubscribed</span><span class="dl">'</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">setSubscriptions</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="p">[...</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">subscription</span><span class="p">]);</span>
    <span class="nx">setCount</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Acquire object from pool</span>
  <span class="kd">const</span> <span class="nx">handleAcquireObject</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">objectPool</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">objectPool</span><span class="p">.</span><span class="nx">acquire</span><span class="p">();</span>
      <span class="nx">setPooledObjects</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="p">[...</span><span class="nx">prev</span><span class="p">,</span> <span class="nx">obj</span><span class="p">]);</span>
      <span class="nx">setCount</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Release object to pool</span>
  <span class="kd">const</span> <span class="nx">handleReleaseObject</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">objectPool</span> <span class="o">&amp;&amp;</span> <span class="nx">pooledObjects</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">pooledObjects</span><span class="p">[</span><span class="nx">pooledObjects</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
      <span class="nx">objectPool</span><span class="p">.</span><span class="nx">release</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
      <span class="nx">setPooledObjects</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">));</span>
      <span class="nx">setCount</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Clear all resources</span>
  <span class="kd">const</span> <span class="nx">handleClearAll</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">MemoryLeakPrevention</span><span class="p">.</span><span class="nx">cleanupEventListeners</span><span class="p">(</span><span class="nx">listeners</span><span class="p">);</span>
    <span class="nx">MemoryLeakPrevention</span><span class="p">.</span><span class="nx">cleanupTimers</span><span class="p">(</span><span class="nx">timers</span><span class="p">);</span>
    <span class="nx">MemoryLeakPrevention</span><span class="p">.</span><span class="nx">cleanupSubscriptions</span><span class="p">(</span><span class="nx">subscriptions</span><span class="p">);</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="nx">objectPool</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">objectPool</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
    <span class="p">}</span>
    
    <span class="nx">setListeners</span><span class="p">([]);</span>
    <span class="nx">setTimers</span><span class="p">([]);</span>
    <span class="nx">setSubscriptions</span><span class="p">([]);</span>
    <span class="nx">setPooledObjects</span><span class="p">([]);</span>
    <span class="nx">setCount</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    
    <span class="nx">Alert</span><span class="p">.</span><span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Success</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">All resources cleared</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Memory</span> <span class="nx">Leak</span> <span class="nx">Prevention</span> <span class="nx">Demo</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsContainer</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsTitle</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Resource</span> <span class="na">Count</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsText</span><span class="p">}</span><span class="o">&gt;</span><span class="na">Total</span><span class="p">:</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Event</span> <span class="na">Listeners</span><span class="p">:</span> <span class="p">{</span><span class="nx">listeners</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsText</span><span class="p">}</span><span class="o">&gt;</span><span class="na">Timers</span><span class="p">:</span> <span class="p">{</span><span class="nx">timers</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsText</span><span class="p">}</span><span class="o">&gt;</span><span class="na">Subscriptions</span><span class="p">:</span> <span class="p">{</span><span class="nx">subscriptions</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Pooled</span> <span class="na">Objects</span><span class="p">:</span> <span class="p">{</span><span class="nx">pooledObjects</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonContainer</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleAddEventListener</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Add</span> <span class="nx">Event</span> <span class="nx">Listener</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleAddTimer</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Add</span> <span class="nx">Timer</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleAddSubscription</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Add</span> <span class="nx">Subscription</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleAcquireObject</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Acquire</span> <span class="nb">Object</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleReleaseObject</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Release</span> <span class="nb">Object</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">clearButton</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClearAll</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Clear</span> <span class="nx">All</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">styles</span> <span class="o">=</span> <span class="nx">StyleSheet</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">container</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">flex</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#fff</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#333</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">statsContainer</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#e3f2fd</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">statsTitle</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#1976d2</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">statsText</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#1976d2</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">buttonContainer</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">button</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#007bff</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">alignItems</span><span class="p">:</span> <span class="dl">'</span><span class="s1">center</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">clearButton</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#dc3545</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">alignItems</span><span class="p">:</span> <span class="dl">'</span><span class="s1">center</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">buttonText</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#fff</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">});</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">MemoryLeakPrevention</span><span class="p">,</span> <span class="nx">MemoryLeakPreventionDemo</span> <span class="p">};</span>
</code></pre></div></div>

<hr />

<h2 id="ï¸-image-memory-management">ðŸ–¼ï¸ <strong>Image Memory Management</strong></h2>

<h3 id="image-memory-optimization"><strong>Image Memory Optimization</strong></h3>

<p><button onclick="copyCode(this)" class="copy-btn">ðŸ“‹ Copy</button></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useCallback</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">View</span><span class="p">,</span> <span class="nx">Text</span><span class="p">,</span> <span class="nx">TouchableOpacity</span><span class="p">,</span> <span class="nx">StyleSheet</span><span class="p">,</span> <span class="nx">Image</span><span class="p">,</span> <span class="nx">Dimensions</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// Image memory management utilities</span>
<span class="kd">const</span> <span class="nx">ImageMemoryManager</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// Image cache management</span>
  <span class="na">imageCache</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">(),</span>
  <span class="na">maxCacheSize</span><span class="p">:</span> <span class="mi">50</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span> <span class="c1">// 50MB</span>
  <span class="na">currentCacheSize</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

  <span class="c1">// Add image to cache</span>
  <span class="na">addToCache</span><span class="p">:</span> <span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">imageData</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">size</span> <span class="o">=</span> <span class="nx">imageData</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    
    <span class="c1">// Check if cache is full</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">currentCacheSize</span> <span class="o">+</span> <span class="nx">size</span> <span class="o">&gt;</span> <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">maxCacheSize</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">cleanupCache</span><span class="p">();</span>
    <span class="p">}</span>
    
    <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">imageCache</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">data</span><span class="p">:</span> <span class="nx">imageData</span><span class="p">,</span>
      <span class="nx">size</span><span class="p">,</span>
      <span class="na">timestamp</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
      <span class="na">accessCount</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">});</span>
    
    <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">currentCacheSize</span> <span class="o">+=</span> <span class="nx">size</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="c1">// Get image from cache</span>
  <span class="na">getFromCache</span><span class="p">:</span> <span class="p">(</span><span class="nx">uri</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">cached</span> <span class="o">=</span> <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">imageCache</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">uri</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">cached</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">cached</span><span class="p">.</span><span class="nx">accessCount</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">cached</span><span class="p">.</span><span class="nx">lastAccessed</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">cached</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="c1">// Cleanup cache</span>
  <span class="na">cleanupCache</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">imageCache</span><span class="p">.</span><span class="nx">entries</span><span class="p">());</span>
    
    <span class="c1">// Sort by access count and last accessed time</span>
    <span class="nx">entries</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="p">[,</span> <span class="nx">cacheA</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
      <span class="kd">const</span> <span class="p">[,</span> <span class="nx">cacheB</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
      
      <span class="c1">// Prioritize recently accessed and frequently accessed items</span>
      <span class="kd">const</span> <span class="nx">scoreA</span> <span class="o">=</span> <span class="nx">cacheA</span><span class="p">.</span><span class="nx">accessCount</span> <span class="o">*</span> <span class="mf">0.7</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nx">cacheA</span><span class="p">.</span><span class="nx">lastAccessed</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">;</span>
      <span class="kd">const</span> <span class="nx">scoreB</span> <span class="o">=</span> <span class="nx">cacheB</span><span class="p">.</span><span class="nx">accessCount</span> <span class="o">*</span> <span class="mf">0.7</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">-</span> <span class="nx">cacheB</span><span class="p">.</span><span class="nx">lastAccessed</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">;</span>
      
      <span class="k">return</span> <span class="nx">scoreA</span> <span class="o">-</span> <span class="nx">scoreB</span><span class="p">;</span>
    <span class="p">});</span>
    
    <span class="c1">// Remove least important items</span>
    <span class="kd">const</span> <span class="nx">toRemove</span> <span class="o">=</span> <span class="nx">entries</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">entries</span><span class="p">.</span><span class="nx">length</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">));</span>
    <span class="nx">toRemove</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(([</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">cache</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">imageCache</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="nx">uri</span><span class="p">);</span>
      <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">currentCacheSize</span> <span class="o">-=</span> <span class="nx">cache</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="c1">// Clear cache</span>
  <span class="na">clearCache</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">imageCache</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
    <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">currentCacheSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="c1">// Get cache statistics</span>
  <span class="na">getCacheStats</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">imageCache</span><span class="p">.</span><span class="nx">values</span><span class="p">());</span>
    <span class="kd">const</span> <span class="nx">totalSize</span> <span class="o">=</span> <span class="nx">entries</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">entry</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">averageSize</span> <span class="o">=</span> <span class="nx">entries</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">?</span> <span class="nx">totalSize</span> <span class="o">/</span> <span class="nx">entries</span><span class="p">.</span><span class="nx">length</span> <span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">count</span><span class="p">:</span> <span class="nx">entries</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">totalSize</span><span class="p">,</span>
      <span class="nx">averageSize</span><span class="p">,</span>
      <span class="na">maxSize</span><span class="p">:</span> <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">maxCacheSize</span><span class="p">,</span>
      <span class="na">usagePercentage</span><span class="p">:</span> <span class="p">(</span><span class="nx">totalSize</span> <span class="o">/</span> <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">maxCacheSize</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="p">};</span>
  <span class="p">},</span>

  <span class="c1">// Optimize image size</span>
  <span class="na">optimizeImageSize</span><span class="p">:</span> <span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">maxWidth</span><span class="p">,</span> <span class="nx">maxHeight</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">Image</span><span class="p">.</span><span class="nx">getSize</span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="p">(</span><span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">aspectRatio</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">/</span> <span class="nx">height</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">newWidth</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">newHeight</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nx">width</span> <span class="o">&gt;</span> <span class="nx">maxWidth</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">newWidth</span> <span class="o">=</span> <span class="nx">maxWidth</span><span class="p">;</span>
          <span class="nx">newHeight</span> <span class="o">=</span> <span class="nx">newWidth</span> <span class="o">/</span> <span class="nx">aspectRatio</span><span class="p">;</span>
        <span class="p">}</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nx">newHeight</span> <span class="o">&gt;</span> <span class="nx">maxHeight</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">newHeight</span> <span class="o">=</span> <span class="nx">maxHeight</span><span class="p">;</span>
          <span class="nx">newWidth</span> <span class="o">=</span> <span class="nx">newHeight</span> <span class="o">*</span> <span class="nx">aspectRatio</span><span class="p">;</span>
        <span class="p">}</span>
        
        <span class="nx">resolve</span><span class="p">({</span> <span class="na">width</span><span class="p">:</span> <span class="nx">newWidth</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="nx">newHeight</span> <span class="p">});</span>
      <span class="p">},</span> <span class="nx">reject</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Image memory management demo component</span>
<span class="kd">const</span> <span class="nx">ImageMemoryManagementDemo</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">images</span><span class="p">,</span> <span class="nx">setImages</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">([]);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">cacheStats</span><span class="p">,</span> <span class="nx">setCacheStats</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">loading</span><span class="p">,</span> <span class="nx">setLoading</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

  <span class="c1">// Update cache statistics</span>
  <span class="kd">const</span> <span class="nx">updateCacheStats</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">stats</span> <span class="o">=</span> <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">getCacheStats</span><span class="p">();</span>
    <span class="nx">setCacheStats</span><span class="p">(</span><span class="nx">stats</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="c1">// Load image</span>
  <span class="kd">const</span> <span class="nx">handleLoadImage</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    
    <span class="k">try</span> <span class="p">{</span>
      <span class="c1">// Simulate loading an image</span>
      <span class="kd">const</span> <span class="nx">imageUri</span> <span class="o">=</span> <span class="s2">`https://picsum.photos/400/300?random=</span><span class="p">${</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()}</span><span class="s2">`</span><span class="p">;</span>
      
      <span class="c1">// Check cache first</span>
      <span class="kd">let</span> <span class="nx">imageData</span> <span class="o">=</span> <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">getFromCache</span><span class="p">(</span><span class="nx">imageUri</span><span class="p">);</span>
      
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">imageData</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Simulate image data</span>
        <span class="nx">imageData</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">1000</span><span class="p">).</span><span class="nx">fill</span><span class="p">(</span><span class="dl">'</span><span class="s1">image-data</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">addToCache</span><span class="p">(</span><span class="nx">imageUri</span><span class="p">,</span> <span class="nx">imageData</span><span class="p">);</span>
      <span class="p">}</span>
      
      <span class="nx">setImages</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="p">[...</span><span class="nx">prev</span><span class="p">,</span> <span class="p">{</span> <span class="na">uri</span><span class="p">:</span> <span class="nx">imageUri</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="p">}]);</span>
      <span class="nx">updateCacheStats</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error loading image:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
      <span class="nx">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Clear cache</span>
  <span class="kd">const</span> <span class="nx">handleClearCache</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">clearCache</span><span class="p">();</span>
    <span class="nx">updateCacheStats</span><span class="p">();</span>
  <span class="p">};</span>

  <span class="c1">// Optimize images</span>
  <span class="kd">const</span> <span class="nx">handleOptimizeImages</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">optimizedImages</span> <span class="o">=</span> <span class="p">[];</span>
      
      <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">image</span> <span class="k">of</span> <span class="nx">images</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">optimizedSize</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">ImageMemoryManager</span><span class="p">.</span><span class="nx">optimizeImageSize</span><span class="p">(</span>
            <span class="nx">image</span><span class="p">.</span><span class="nx">uri</span><span class="p">,</span> 
            <span class="mi">200</span><span class="p">,</span> 
            <span class="mi">200</span>
          <span class="p">);</span>
          <span class="nx">optimizedImages</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
            <span class="p">...</span><span class="nx">image</span><span class="p">,</span>
            <span class="nx">optimizedSize</span>
          <span class="p">});</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error optimizing image:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
          <span class="nx">optimizedImages</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">image</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      
      <span class="nx">setImages</span><span class="p">(</span><span class="nx">optimizedImages</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error optimizing images:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
      <span class="nx">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Remove image</span>
  <span class="kd">const</span> <span class="nx">handleRemoveImage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">setImages</span><span class="p">(</span><span class="nx">prev</span> <span class="o">=&gt;</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">img</span> <span class="o">=&gt;</span> <span class="nx">img</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">id</span><span class="p">));</span>
  <span class="p">};</span>

  <span class="c1">// Update cache stats on mount and when images change</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">updateCacheStats</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">updateCacheStats</span><span class="p">,</span> <span class="nx">images</span><span class="p">]);</span>

  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Image</span> <span class="nx">Memory</span> <span class="nx">Management</span> <span class="nx">Demo</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      
      <span class="p">{</span><span class="nx">cacheStats</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsContainer</span><span class="p">}</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsTitle</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Cache</span> <span class="na">Statistics</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsText</span><span class="p">}</span><span class="o">&gt;</span><span class="na">Images</span><span class="p">:</span> <span class="p">{</span><span class="nx">cacheStats</span><span class="p">.</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="na">Size</span><span class="p">:</span> <span class="p">{(</span><span class="nx">cacheStats</span><span class="p">.</span><span class="nx">totalSize</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span> <span class="nx">MB</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="na">Usage</span><span class="p">:</span> <span class="p">{</span><span class="nx">cacheStats</span><span class="p">.</span><span class="nx">usagePercentage</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span><span class="o">%</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">statsText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="nx">Average</span> <span class="na">Size</span><span class="p">:</span> <span class="p">{(</span><span class="nx">cacheStats</span><span class="p">.</span><span class="nx">averageSize</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">)}</span> <span class="nx">KB</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>      <span class="p">)}</span>

      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonContainer</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{[</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">,</span> <span class="nx">loading</span> <span class="o">&amp;&amp;</span> <span class="nx">styles</span><span class="p">.</span><span class="nx">buttonDisabled</span><span class="p">]}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleLoadImage</span><span class="p">}</span>
          <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">loading</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="p">{</span><span class="nx">loading</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">Loading...</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">Load Image</span><span class="dl">'</span><span class="p">}</span>
          <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">button</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleOptimizeImages</span><span class="p">}</span>
          <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">loading</span> <span class="o">||</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Optimize</span> <span class="nx">Images</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>
        <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
          <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">clearButton</span><span class="p">}</span>
          <span class="nx">onPress</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClearCache</span><span class="p">}</span>
        <span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">buttonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Clear</span> <span class="nx">Cache</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">imagesContainer</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">imagesTitle</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Loaded</span> <span class="na">Images</span><span class="p">:</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="p">{</span><span class="nx">images</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">image</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
          <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">image</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">imageItem</span><span class="p">}</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">Image</span> 
              <span class="nx">source</span><span class="o">=</span><span class="p">{{</span><span class="err">#</span><span class="mi">123</span><span class="p">;{{</span><span class="err">#</span><span class="mi">123</span><span class="p">;</span> <span class="nl">uri</span><span class="p">:</span> <span class="nx">image</span><span class="p">.</span><span class="nx">uri</span> <span class="p">}}</span><span class="err">#</span><span class="mi">125</span><span class="p">;}}</span><span class="err">#</span><span class="mi">125</span><span class="p">;</span> 
              <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span>
              <span class="nx">resizeMode</span><span class="o">=</span><span class="dl">"</span><span class="s2">cover</span><span class="dl">"</span>
            <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">imageInfo</span><span class="p">}</span><span class="o">&gt;</span>
              <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">imageText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Image</span> <span class="p">{</span><span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>              <span class="p">{</span><span class="nx">image</span><span class="p">.</span><span class="nx">optimizedSize</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
                <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">imageText</span><span class="p">}</span><span class="o">&gt;</span>
                  <span class="na">Optimized</span><span class="p">:</span> <span class="p">{</span><span class="nx">image</span><span class="p">.</span><span class="nx">optimizedSize</span><span class="p">.</span><span class="nx">width</span><span class="p">}</span><span class="nx">x</span><span class="p">{</span><span class="nx">image</span><span class="p">.</span><span class="nx">optimizedSize</span><span class="p">.</span><span class="nx">height</span><span class="p">}</span>
                <span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>              <span class="p">)}</span>
              <span class="o">&lt;</span><span class="nx">TouchableOpacity</span> 
                <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">removeButton</span><span class="p">}</span>
                <span class="nx">onPress</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">handleRemoveImage</span><span class="p">(</span><span class="nx">image</span><span class="p">.</span><span class="nx">id</span><span class="p">)}</span>
              <span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">removeButtonText</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Remove</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>              <span class="o">&lt;</span><span class="sr">/TouchableOpacity</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>          <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>        <span class="p">))}</span>
      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">styles</span> <span class="o">=</span> <span class="nx">StyleSheet</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">container</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">flex</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#fff</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#333</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">statsContainer</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#e3f2fd</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">statsTitle</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#1976d2</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">statsText</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#1976d2</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">buttonContainer</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">button</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#007bff</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">alignItems</span><span class="p">:</span> <span class="dl">'</span><span class="s1">center</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">buttonDisabled</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#6c757d</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">clearButton</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#dc3545</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">alignItems</span><span class="p">:</span> <span class="dl">'</span><span class="s1">center</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">buttonText</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#fff</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">imagesContainer</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">flex</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">imagesTitle</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#333</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">imageItem</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">flexDirection</span><span class="p">:</span> <span class="dl">'</span><span class="s1">row</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#f8f9fa</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">image</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
    <span class="na">height</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="na">marginRight</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">imageInfo</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">flex</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">justifyContent</span><span class="p">:</span> <span class="dl">'</span><span class="s1">center</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">imageText</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#333</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">removeButton</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#dc3545</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">padding</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="na">borderRadius</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="na">alignSelf</span><span class="p">:</span> <span class="dl">'</span><span class="s1">flex-start</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">removeButtonText</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#fff</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
    <span class="na">fontWeight</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bold</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">});</span>

<span class="k">export</span> <span class="p">{</span> <span class="nx">ImageMemoryManager</span><span class="p">,</span> <span class="nx">ImageMemoryManagementDemo</span> <span class="p">};</span>
</code></pre></div></div>

<hr />

<h2 id="-best-practices">ðŸŽ¯ <strong>Best Practices</strong></h2>

<h3 id="1-memory-optimization"><strong>1. Memory Optimization</strong></h3>
<ul>
  <li>Monitor memory usage regularly</li>
  <li>Use memory profiling tools</li>
  <li>Implement proper cleanup</li>
  <li>Optimize image handling</li>
</ul>

<h3 id="2-memory-leak-prevention"><strong>2. Memory Leak Prevention</strong></h3>
<ul>
  <li>Clean up event listeners</li>
  <li>Clear timers and intervals</li>
  <li>Unsubscribe from observables</li>
  <li>Use object pools for frequent allocations</li>
</ul>

<h3 id="3-image-memory-management"><strong>3. Image Memory Management</strong></h3>
<ul>
  <li>Implement image caching</li>
  <li>Optimize image sizes</li>
  <li>Use appropriate image formats</li>
  <li>Clear unused images</li>
</ul>

<hr />

<h2 id="-interview-questions">â“ <strong>Interview Questions</strong></h2>

<h3 id="basic-questions"><strong>Basic Questions</strong></h3>
<ol>
  <li><strong>How do you optimize memory usage in React Native?</strong></li>
  <li><strong>What are common memory leaks in React Native?</strong></li>
  <li><strong>How do you handle image memory management?</strong></li>
</ol>

<h3 id="advanced-questions"><strong>Advanced Questions</strong></h3>
<ol>
  <li><strong>How would you implement memory profiling?</strong></li>
  <li><strong>Explain different memory optimization techniques.</strong></li>
  <li><strong>How do you prevent memory leaks in components?</strong></li>
</ol>

<h3 id="practical-questions"><strong>Practical Questions</strong></h3>
<ol>
  <li><strong>Implement memory profiling tools.</strong></li>
  <li><strong>Create an image memory management system.</strong></li>
  <li><strong>Design a memory leak prevention strategy.</strong></li>
</ol>

<hr />

<h2 id="-navigation">ðŸ§­ Navigation</h2>

<div class="navigation">
    <a href="../15-Error-Handling-Recovery/04-Error-Reporting-Analytics.md" class="nav-link prev">â¬…ï¸ Previous: Error Reporting &amp; Analytics</a>
    <a href="./02-Memory-Leak-Detection.md" class="nav-link next">Next: Memory Leak Detection âž¡ï¸</a>
</div>

<hr />

<script src="../../common-scripts.js"></script>

<p><em>Last updated: December 2024</em></p>


        </main>
        
        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ecf0f1; color: #666; text-align: center;">
            <p>Interview Prep Documentation - Built with Jekyll</p>
        </footer>
    </div>
</body>
</html>
